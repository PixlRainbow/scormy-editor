
/* Smart HTML Elements v4.6.0 (2019-Oct) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-tab-item",class extends Smart.ContentElement{static get properties(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}attached(){const e=this;super.attached();e.isCompleted&&(e.$.removeClass("right"),e.$.removeClass("left"),e.$.removeClass("top"),e.$.removeClass("bottom"),e.$.removeClass("animate"))}propertyChangedHandler(e,t,o){super.propertyChangedHandler(e,t,o);const n=this;if(n._preventPropertyChangedHandler)return void delete n._preventPropertyChangedHandler;const a=(Smart.EnableShadowDOM&&n.parentElement?n.getRootNode().host||n:n).closest("smart-tabs"),r=a&&a.shadowRoot?{composed:!0,bubbles:!0,cancelable:!0}:void 0;switch(e){case"closeButtonHidden":n.$.fireEvent("closeButtonVisibilityChange",{hidden:o},r);break;case"index":n.$.fireEvent("indexChange",{newIndex:o,oldIndex:t,tabItem:n},r);break;case"label":break;case"labelSize":n.$.fireEvent("labelSizeChange",{size:o},r);}}appendChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}t.firstElementChild.appendChild(e)}_setIndex(e){const t=this,o=t.context;t.context=t,t.index=e,t.context=o}}),Smart("smart-tab-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}template(){return""}propertyChangedHandler(e,t,o){super.propertyChangedHandler(e,t,o);const n=this;if(n._preventPropertyChangedHandler)return void delete n._preventPropertyChangedHandler;switch(e){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:o});}}}),Smart("smart-tabs",class extends Smart.BaseElement{static get properties(){return{addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},scrollMode:{value:"paging",allowedValues:["paging","continuous"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropDown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","scrollButtonFar.click":"_scrollButtonClickHandler","scrollButtonNear.click":"_scrollButtonClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.tabs.css"]}template(){return`<div id="container">
                    <div id="tabsHeaderSection" class="smart-header smart-tabs-header-section">
                        <div id="tabsHeaderItems" class="smart-tabs-header-items">
                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowNear" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="tabStrip" class="smart-tab-strip"></div>
                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowFar" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="dropDownButton" class="smart-drop-down-button">
                                <div id="dropDownButtonArrow" class="smart-drop-down-button-arrow smart-unselectable"></div>
                            </div>
                            <span id="tabSelectionBar" class="smart-tabs-selection-bar"></span>
                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>
                        </div>
                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>
                    </div>
                    <div id="tabContentSection" class="smart-tabs-content-section">
                       <content></content>
                    </div>
                    <div id="dropDownButtonDropDown" class="smart-drop-down-button-drop-down smart-hidden"></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}attached(){const e=this;super.attached();e.isCompleted&&e.isRendered&&e._applyTabOverflow()}ready(){super.ready();const e=this;e._flexWritingModeNoFullSupport=!0,e._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"}}render(){const e=this;e._createElement(),super.render()}appendChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"appendChild"})),t.isRendered?t.insert(t._tabs.length,{node:e}):t.whenRendered(()=>t.insert(t._tabs.length,{node:e}))}collapse(){const e=this;!e.collapsible||e.collapsed||(e.collapsed=!0)}ensureVisible(e){var t=Math.round;const o=this;if(null!==e&&"wrap"!==o.tabLayout&&"shrink"!==o.tabLayout&&"hidden"!==o.tabPosition){o._validateIndex(e,"ensureVisible"),e=Math.max(0,Math.min(e,o._tabs.length-1));const n=o._tabs[e].group,a=o.$.tabStrip,r=a.getBoundingClientRect(),i=null===n?o._tabLabelContainers[e]:o._groupLabels[o._groups.indexOf(n)],l=i.getBoundingClientRect();("top"===o.tabPosition||"bottom"===o.tabPosition)&&(r.left>l.left||r.right<l.right)?a.scrollLeft+=t(l.right-a.offsetWidth-r.left):("left"===o.tabPosition||"right"===o.tabPosition)&&(r.top>l.top||r.bottom<l.bottom)&&(a.scrollTop+=t(l.bottom-a.offsetHeight-r.top)),o._updateScrollButtonVisibility(),o.resize&&o._getTabCoordinates()}}expand(){const e=this;e.collapsible&&e.collapsed&&(e.collapsed=!1)}getOffsetFromEdgeOfElement(e){const t=this;t._validateIndex(e,"getOffsetFromEdgeOfElement"),e=Math.max(0,Math.min(e,t._tabs.length-1));const o=t._tabs[e],n=t.tabPosition;return"hidden"===n?o.getBoundingClientRect().top-t.getBoundingClientRect().top:Math.abs(o.getBoundingClientRect()[n]-t.getBoundingClientRect()[n])}insert(e,t){const o=this;let n,a;if(o._validateIndex(e,"insert"),(void 0===t||void 0===t.label&&void 0===t.content&&void 0===t.node)&&o.error(o.localize("detailsObjectRequired")),void 0===t.node)n=t.group,a=document.createElement("smart-tab-item"),a.label=void 0===t.label?"":t.label,a.labelSize=void 0===t.labelSize?null:t.labelSize,a.content=t.content;else if(a=t.node,void 0!==a.index&&null!==a.index){const e=a.context;a.context=a,a.index=null,a.context=e}a.$.addClass("smart-visibility-hidden"),a.group=null;const r=o._addTabLabelContainer(a),i=r.tabLabelContainer,l=r.dropDownLabelContainer;i.tab=a,a.tabLabelContainer=i;const s={index:e,tab:a,tabLabelContainer:i,dropDownLabelContainer:l};if(0===o._groups.length&&void 0===n)o._insertNoGrouping(s);else if(void 0!==n&&null!==n){s.group=n;const e=o.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+n+"\"]");null===e?o._insertIntoNewGroup(s):(s.smartTabItemsGroup=e,o._insertIntoExistingGroup(s))}else o._insertNearAGroup(s);o._getReorderItems(),null===o.selectedIndex&&!o.allowToggle&&o._tabs.length&&o._select(0,!0),null!==a.group&&null!==a.labelSize&&"shrink"!==o.tabLayout&&i.style.removeProperty([o._orientationSettings.dimension]),o._applyTabOverflow()}insertBefore(e,t){const o=this;if(!o.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(o,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem&&(t===void 0||null===t||t instanceof Smart.TabItem)||o.error(o.localize("tabItemRequired",{method:"insertBefore"}));let n;o.contains(e)&&(e.selected&&(n=!0),o.remove(e.index)),t!==void 0&&null!==t?(!o.contains(t)&&o.error(o.localize("referenceNodeNotChild",{argument:"referenceNode"})),o.insert(t.index,{node:e})):o.insert(o._tabs.length,{node:e}),n&&o._select(e.index,!1)}refreshTabHeader(){const e=this;"scroll"===e.tabLayout&&e._checkOverflowScroll(),e._positionTabSelectionBar(e._tabLabelContainers?e._tabLabelContainers[e.selectedIndex]:void 0,!0)}remove(e){const t=this,o=t._tabs.length;if(0!==o){t._validateIndex(e,"remove"),e=Math.max(0,Math.min(e,o-1));const n=t._tabs[e],a=t._tabLabelContainers[e];if(a._lazyRemove?a.classList.add("smart-hidden"):a.parentElement.removeChild(a),n.parentElement.removeChild(n),null!==n.group){const e=t.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+n.group+"\"]");if(0===e.childElementCount){const o=t._groups.indexOf(n.group);t.$.tabStrip.removeChild(t._groupLabels[o]),t._groups.splice(o,1),t.$.container.removeChild(t._groupLabels[0].dropDown),t._groupLabels.splice(o,1),t.$.tabContentSection.removeChild(e)}}1<o?e<t.selectedIndex?t.selectedIndex--:e===t.selectedIndex&&(e===o-1?t._select(e-1,!1):(t._select(e+1,!1),t.selectedIndex--)):(t.selectedIndex=null,t.$.tabContentSection.innerHTML=""),t._tabLabelContainers.splice(e,1),t.$.dropDownButtonDropDown.removeChild(t.$.dropDownButtonDropDown.children[e]),t._tabs.splice(e,1),t._focusedItem===n&&(t._focusedItem=t._tabs[t._focusedItem.index]),t._updateTabIndexes(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex),t.$.hiddenInput.value=t.selectedIndex}}removeChild(e){const t=this;if(!t.isCompleted||e instanceof HTMLElement&&e.classList.contains("smart-resize-trigger-container")){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}e instanceof Smart.TabItem||t.error(t.localize("tabItemRequired",{method:"removeChild"})),t.contains(e)||t.error(t.localize("referenceNodeNotChild",{argument:"node"})),t.remove(e.index)}select(e){const t=this;0===t._tabs.length||(t._validateIndex(e,"select"),e=Math.max(0,Math.min(e,t._tabs.length-1)),t.ensureVisible(e),t._select(e,!0))}_setFocusable(){const e=this;return e.disabled||e.unfocusable?void e.removeAttribute("tabindex"):void((null===e.getAttribute("tabindex")||0>e.getAttribute("tabindex"))&&e.setAttribute("tabindex",0))}update(e,t,o){const n=this;if(0!==n._tabs.length){n._validateIndex(e,"update"),e=Math.max(0,Math.min(e,n._tabs.length-1));const a=n._tabs[e];if(void 0!==t&&a.label!==t){const o=n._tabLabelContainers[e].firstElementChild.children[0],r=n.$.dropDownButtonDropDown.children[e];a.label=t,o.innerHTML="",r.innerHTML="",n._setLabel(t,o,r),n._applyTabOverflow()}void 0!==o&&(a.content=o)}}_createElement(){const e=this;e.disabled&&(e.$.scrollButtonNear.disabled=!0,e.$.scrollButtonFar.disabled=!0),e._handlePosition(e.tabPosition),e._handleScrollButtonsPosition(e.scrollButtonsPosition,"both"),null!==e.dataSource&&e._processDataSource(),e._setFocusable(),e.collapsed&&!e.collapsible&&(e.collapsed=!1),e.collapsible&&e.allowToggle&&(e.allowToggle=!1),e._processHTML(),null===e.selectedIndex&&e.$.tabContentSection.setAttribute("show-placeholder",""),setTimeout(()=>e.refreshTabHeader(),300),e.$.hiddenInput.value=e.selectedIndex,e.enableShadowDOM&&HTMLElement.prototype.appendChild.apply(e,[e.$.hiddenInput])}propertyChangedHandler(e,t,o){super.propertyChangedHandler(e,t,o);const n=this;switch(e){case"addNewTab":o?n._insertAddNewTab():(n.$.tabStrip.removeChild(n._addNewTab),delete n._addNewTab),n._applyTabOverflow();break;case"allowToggle":o&&n.collapsible?(n.collapsed&&n._toggleCollapsedState(),n.collapsible=!1):!o&&null===n.selectedIndex&&(n.ensureVisible(n.selectedIndex=0),n._select(n.selectedIndex,!0,null));break;case"closeButtonMode":if("selected"===o){for(let e=0;e<n._tabs.length;e++)n._disableCloseButton(e);n._enableCloseButton(n.selectedIndex)}else{n._disableCloseButton(n.selectedIndex);const e=n._tabLabelContainers;for(let t=0;t<e.length;t++){const o=e[t];o.closeButtonEnabled=!0!==n._tabs[t].closeButtonHidden,n._showCloseButton(o)}}n._applyTabOverflow();break;case"closeButtons":{const e=n._tabLabelContainers,t=o?n._showCloseButton:n._hideCloseButton;for(let o=0;o<e.length;o++){const n=e[o];t(n)}n._applyTabOverflow();break}case"collapsed":if(!n.collapsible&&o)return void(n.collapsed=!1);break;case"collapsible":!o&&n.collapsed&&(n.collapsed=!1),n.allowToggle=!1,n.selectedIndex===void 0&&n.select(n._focusedItem.index);break;case"dataSource":n.selectedIndex=null;for(let e=0;e<n._groupLabels.length;e++)n.$.container.removeChild(n._groupLabels[e].dropDown);n.$.tabStrip.innerHTML="",n._processDataSource(),n._processHTML();break;case"disabled":n._setFocusable(),n.$.scrollButtonNear.disabled=o,n.$.scrollButtonFar.disabled=o,o||n._updateScrollButtonVisibility(),n._closeDropDownButtonDropDown();break;case"messages":case"scrollMode":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==n.tabLayout)return;n.$.tabStrip.scrollLeft=0,n.$.tabStrip.scrollTop=0,"hidden"===o?(n.$tabsHeaderSection.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")):n._checkOverflowScroll(),n._getTabCoordinates();break;case"tabPosition":{if(n.$.tabSelectionBar.style.transition="none",n._tabPositionChanging=!0,n._closeGroupDropDown(),n._handlePosition(o,t),"shrink"!==n.tabLayout&&n._applyLabelSizes("tabPosition"),n._applyTabOverflow(),"hidden"!==o){const e=n.getElementsByClassName("smart-tab-group-arrow");for(let t=0;t<e.length;t++)e[t].innerHTML=n._arrowCodes[n.tabPosition]}delete n._tabPositionChanging,requestAnimationFrame(function(){n.$.tabSelectionBar.style.transition=null});break}case"resize":o&&n._getTabCoordinates();break;case"scrollButtonsPosition":n._handleScrollButtonsPosition(o,t);break;case"selectedIndex":{if(isNaN(o)&&(n.selectedIndex=o=t),!n.allowToggle&&null===o)return void(n.selectedIndex=t);let e=o;null!==o&&(e=Math.max(0,Math.min(o,n._tabs.length-1)),n.ensureVisible(e)),n._select(e,!0,t);break}case"tabLayout":"scroll"===t&&(n.$tabsHeaderSection.removeClass("scroll-buttons-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")),"shrink"===o?n._applyLabelSizes("shrink",!0):"shrink"===t&&n._applyLabelSizes("shrink",!1),n._applyTabOverflow(),"scroll"===o&&n.disabled&&(n.$.scrollButtonNear.disabled=!0,n.$.scrollButtonFar.disabled=!0),n.ensureVisible(n.selectedIndex);break;case"tabTextOrientation":n._applyTabOverflow(),n.ensureVisible(n.selectedIndex);break;case"unfocusable":n._setFocusable();}}_addGroupContainer(e,t){const o=this,n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");return n.className="smart-tab-group-container smart-unselectable",n.$=Smart.Utilities.Extend(n),a.className="smart-tab-label-text-wrapper",null!==t&&"shrink"!==o.tabLayout&&(n.style[o._orientationSettings.dimension]=parseInt(t,10)+"px"),r.className="smart-tab-label-text-container",r.innerHTML=e,i.className="smart-tab-group-arrow",i.innerHTML=o._arrowCodes[o.tabPosition],l.className="smart-tab-group-drop-down smart-hidden",l.$=Smart.Utilities.Extend(l),a.appendChild(r),a.appendChild(i),n.appendChild(a),o.$.container.appendChild(l),n.group=e,n.dropDown=l,l.groupContainer=n,{label:n,dropDown:l}}_addGroupElements(e){const t=this,o=e.groups,n=e.groupLabels,a=e.group,r=o.indexOf(a),i=e.tabLabelContainer;let l;if(-1!==r)l=n[r],l.dropDown.appendChild(i);else{o.push(a);const r=t._addGroupContainer(a,e.smartTabItemsGroup.labelSize),s=r.dropDown;l=r.label,s.appendChild(i),s.groupContainer=r.label,e.documentFragment.appendChild(l),n.push(l)}t.selectedIndex===e.i&&(t._selectedGroup=l,l.$.addClass("smart-tab-group-selected"))}_addNewTabHandler(e,t,o){const n=this;n._swiping||(o?(e.removeAttribute("hover"),n.insert(n._tabs.length,{label:"New Tab",content:""}),n._select(n._tabs.length-1,!0)):!n._reordering&&!n._swiping&&("mouseover"===t?e.setAttribute("hover",""):"mouseout"==t&&e.removeAttribute("hover")))}_addTabLabelContainer(e,t){const o=this,n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div");let l;return n.className="smart-tab-label-container smart-unselectable",a.className="smart-tab-label-text-wrapper",r.className="smart-tab-label-text-container",i.className="smart-tab-close-button",i.innerHTML="&#xe81f",void 0===t?(o.closeButtons?"default"===o.closeButtonMode&&e.closeButtonHidden||"selected"===o.closeButtonMode&&!e.selected?(i.classList.add("smart-hidden"),n.closeButtonEnabled=!1):(r.classList.add("smart-close-button-enabled"),n.closeButtonEnabled=!0):(i.classList.add("smart-hidden"),n.closeButtonEnabled=!0),l=document.createElement("div"),l.className="smart-tab-label-container smart-unselectable",null===e.group&&null!==e.labelSize&&"shrink"!==o.tabLayout&&(n.style[o._orientationSettings.dimension]=parseInt(e.labelSize,10)+"px")):(i.classList.add("smart-hidden"),n.closeButtonEnabled=!1),o._setLabel(e?e.label:"+",r,l),r.$=Smart.Utilities.Extend(r),i.$=Smart.Utilities.Extend(i),a.appendChild(r),a.appendChild(i),n.appendChild(a),n.$=Smart.Utilities.Extend(n),{tabLabelContainer:n,dropDownLabelContainer:l}}_animateSelection(e,t,o){const n=this;let a="right",r="left";if(n._animatedTab=e,n._animatedOldTab=t,n._animatedTab&&n._animatedOldTab){("left"===n.tabPosition||"right"===n.tabPosition)&&(a="top",r="bottom");for(let e=0;e<n._tabs.length;e++)n._tabs[e].$.removeClass(a),n._tabs[e].$.removeClass(r),n._tabs[e].$.removeClass("animate");return e===t?(e.$.hasClass("smart-visibility-hidden")?e.$.removeClass("smart-visibility-hidden"):e.$.addClass("smart-visibility-hidden"),void(n._animatedOldTab.classToRemove=a)):void(o?(e.$.addClass(a),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(r),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(a),n._animatedOldTab.classToRemove=r):(e.$.addClass(r),e.$.removeClass("smart-visibility-hidden"),t.$.addClass("animate"),e.$.addClass("animate"),t.$.addClass(a),t.$.addClass("smart-visibility-hidden"),e.$.removeClass(r),n._animatedOldTab.classToRemove=a))}}_applyConditionalTabOverflow(){const e=this,t="left"===e.tabPosition||"right"===e.tabPosition,o=e.$.tabStrip;if("scroll"===e.tabLayout)return void e._checkOverflowScroll();if(e._flexWritingModeNoFullSupport&&"shrink"===e.tabLayout&&t&&o.scrollHeight>o.offsetHeight){const t=o.children,n=100/t.length+"%";o.$.addClass("shrink-tabs-vertical");for(let e=0;e<t.length;e++)t[e].style.height=n,t[e].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");e._inlineStyleTabStripChildren=!0}}_applyLabelSizes(e,t){const o=this,n=o._orientationSettings.dimension,a="width"===n?"height":"width";for(let r=0;r<o._reorderItems.length;r++){const i=o._reorderItems[r],l=o._getCorrespondingCustomElement(i);null!==l.labelSize&&("tabPosition"===e&&i.style.removeProperty(a),t?i.style.removeProperty(n):i.style[n]=parseInt(l.labelSize,10)+"px")}}_applyTabOverflow(){var e=Math.max;const t=this;if(t._tabs){if(t._removeInlineStyle(),0===t._tabs.length)return void t._toggleNavigationElementsVisibility();const o=t.tabLayout,n=t.tabPosition,a="left"===n||"right"===n,r=t.$.tabStrip;switch(t._closeDropDownButtonDropDown(),o){case"scroll":case"dropDown":t._flexWritingModeNoFullSupport&&"vertical"===t.tabTextOrientation&&a&&t._fixTabStripNotChrome(r);break;case"wrap":if("vertical"!==t.tabTextOrientation)a&&r.scrollWidth>r.offsetWidth&&(r.style.width=r.scrollWidth+"px","right"===n&&(r.style.flexWrap="wrap-reverse"),t._inlineStyleTabStrip=!0);else if(!t._flexWritingModeNoFullSupport)a||r.scrollHeight>r.offsetHeight&&(r.style.height=r.scrollHeight+"px",t._inlineStyleTabStrip=!0);else if(a)t._fixTabStripNotChrome(r);else{const o=r.children;let n=o[0].offsetHeight;for(let t=1;t<o.length;t++)n=e(n,o[t].offsetHeight);for(let e=1;e<o.length;e++)o[e].style.height=n+"px";t._inlineStyleTabStripChildren=!0}break;case"shrink":if(!a)r.scrollWidth>r.offsetWidth&&r.$.addClass("shrink-tabs");else if(t._flexWritingModeNoFullSupport&&"vertical"===t.tabTextOrientation){const o=r.children,n=window.getComputedStyle(o[0].firstElementChild),a=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10);let l=0;for(let t=0;t<o.length;t++)l=e(l,o[t].firstElementChild.firstElementChild.offsetWidth);r.style.width=a+l+"px",t._inlineStyleTabStrip=!0;break}}t._applyConditionalTabOverflow(),t._getTabCoordinates(),t._fixTabStripFlex(o),t._toggleNavigationElementsVisibility(),t._positionTabSelectionBar(t._tabLabelContainers[t.selectedIndex],!0)}}_checkOverflowScroll(){var e=Math.round;const t=this,o=t.$tabsHeaderSection,n=t.$.tabStrip,a=t.overflow;if("hidden"===a)return;let r,i,l;"left"===t.tabPosition||"right"===t.tabPosition?(r=e(n.scrollHeight)>e(n.offsetHeight),i=0<e(n.scrollTop),l=e(n.offsetHeight+n.scrollTop)<e(n.scrollHeight)):(r=e(n.scrollWidth)>e(n.offsetWidth),i=0<e(n.scrollLeft),l=e(n.offsetWidth+n.scrollLeft)<e(n.scrollWidth)),"scroll"===a&&(o.addClass("scroll-buttons-shown"),t.$scrollButtonNear.removeClass("smart-hidden"),t.$scrollButtonFar.removeClass("smart-hidden")),r?"auto"===a?(!o.hasClass("scroll-buttons-shown")&&o.addClass("scroll-buttons-shown"),i?t.$scrollButtonNear.removeClass("smart-hidden"):t.$scrollButtonNear.addClass("smart-hidden"),l?t.$scrollButtonFar.removeClass("smart-hidden"):t.$scrollButtonFar.addClass("smart-hidden"),!1===(i&&l)?o.addClass("one-button-shown"):o.removeClass("one-button-shown"),!t.disabled&&(t.$.scrollButtonNear.disabled=!1,t.$.scrollButtonFar.disabled=!1)):(o.removeClass("one-button-shown"),t.disabled?(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0):(t.$.scrollButtonNear.disabled=!i,t.$.scrollButtonFar.disabled=!l)):!r&&"auto"===a&&o.hasClass("scroll-buttons-shown")?(o.removeClass("scroll-buttons-shown"),o.removeClass("one-button-shown"),t.$scrollButtonNear.addClass("smart-hidden"),t.$scrollButtonFar.addClass("smart-hidden")):!r&&"scroll"===a&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0)}_closeButtonVisibilityChangeHandler(e){const t=this,o=(Smart.EnableShadowDOM?e.composedPath()[0]:e.target).index;return"selected"===t.closeButtonMode?void(t._tabLabelContainers[o].closeButtonEnabled=e.detail.hidden):void(e.detail.hidden?t._disableCloseButton(o):t._enableCloseButton(o))}_closeDropDownButtonDropDown(){const e=this;e._dropDownButtonDropDownOpened&&(e.$dropDownButtonDropDown.addClass("smart-hidden"),e._dropDownButtonDropDownOpened=!1)}_closeGroupDropDown(){const e=this;e._openDropDown&&(e._openDropDown.rippleInProgress?setTimeout(function(){e._openDropDown&&(e._openDropDown.$.addClass("smart-hidden"),delete e._openDropDown.rippleInProgress,e._openDropDown=void 0)},450):(e._openDropDown.$.addClass("smart-hidden"),e._openDropDown=void 0))}_containerHandler(e){const t=this,o=e.type;if(!(t.disabled||t.readonly||t._resizing&&"mouseout"!==o||("down"===o||"up"===o)&&1!==e.which&&!Smart.Utilities.Core.isMobile)){const o=t.shadowRoot||t.isInShadowDOM?(e.originalEvent||e).composedPath()[0]:(e.originalEvent||e).target;return t.$.tabContentSection.contains(o)?void 0:t.$.dropDownButton.contains(o)?void t._dropDownButtonHandler(o,e):t.$.dropDownButtonDropDown.contains(o)?void t._dropDownButtonHandler(o,e,!0):void t._tabStripHandler(o,e)}}_disableCloseButton(e){const t=this,o=t._tabLabelContainers[e];o.closeButtonEnabled=!1,t.closeButtons&&t._hideCloseButton(o)}_documentMoveHandler(e){const t=this,o=t._orientationSettings;if(t._reordering){t._reorderStartThrown||(t._fireDragEvent(e,"dragStart"),t._reorderStartThrown=!0);const n=e[o.coordinate],a="wrap"===t.tabLayout?function(t){return e.pageX>=t.fromX&&e.pageX<=t.toX&&e.pageY>=t.fromY&&e.pageY<=t.toY}:function(e){return n>=e[o.from]&&n<=e[o.to]};let r=!1;for(let e=0;e<t._tabCoordinates.length;e++){const o=t._tabCoordinates[e];if(a(o)){r=e;break}}!0!==t._preventReorder&&!1!==r&&r!==t._draggedIndex&&(t._reorderTabs(t._draggedIndex,r),t._closeGroupDropDown(),t._draggedIndex=r,t._getReorderItems(),t._getTabCoordinates());const i=t._tabCoordinates[t._draggedIndex];t._preventReorder=!!("wrap"!==t.tabLayout&&(n<i[o.from]||n>i[o.to])||"wrap"===t.tabLayout&&(null!==e.originalEvent.target.closest(".smart-tab-label-container")||null!==e.originalEvent.target.closest(".smart-tab-group-container"))&&!(e.pageX>=i.fromX&&e.pageX<=i.toX&&e.pageY>=i.fromY&&e.pageY<=i.toY))}else t._resizing&&(t.$.resizeToken.style[o.edge]=e[o.coordinate]-t._tabsHeaderSectionCoordinate+"px",t.$resizeToken.removeClass("smart-hidden"))}_documentUpHandler(e){const t=this;let o=t.shadowRoot||t.isInShadowDOM?e.originalEvent.composedPath()[0]:e.originalEvent.target;t.$.container.contains(o)&&t._containerHandler(e),t._endSwiping(e,Date.now()),t._openDropDown&&!t._openDropDown.rippleInProgress&&(o===document||o.closest(".smart-tab-group-container")!==t._openDropDown.groupContainer)&&t._closeGroupDropDown(),t.$.dropDownButton.contains(o)||t._closeDropDownButtonDropDown(),t._endReordering(e,o),t._resize(e),t._tabToResize!==void 0&&(t._tabToResize=void 0)}_dropDownButtonHandler(e,t,o){const n=this,a=t.type;if(o)return void(e.classList.contains("smart-tab-label-container")&&("down"===a?n._downTarget=e:"mouseout"===a?e.removeAttribute("hover"):"mouseover"===a?e.setAttribute("hover",""):"up"===a?e===n._downTarget&&(n.select(Array.from(n.$.dropDownButtonDropDown.children).indexOf(e)),n._closeDropDownButtonDropDown()):void 0));if("down"===a)n._downTarget=n.$.dropDownButton;else if("up"===a&&n._downTarget===n.$.dropDownButton)if(!n._dropDownButtonDropDownOpened){const e=n.tabPosition;let t,o;"top"===e?(t=n.$.dropDownButton.offsetLeft,o=n.$.tabsHeaderSection.offsetTop+n.$.dropDownButton.offsetHeight):"bottom"===e?(t=n.$.dropDownButton.offsetLeft,o=n.$.tabsHeaderSection.offsetTop):"left"===e?(t=n.$.dropDownButton.offsetWidth,o=n.$.dropDownButton.offsetTop):"right"===e?(t=n.$.tabsHeaderSection.offsetLeft,o=n.$.dropDownButton.offsetTop):void 0,n.$.dropDownButtonDropDown.style.left=t+"px",n.$.dropDownButtonDropDown.style.top=o+"px",n.$dropDownButtonDropDown.removeClass("smart-hidden"),n._dropDownButtonDropDownOpened=!0}else n._closeDropDownButtonDropDown()}_enableCloseButton(e){const t=this,o=t._tabLabelContainers[e];o.closeButtonEnabled=!0,t.closeButtons&&t._showCloseButton(o)}_endReordering(e,t){const o=this;o._reordering&&(o._draggedHoveredTab&&(!o._draggedHoveredTab.contains(t)&&o._draggedHoveredTab.removeAttribute("hover"),delete o._draggedHoveredTab),o._reorderedIndex=void 0,o._reordering=!1,o._reorderStartThrown=!1,o.removeAttribute("dragged"),e&&o._fireDragEvent(e,"dragEnd"))}_endSwiping(e,t){var o=Math.abs;const n=this;if(!n._dragStartDetails)return;const a=n._orientationSettings,r=n.$.tabStrip,i=o(n._dragStartDetails.startTime-t),l=200/i,s=(n._dragStartDetails[a.startCoordinate]-e[a.coordinate])*l;let d=o(s);const b=function(){return!(0<s&&r[a.scrollDirection]===r[a.scrollSize]-r[a.size]||0>s&&0===r[a.scrollDirection])};let p=.03*o(s)*l;const c=function(){if(5<p){const e=(d-p)/o(s);.1>e?p/=1.25:.15>e?p/=1.2:.2>e?p/=1.15:.25>e?p/=1.1:.3>e&&(p/=1.05)}p=Math.round(p);const e=r[a.scrollDirection];r[a.scrollDirection]=0<s?Math.min(e+p,r[a.scrollSize]-r[a.size]):Math.max(e-p,0),d-=p,n._updateScrollButtonVisibility(!0);const t=b();0<d&&t?n._scrollingAnimationFrame=window.requestAnimationFrame(c):n._wheelInProgress=!1};n._scrollingAnimationFrame&&cancelAnimationFrame(n._scrollingAnimationFrame),500>i&&b()?n._scrollingAnimationFrame=window.requestAnimationFrame(c):n._wheelInProgress=!1,delete n._dragStartDetails,n._swiping&&delete n._swiping}_fireDragEvent(e,t){const o=this,n=o.$.tabStrip.children[o._draggedIndex],a=n.tab;let r,i,l;a?(r=a.selected,i=a.index,l=a.label):l=n.group,o.$.fireEvent(t,{position:{left:e.pageX,top:e.pageY},target:n,selected:r,index:i,label:l})}_fixTabStripNotChrome(e){function t(){const t=[].slice.call(e.children).filter(e=>!e._lazyRemove);let n=t[0].getBoundingClientRect(),a=n.left,r=a+t[0].offsetWidth;for(let e=1;e<t.length;e++)n=t[e].getBoundingClientRect(),a=Math.min(a,n.left),r=Math.max(r,n.left+t[e].offsetWidth);e.style.width=r-a+"px",o._inlineStyleTabStrip=!0}const o=this;0===o._tabs.length||(t(),Smart.Utilities.Core.Browser.Safari&&setTimeout(function(){e.parentElement.classList.add("smart-hidden"),setTimeout(function(){e.parentElement.classList.remove("smart-hidden"),t()},10)},10),o.$.fireEvent("tabStripResize"))}_fixTabStripFlex(e){const t=this;t._flexWritingModeNoFullSupport||"vertical"!==t.tabTextOrientation||"left"!==t.tabPosition&&"right"!==t.tabPosition||setTimeout(function(){t.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){t.$tabsHeaderSection.removeClass("smart-hidden"),t._getTabCoordinates(),"scroll"===e&&t._checkOverflowScroll()},10)},10)}_getCorrespondingCustomElement(e){return e.$.hasClass("smart-tab-label-container")?e.tab:this.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+e.group+"\"]")}_getReorderItems(){const e=this;let t;0===e._groups.length?t=e._tabLabelContainers:(t=Array.from(e.$.tabStrip.children),e.addNewTab&&t.pop()),e._reorderItems=t}_getTabCoordinates(){const e=this;if((e.reorder||e.resize)&&"hidden"!==e.tabPosition){const t=[],o=window.scrollX||window.pageXOffset,n=window.scrollY||window.pageYOffset;for(let a=0;a<e._reorderItems.length;a++){const r=e._reorderItems[a],i=r.getBoundingClientRect(),l=window.getComputedStyle(r),s=parseFloat(l.marginLeft),d=parseFloat(l.marginRight),b=parseFloat(l.marginTop),p=parseFloat(l.marginBottom);t.push({fromX:i.left-s+o,toX:i.right+d+o,fromY:i.top-b+n,toY:i.bottom+p+n})}e._tabCoordinates=t}}_getTabs(){const e=this;let t=e.shadowRoot?e.shadowRoot.querySelectorAll("smart-tab-item"):e.getElementsByTagName("smart-tab-item");null!==e.selectedIndex&&(0===t.length?e.selectedIndex=null:e.selectedIndex=Math.max(0,Math.min(e.selectedIndex,t.length-1))),e._tabs=Array.from(t),e.$.hiddenInput.value=e.selectedIndex}_groupContainerHandler(e,t){const o=this,n=e.dropDown;if("down"===t)return o._downTarget=e,void(o.reorder&&1<o._reorderItems.length&&(o._getTabCoordinates(),o._reordering=!0,o.setAttribute("dragged",""),o._draggedIndex=Array.from(o.$.tabStrip.children).indexOf(e)));o._reordering||o._swiping||(n===o._openDropDown||"mouseover"!==t||e.classList.contains("smart-tab-group-selected")?"mouseout"===t&&e.removeAttribute("hover"):e.setAttribute("hover",""));"up"!==t||o._downTarget!==e||void 0!==o._reorderedIndex||o._swiping||(n===o._openDropDown?(o._closeGroupDropDown(),!e.classList.contains("smart-tab-group-selected")&&e.setAttribute("hover","")):o._openGroupDropDown(e))}_handlePosition(e,t){const o=this;return-1!==[void 0,"top","left","hidden"].indexOf(t)&&("bottom"===e||"right"===e)?o.$.container.insertBefore(o.$.tabContentSection,o.$.tabsHeaderSection):("bottom"===t||"right"===t)&&-1!==["top","left","hidden"].indexOf(e)&&o.$.container.insertBefore(o.$.tabsHeaderSection,o.$.tabContentSection),"hidden"===e?(o._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},o.removeAttribute("horizontal"),void o.removeAttribute("vertical")):void("top"===e||"bottom"===e?(o._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},o.removeAttribute("vertical"),o.setAttribute("horizontal",""),o.$arrowNear.removeClass("smart-arrow-up"),o.$arrowNear.addClass("smart-arrow-left"),o.$arrowFar.removeClass("smart-arrow-down"),o.$arrowFar.addClass("smart-arrow-right")):(o._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},o.removeAttribute("horizontal"),o.setAttribute("vertical",""),o.$arrowNear.removeClass("smart-arrow-left"),o.$arrowNear.addClass("smart-arrow-up"),o.$arrowFar.removeClass("smart-arrow-right"),o.$arrowFar.addClass("smart-arrow-down")),o.$.dropDownButtonArrow.innerHTML=o._arrowCodes[o.tabPosition])}_handleScrollButtonsPosition(e,t){const o=this,n=o.$.tabsHeaderItems;e===t||("both"===e?"near"===t?n.insertBefore(o.$.scrollButtonFar,o.$.dropDownButton):n.insertBefore(o.$.scrollButtonNear,o.$.tabStrip):"near"===e?("far"===t&&n.insertBefore(o.$.scrollButtonNear,o.$.tabStrip),n.insertBefore(o.$.scrollButtonFar,o.$.tabStrip)):("near"===t&&n.insertBefore(o.$.scrollButtonFar,o.$.dropDownButton),n.insertBefore(o.$.scrollButtonNear,o.$.scrollButtonFar)))}_hideCloseButton(e){e.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.addClass("smart-hidden")}_indexChangeHandler(e){const t=this,o=e.detail.oldIndex,n=Math.max(0,Math.min(e.detail.newIndex,t._tabs.length-1));if(o!==n){if(0===t._groups.length)t._reorderTabs(o,n);else{const a=e.detail.tabItem;a._setIndex(o),t.remove(o),t.insert(n,{node:a}),t.selectedIndex===o&&t._select(n,!1)}t._reorderedIndex=void 0}}_insertAddNewTab(){const e=this,t=e._addTabLabelContainer(void 0,!0).tabLabelContainer;t.$.addClass("smart-add-new-tab"),e.$.tabStrip.appendChild(t),e._addNewTab=t}_insertIntoExistingGroup(e){const t=this,o=e.smartTabItemsGroup,n=e.tab,a=e.tabLabelContainer,r=e.group,i=t._groupLabels[t._groups.indexOf(r)],l=i.dropDown;let s=e.index;s=Math.max(0,Math.min(s,o.childElementCount)),l.insertBefore(a,l.children[s]);const d=o.children[s];let b;b=d?d.index:o.children[s-1].index+1,o.insertBefore(n,d),t._tabLabelContainers.splice(b,0,a),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[b]||null),t._tabs.splice(b,0,n),s=b,n.group=r,t._updateIndexes(s)}_insertIntoNewGroup(e){const t=this,o=e.tab,n=e.tabLabelContainer,a=e.group,r=t._addGroupContainer(a),i=r.label,l=r.dropDown;l.appendChild(n),t._groups.push(a);let s=Math.max(0,Math.min(e.index,t.$.tabStrip.childElementCount)),d=s;t._addNewTab&&d===t.$.tabStrip.childElementCount&&d--,t.$.tabStrip.insertBefore(i,t.$.tabStrip.children[d]||null),t._groupLabels.push(i);const b=document.createElement("smart-tab-items-group");b.appendChild(o),t.$.tabContentSection.insertBefore(b,t.$.tabContentSection.children[s]),b.label=a;const p=b.previousElementSibling;let c=0;p&&(p instanceof Smart.TabItem?c=p.index+1:p&&(c=p.lastElementChild.index+1)),t._tabLabelContainers.splice(c,0,n),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[c]||null),t._tabs.splice(c,0,o),s=c,o.group=a,t._updateIndexes(s)}_insertNearAGroup(e){const t=this,o=e.tab,n=e.tabLabelContainer;let a=e.index;a=Math.max(0,Math.min(a,t._tabs.length));const r=t._tabs[a-1],i=t._tabs[a],l=i?i.group:void 0;r&&null!==r.group&&i&&null!==l?(i.tabLabelContainer.parentElement.insertBefore(n,i.tabLabelContainer),i.parentElement.insertBefore(o,i),o.group=l):i?null===l?(t.$.tabStrip.insertBefore(n,i.tabLabelContainer),t.$.tabContentSection.insertBefore(o,i)):(t.$.tabStrip.insertBefore(n,t._groupLabels[t._groups.indexOf(l)]),t.$.tabContentSection.insertBefore(o,t.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+l+"\"]"))):(t.$.tabStrip.insertBefore(n,t._addNewTab||null),t.$.tabContentSection.appendChild(o)),t._tabLabelContainers.splice(a,0,n),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[a]||null),t._tabs.splice(a,0,o),t._updateIndexes(a)}_insertNoGrouping(e){const t=this,o=Math.max(0,Math.min(e.index,t._tabs.length)),n=e.tab,a=e.tabLabelContainer;t.$.tabStrip.insertBefore(a,t._tabLabelContainers[o]||t._addNewTab||null),t.$.tabContentSection.insertBefore(n,t._tabs[o]||null),t._tabLabelContainers.splice(o,0,a),t.$.dropDownButtonDropDown.insertBefore(e.dropDownLabelContainer,t.$.dropDownButtonDropDown.children[o]||null),t._tabs.splice(o,0,n),t._updateIndexes(o)}_keydownHandler(e){const t=this,o=e.key,n=t.isInShadowDOM?t.getRootNode().activeElement:document.activeElement;if(n!==t||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home","Enter"," ","Escape"].indexOf(o)||t.disabled||t.readonly||"none"===t.selectionMode||!t.allowToggle&&null===t.selectedIndex||t._reordering||t._swiping)return;e.preventDefault();const a=t._tabs.length-1;let r,i,l=0;switch(o){case"ArrowLeft":case"ArrowUp":if(t.collapsible&&e.ctrlKey)return void("ArrowLeft"===o?"right"===t.tabPosition?t.expand():"left"===t.tabPosition&&t.collapse():"ArrowUp"===o&&("bottom"===t.tabPosition?t.expand():"top"===t.tabPosition&&t.collapse()));if(l=-1,0===t.selectedIndex){i=!0;break}r=t.selectedIndex+l;break;case"ArrowRight":case"ArrowDown":if(t.collapsible&&e.ctrlKey)return void("ArrowRight"===o?"right"===t.tabPosition?t.collapse():"left"===t.tabPosition&&t.expand():"ArrowDown"===o&&("bottom"===t.tabPosition?t.collapse():"top"===t.tabPosition&&t.expand()));if(l=1,t.selectedIndex===a){i=!0;break}r=t.selectedIndex+l;break;case"End":if(t.selectedIndex===a){i=!0;break}r=a;break;case"Home":if(0===t.selectedIndex){i=!0;break}r=0;break;case"Enter":case" ":if(!t.allowToggle)return;if(t._focusedItem){t.select(t._focusedItem.index);const e=t._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");e&&t._openGroupDropDown(e.groupContainer)}return;case"Escape":return void(t._openDropDown&&t._closeGroupDropDown());}if(t.allowToggle&&0<t._tabs.length){t._focusedItem?t._focusedItem.tabLabelContainer.removeAttribute("focus"):t._focusedItem=t._focusedItem||t._tabs[t.selectedIndex]||t._tabs[0],t._focusedItem=t._tabs[Math.min(Math.max(0,t._focusedItem.index+l),a)],t._focusedItem.tabLabelContainer.setAttribute("focus",""),t.ensureVisible(t._focusedItem.index);const e=t._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");return void(e&&e.groupContainer?(t._openDropDown&&t._openDropDown!==e.dropDown&&t._closeGroupDropDown(),t._openGroupDropDown(e.groupContainer)):t._openDropDown&&t._closeGroupDropDown())}i||t.select(r)}_labelContainerHandler(e,t,o){const n=this,a="up"===o&&n._downTarget===e;if("down"===o&&(n._downTarget=e,"click"===n.selectionMode&&e!==n._addNewTab))if(Smart.Utilities.Core.isMobile&&null===e.tab.group){const o=n.$.tabStrip[n._orientationSettings.scrollDirection];setTimeout(function(){if(o===n.$.tabStrip[n._orientationSettings.scrollDirection]){const o=n._ripple(t,e);o&&n._openDropDown&&n._openDropDown.contains(e)&&(n._openDropDown.rippleInProgress=!0)}},100)}else{const o=n._ripple(t,e);o&&n._openDropDown&&n._openDropDown.contains(e)&&(n._openDropDown.rippleInProgress=!0)}if(e===n._addNewTab)return void n._addNewTabHandler(e,o,a);const r=e.tab.index,i=!(n._reordering&&n._reorderedIndex!==void 0);a&&r===n.selectedIndex&&(n._closeGroupDropDown(),i&&null===e.tab.group&&n._toggleCollapsedState()),!n._swiping&&(i&&"click"===n.selectionMode&&a||!n._reordering&&(n.selectionMode===o||"mouseenter"===n.selectionMode&&"mouseover"===o))&&n._select(r,!0),n._reordering||n._swiping||"click"!==n.selectionMode&&"dblclick"!==n.selectionMode||("mouseover"!==o||e.hasAttribute("selected")?"mouseout"===o&&e.removeAttribute("hover"):e.setAttribute("hover","")),n.reorder&&"down"===o&&null===e.tab.group&&1<n._reorderItems.length&&(n._getTabCoordinates(),n._reordering=!0,n.setAttribute("dragged",""),e.hasAttribute("hover")&&(n._draggedHoveredTab=e),n._draggedIndex=0===n._groups.length?e.tab.index:Array.from(n.$.tabStrip.children).indexOf(e))}_labelSizeChangeHandler(e){const t=this,o=e.detail.size;let n;"shrink"===t.tabLayout||(n=e.target instanceof Smart.TabItem?e.target.tabLabelContainer:t._groupLabels[t._groups.indexOf(e.target.label)],null===o?n.style.removeProperty(t._orientationSettings.dimension):n.style[t._orientationSettings.dimension]=parseInt(o,10)+"px",t._applyTabOverflow())}_openGroupDropDown(e){const t=this;e&&(t._openDropDown&&t._openDropDown.$.addClass("smart-hidden"),e.dropDown.$.removeClass("smart-hidden"),t._positionGroupDropDown(e),t._openDropDown=e.dropDown,e.removeAttribute("hover"))}_orderTabs(){const e=this,t=e.getElementsByTagName("smart-tab-items-group"),o=[],n=[];let a=!0,r=!1;if(0===t.length)for(let t=0;t<e._tabs.length;t++){const i=e._tabs[t],l=i.index;if(a&&null!==l&&(a=!1),-1!==o.indexOf(l||0)&&(r=!0,null!==l))break;o.push(l||0),n.push({tab:i,index:l})}if(!r){const e=o.slice(0).sort(function(e,t){return e-t});JSON.stringify(o)===JSON.stringify(e)&&(a=!0)}if(!a&&!r){n.sort(function(e,t){return e.index-t.index});for(let t=0;t<n.length;t++){const o=n[t].tab;o._setIndex(t),e.$.tabContentSection.removeChild(o)}for(let t=0;t<n.length;t++){const o=n[t].tab;e.$.tabContentSection.appendChild(o),e._tabs[t]=o}}else{a||e.warn(e.localize("ambiguousIndexes"));for(let t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t)}}_populateTabStrip(){const e=this,t=document.createDocumentFragment(),o=[],n=[],a=[];let r=null;for(let l=0;l<e._tabs.length;l++){const i=e._tabs[l],s=i.parentElement,d=s instanceof Smart.TabItemsGroup?s.label:null;i.group=d;const b=e._addTabLabelContainer(i),p=b.tabLabelContainer,c=b.dropDownLabelContainer;e.selectedIndex===l&&(p.$.addClass("smart-tab-selected"),p.setAttribute("selected",""),r=p),i.tabLabelContainer=p,p.tab=i,o.push(p),null===d?t.appendChild(p):e._addGroupElements({documentFragment:t,groups:n,groupLabels:a,i:l,group:d,tabLabelContainer:p,smartTabItemsGroup:s}),e.$.dropDownButtonDropDown.appendChild(c)}e.$.tabStrip.appendChild(t),e._tabLabelContainers=o,e._groups=n,e._groupLabels=a,e._positionTabSelectionBar(r,!0)}_positionTabSelectionBar(e,t){function o(){n.$.tabSelectionBar.style.top=i,n.$.tabSelectionBar.style.height=s,n.$.tabSelectionBar.style.left=r,n.$.tabSelectionBar.style.width=l}const n=this;if(!e)return;const a=n.tabPosition;let r,i,l,s;t&&(n.$.tabSelectionBar.style.transition="none"),e.tab.group&&(e=n._groupLabels[n._groups.indexOf(e.tab.group)]),"top"===a||"bottom"===a?("wrap"===n.tabLayout?(i=e.offsetTop,"top"===a&&(i+=e.offsetHeight-n.$.tabSelectionBar.offsetHeight),i+="px"):i=null,s=null,r=-n.$.tabStrip.scrollLeft+e.offsetLeft+"px",l=e.offsetWidth+"px"):("left"===a||"right"===a)&&("wrap"===n.tabLayout?(r=e.offsetLeft,"left"===a&&(r+=e.offsetWidth-n.$.tabSelectionBar.offsetWidth),r+="px"):r=null,l=null,i=-n.$.tabStrip.scrollTop+e.offsetTop+"px",s=e.offsetHeight+"px"),Smart.Utilities.Core.isMobile&&n.hasAnimation&&!t?requestAnimationFrame(function(){requestAnimationFrame(o)}):o(),t&&!n._tabPositionChanging&&requestAnimationFrame(()=>n.$.tabSelectionBar.style.transition=null)}_positionGroupDropDown(e){const t=this,o=t.tabPosition,n=e.dropDown,a=window.getComputedStyle(t.$.tabsHeaderSection),r=parseFloat(a.paddingLeft),i=parseFloat(a.paddingTop);if("top"===o||"bottom"===o){if(n.style.left=e.offsetLeft-t.$.tabStrip.scrollLeft+r+"px","top"===o)n.style.top=e.offsetTop+e.offsetHeight+i+"px";else{let o=e.getBoundingClientRect().top-t.$.container.getBoundingClientRect().top+i;!1,n.style.top=o+"px"}}else n.style.top=e.offsetTop-t.$.tabStrip.scrollTop+i+"px",n.style.left="left"===o?e.offsetLeft+e.offsetWidth+r+"px":e.getBoundingClientRect().left-t.$.container.getBoundingClientRect().left+r+"px"}_processDataSource(){function e(t,o){let n;if(Array.isArray(t.items)&&0<t.items.length){n=document.createElement("smart-tab-items-group");for(let o=0;o<t.items.length;o++)t.items[o].items||e(t.items[o],n)}else n=document.createElement("smart-tab-item"),!0===t.closeButtonHidden&&(n.closeButtonHidden=!0),void 0!==t.content&&(n.innerHTML=t.content),void 0!==t.index&&(n.index=t.index),!0===t.selected&&(n.selected=t.selected);void 0!==t.label&&(n.label=t.label),void 0!==t.labelSize&&(n.labelSize=t.labelSize),o.appendChild(n)}const t=this,o=t.dataSource;if(t.$.tabContentSection.innerHTML="",null!==o)for(let n=0;n<o.length;n++){const a=o[n];e(a,t.$.tabContentSection)}}_processHTML(){const e=this;e._getTabs(),e._orderTabs(),e._validateInitialSelection(),e._populateTabStrip(),e.addNewTab&&e._insertAddNewTab(),e._getReorderItems(),e._applyTabOverflow(),e.ensureVisible(e.selectedIndex),e.$.hiddenInput.value=e.selectedIndex}_removeInlineStyle(){const e=this,t=e.$.tabStrip;if(e._inlineStyleTabStripChildren){const o=t.children;for(let e=0;e<o.length;e++)o[e].removeAttribute("style"),o[e].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete e._inlineStyleTabStripChildren}e._inlineStyleTabStrip&&(t.removeAttribute("style"),delete e._inlineStyleTabStrip),t.$.removeClass("shrink-tabs"),t.$.removeClass("shrink-tabs-vertical")}_reorderTabs(e,t){function o(e,t,o){const n=e[t];e.splice(t,1),e.splice(o,0,n)}const n=this,a=n.$.tabStrip[n._orientationSettings.scrollDirection];if(0===n._groups.length){const a=n._tabs,r=n._tabLabelContainers,i=e>t?t:t+1;n.selectedIndex===e?n.selectedIndex=t:n.selectedIndex<=t&&n.selectedIndex>e?n.selectedIndex--:n.selectedIndex>=t&&n.selectedIndex<e&&n.selectedIndex++;let l;l=r[i]?r[i]:n.addNewTab?n._addNewTab:null,n.$.tabStrip.insertBefore(r[e],l),n.$.dropDownButtonDropDown.insertBefore(n.$.dropDownButtonDropDown.children[e],n.$.dropDownButtonDropDown.children[i]||null),n.$.tabContentSection.insertBefore(a[e],a[i]||null),o(a,e,t),o(r,e,t),n._updateTabIndexes()}else n._reorderTabsGrouping(e,t);n.$.tabStrip[n._orientationSettings.scrollDirection]=a,n.$.fireEvent("reorder",{newIndex:t,originalIndex:e}),n._reorderedIndex=t,n._positionTabSelectionBar(n._tabLabelContainers[n.selectedIndex],!0),n.$.hiddenInput.value=n.selectedIndex}_reorderTabsGrouping(e,t){const o=this,n=o.$.tabStrip.children,a=o.$.tabContentSection.children,r=e>t?t:t+1,i=o._tabs[o.selectedIndex];o.$.tabStrip.insertBefore(n[e],n[r]||null),o.$.tabContentSection.insertBefore(a[e],a[r]||null),o._groupLabels=Array.from(o.$.tabStrip.getElementsByClassName("smart-tab-group-container")),o._groups=[];for(let n=0;n<o._groupLabels.length;n++)o._groups.push(o._groupLabels[n].group);o._tabs=Array.from(o.$.tabContentSection.getElementsByTagName("smart-tab-item"));const l=document.createDocumentFragment();let s=[];for(let n=0;n<o._tabs.length;n++)l.appendChild(o.$.dropDownButtonDropDown.children[o._tabs[n].index].cloneNode(!0));o.$.dropDownButtonDropDown.innerHTML="",o.$.dropDownButtonDropDown.appendChild(l);for(let n=0;n<o.$.tabStrip.childElementCount;n++){const e=o.$.tabStrip.children[n];e.$.hasClass("smart-tab-label-container")&&e!==o._addNewTab?s.push(e):e.$.hasClass("smart-tab-group-container")&&(s=s.concat(Array.from(e.dropDown.children)))}o._tabLabelContainers=s,o._updateTabIndexes(),i&&(o.selectedIndex=i.index)}_resize(e){const t=this;if(!t._resizing)return;const o=t._orientationSettings,n=e[o.coordinate]-t._resizeFrom,a=t._getCorrespondingCustomElement(t._tabToResize);let r=null===a.labelSize?t._tabToResize[o.size]:a.labelSize;const i=Math.max(10,r+n);i!==r&&(a._preventPropertyChangedHandler=!0,a.labelSize=i,t._tabToResize.style[o.dimension]=parseInt(i,10)+"px"),t.$resizeToken.addClass("smart-hidden"),t._applyTabOverflow(),t._resizing=!1,t.removeAttribute("resizing")}_ripple(e,t){const o=this;if(o.hasRippleAnimation){const o=document.createElement("div");return o.className="ripple-agent",t.firstElementChild.appendChild(o),setTimeout(function(){t.firstElementChild.removeChild(o)},1e3),Smart.Utilities.Animation.Ripple.animate(o,e.pageX,e.pageY),!0}}_scrollButtonClickHandler(e){const t=this,o=t.$.tabStrip;let n=e.target.closest("smart-repeat-button")===t.$.scrollButtonNear?-1:1;if("paging"===t.scrollMode){const a=t._orientationSettings,r={};return t._dragStartDetails={startX:0,startY:0,pageX:0,pageY:0,startTime:Date.now(),target:e.target},t._wheelInProgress=!0,r[a.coordinate]=-n*(o[a.size]/1.1428571428571428),void t._endSwiping(r,t._dragStartDetails.startTime+175)}t.hasAttribute("horizontal")?o.scrollLeft+=10*n:o.scrollTop+=10*n,t._updateScrollButtonVisibility(!0)}_select(e,t,o){const n=this,a=n.hasAnimation;if(void 0===o&&(o=n.selectedIndex),e===o&&(!n.allowToggle||n.allowToggle&&"mouseenter"===n.selectionMode))return void(n.$.hiddenInput.value=n.selectedIndex);const r=n._tabs[e];if(n._focusedItem&&n._focusedItem.tabLabelContainer.removeAttribute("focus"),null!==o){const t=n._tabs[o];a?n._animateSelection(r,t,e>o):t.$.addClass("smart-visibility-hidden"),t.selected=!1,n._tabLabelContainers[o].$.removeClass("smart-tab-selected"),n._tabLabelContainers[o].removeAttribute("selected"),n.closeButtons&&"selected"===n.closeButtonMode&&n._disableCloseButton(o)}n.allowToggle&&(null===e||(void 0===arguments[2]?n.selectedIndex:o)===e)?(n.selectedIndex=null,n.$.tabContentSection.setAttribute("show-placeholder",""),n.allowToggle&&(n._focusedItem=n._tabs[null===e?o:e],n._focusedItem&&n._focusedItem.tabLabelContainer.setAttribute("focus",""))):(r.selected=!0,n.$.tabContentSection.removeAttribute("show-placeholder"),(null===o||!a)&&r.$.removeClass("smart-visibility-hidden"),n.selectedIndex=e,n._focusedItem=n._tabs[e],n._focusedItem.tabLabelContainer.$.addClass("smart-tab-selected"),n._focusedItem.tabLabelContainer.setAttribute("selected",""),n._positionTabSelectionBar(n._focusedItem.tabLabelContainer,null===o)),null!==e&&(n._tabLabelContainers[e].removeAttribute("hover"),n.closeButtons&&"selected"===n.closeButtonMode&&n._enableCloseButton(e)),t&&(n.$.hiddenInput.value=n.selectedIndex,n.$.fireEvent("change",{index:n.selectedIndex,oldIndex:o})),n._closeGroupDropDown(),r&&null!==r.group?(n._selectedGroup&&n._selectedGroup.$.removeClass("smart-tab-group-selected"),null!==n.selectedIndex&&(n._selectedGroup=n._groupLabels[n._groups.indexOf(r.group)],n._selectedGroup.$.addClass("smart-tab-group-selected"))):n._selectedGroup&&(n._selectedGroup.$.removeClass("smart-tab-group-selected"),delete n._selectedGroup),n.$.hiddenInput.value=n.selectedIndex}_selectStartHandler(e){const t=this;(t._reordering||t._resizing)&&e.preventDefault()}_setLabel(e,t,o){const n=e?document.getElementById(e):null;if(null!==n&&"template"===n.tagName.toLowerCase()){const e=document.importNode(n.content,!0);if(t.appendChild(e),o){const e=document.importNode(n.content,!0);o.appendChild(e)}}else""===e&&(e="&nbsp;"),t.innerHTML=e,o&&(o.innerHTML=e)}_showCloseButton(e){e.closeButtonEnabled&&(e.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),e.firstElementChild.children[1].$.removeClass("smart-hidden"))}_tabContentSectionTransitionendHandler(e){const t=this,o=e.target;o instanceof Smart.TabItem&&(o===t._animatedOldTab?(o.$.addClass("smart-hidden"),o.$.removeClass("animate"),o.$.removeClass(t._animatedOldTab.classToRemove),o.$.removeClass("smart-hidden"),delete t._animatedOldTab):o===t._animatedTab&&(o.$.removeClass("animate"),delete t._animatedTab),o.classList.remove("left"),o.classList.remove("right"),o.classList.remove("top"),o.classList.remove("bottom"))}_tabsHeaderItemsWheelHandler(e){const t=this,o=t._orientationSettings;if(!(!t.enableMouseWheelAction||t._wheelInProgress||t.disabled||t.$.tabStrip[o.size]===t.$.tabStrip[o.scrollSize])){e.preventDefault(),t._dragStartDetails={startX:e.pageX,startY:e.pageY,pageX:e.pageX,pageY:e.pageY,startTime:Date.now(),target:e.target},t._wheelInProgress=!0;const n={};n[o.coordinate]=e[o.coordinate]+(0<e.deltaY?-1:1)*o.wheelOffset,t._endSwiping(n,t._dragStartDetails.startTime+100)}}_tabStripHandler(e,t){const o=this,n=t.type;if("down"===n&&void 0!==o._tabToResize)return o._resizing=!0,void(o._tabsHeaderSectionCoordinate=o.$.tabsHeaderSection.getBoundingClientRect()[o._orientationSettings.edge]);"down"===n&&Smart.Utilities.Core.isMobile&&(o._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),originalTime:Date.now(),target:t.originalEvent.target});const a=e.closest("smart-repeat-button");if("up"===n&&a)return o.focus(),void(o.resize&&o._getTabCoordinates());if(e.classList.contains("smart-tab-close-button"))if("up"!==n){if("down"===n)return void(o._downTarget=e);o._reordering||o._swiping||("mouseover"===n?e.setAttribute("hover",""):"mouseout"===n&&e.removeAttribute("hover"))}else if(e===o._downTarget){const t=e.parentElement.parentElement.tab.index,n=o.$.fireEvent("closing",{index:t});return void(n.defaultPrevented||(o.remove(t),o.$.fireEvent("close",{index:t})))}const r=e.closest(".smart-tab-label-container");if(null!==r)return void o._labelContainerHandler(r,t,n);const i=e.closest(".smart-tab-group-container");null!==i&&o._groupContainerHandler(i,n)}_tabStripMouseleaveHandler(){const e=this;e.resize&&!e._resizing&&e.hasAttribute("resizing")&&e.removeAttribute("resizing")}_tabStripMoveHandler(e){var t=Math.abs;const o=this;if(o._dragStartDetails&&!o._dragStartDetails.checked&&(500>Date.now()-o._dragStartDetails.originalTime?(o._endReordering(void 0,void 0),o._dragStartDetails.checked=!0):delete o._dragStartDetails),o._dragStartDetails&&(5<=t(o._dragStartDetails.pageX-e.pageX)||5<=t(o._dragStartDetails.pageY-e.pageY))){const t=o._orientationSettings,n=o._dragStartDetails[t.coordinate]-e[t.coordinate],a=o.$.tabStrip[t.scrollDirection];return o.$.tabStrip[t.scrollDirection]+=n,a!==o.$.tabStrip[t.scrollDirection]&&o._updateScrollButtonVisibility(),o._dragStartDetails={startX:o._dragStartDetails.startX,startY:o._dragStartDetails.startY,pageX:e.pageX,pageY:e.pageY,startTime:o._dragStartDetails.startTime,originalTime:o._dragStartDetails.originalTime,target:e.originalEvent.target,checked:o._dragStartDetails.checked},void(o._swiping=!0)}if(!o.resize||o._resizing||o._reordering||"shrink"===o.tabLayout)return;const n=o._orientationSettings,a=e[n.coordinate],r=o._tabCoordinates;let l;for(let t=0;t<r.length;t++){const e=r[t][n.to];if(a>=e-4&&a<=e+4){l=o._reorderItems[t],o._resizeFrom=a;break}}void 0===l?(o._tabToResize=void 0,o.removeAttribute("resizing")):(o._tabToResize=l,o.setAttribute("resizing",""))}_toggleCollapsedState(){const e=this;e.collapsible&&(e.collapsed?e.expand():e.collapse())}_toggleNavigationElementsVisibility(){const e=this,t=e._tabs.length;let o;if(0===t)o="addClass";else if(1===t)o="removeClass";else return;"scroll"===e.tabLayout&&"scroll"===e.overflow?(e.$scrollButtonNear[o]("smart-hidden"),e.$scrollButtonFar[o]("smart-hidden")):"dropDown"===e.tabLayout&&e.$dropDownButton[o]("smart-hidden")}_updateIndexes(e){const t=this;null!==t.selectedIndex&&e<=t.selectedIndex&&t.selectedIndex++,t._updateTabIndexes()}_updateScrollButtonVisibility(e){var t=Math.round;const o=this;if("scroll"!==o.tabLayout||"hidden"===o.overflow)return void o._positionTabSelectionBar(o._tabLabelContainers[o.selectedIndex],e);const n=o.$tabsHeaderSection,a=o.$.tabStrip,r=o._orientationSettings;let i=!0,l=!0;if(0===t(a[r.scrollDirection])&&(i=!1),t(a[r.size]+a[r.scrollDirection])>=t(a[r.scrollSize])-1&&(l=!1),"auto"===o.overflow){if(i&&l)return o.$scrollButtonNear.removeClass("smart-hidden"),o.$scrollButtonFar.removeClass("smart-hidden"),n.removeClass("one-button-shown"),void(o._tabLabelContainers[o.selectedIndex]&&o._positionTabSelectionBar(o._tabLabelContainers[o.selectedIndex],e));i?o.$scrollButtonNear.removeClass("smart-hidden"):o.$scrollButtonNear.addClass("smart-hidden"),l?o.$scrollButtonFar.removeClass("smart-hidden"):o.$scrollButtonFar.addClass("smart-hidden"),n.addClass("one-button-shown"),o._getTabCoordinates()}else"scroll"!==o.overflow||o.disabled||(o.$.scrollButtonNear.disabled=!i,o.$.scrollButtonFar.disabled=!l);o._tabLabelContainers[o.selectedIndex]&&o._positionTabSelectionBar(o._tabLabelContainers[o.selectedIndex],e)}_updateTabIndexes(){const e=this;if(0<e._tabs.length)for(let t=0;t<e._tabs.length;t++)e._tabs[t]._setIndex(t);else e.selectedIndex=null;e.$.hiddenInput.value=e.selectedIndex}_validateIndex(e,t){if(isNaN(parseInt(e,10))||"object"==typeof e){const e=this;e.error(e.localize("invalidIndex",{method:t}))}}_validateInitialSelection(){const e=this;let t=e.selectedIndex;for(let o=0;o<e._tabs.length;o++){const n=e._tabs[o];t===o?(n.selected=!0,n.$.removeClass("smart-visibility-hidden")):n.selected?null===t?(t=o,n.$.removeClass("smart-visibility-hidden")):(n.selected=!1,n.$.addClass("smart-visibility-hidden")):n.$.addClass("smart-visibility-hidden")}0<e._tabs.length&&null===t&&!e.allowToggle&&(t=0,e._tabs[0].selected=!0,e._tabs[0].$.removeClass("smart-visibility-hidden")),e.selectedIndex=t,null!==e.selectedIndex&&(e._focusedItem=e._tabs[e.selectedIndex])}});