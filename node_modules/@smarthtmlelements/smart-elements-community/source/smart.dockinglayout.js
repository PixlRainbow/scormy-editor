
/* Smart HTML Elements v4.6.0 (2019-Oct) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-docking-layout",class extends Smart.ContentElement{static get properties(){return{autoLoadState:{value:!1,type:"boolean"},autoSaveState:{value:!1,type:"boolean"},draggable:{value:!0,type:"boolean"},floatable:{value:!0,type:"boolean"},hideSplitterBars:{value:!1,type:"boolean"},layout:{value:[],type:"array",reflectToAttribute:!1},liveResize:{value:!1,type:"boolean"},messages:{value:{en:{invalidNode:"{{elementType}}: \"{{method}}\" method accepts an instance of Smart.TabsWindow",invalidNodeRemove:"{{elementType}}: \"{{method}}\" method accepts an instance of Smart.TabsWindow that is a child of the DockingLayout.",invalidNodeType:"{{elementType}}: The method \"{{method}}\" requires a \"smart-tabs-window\" element to be passed as an argument.",invalidTargetNode:"{{elementType}}: The method \"{{method}}\" requires an index of an item that is not hidden/closed. Only visible items that are part of the Layout are valid.",invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number.",noId:"smartDockingLayout requires an id in order to save/load a state."}},type:"object",extend:!0},resizeStep:{value:5,type:"number"},snapMode:{value:"advanced",allowedValues:["simple","advanced"],type:"string"}}}static get listeners(){return{"autoHideWindow.close":"_autoHideWindowCloseHandler","autoHideWindow.resizeEnd":"_autoHideWindowResizeEndHandler","container.dock":"_dockEventHandler",move:"_moveHandler","document.down":"_documentDownHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler","document.selectstart":"_documentSelectStartHandler","document.dragstart":"_documentDragStartHandler","container.tabStripResize":"_containerTabStripResizeHandler","itemsContainer.close":"_itemsContainerCloseHandler","itemsContainer.autoHide":"_itemsContainerAutoHideHandler","itemsContainer.resizeEnd":"_itemsContainerResizeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",mouseleave:"_mouseLeaveHandler"}}static get styleUrls(){return["smart.dockinglayout.css"]}template(){return`<div id="container">
                    <smart-splitter id="horizontalHiddenItemsContainer" class="smart-horizontal-hidden-items-container" orientation="horizontal">
                        <smart-splitter-item class="smart-docking-layout-item-holder">
                            <smart-splitter id="verticalHiddenItemsContainer" class="smart-vertical-hidden-items-container">
                                <smart-splitter-item class="smart-docking-layout-item-holder">
                                    <smart-splitter id="itemsContainer" class="smart-items-container">
                                        <content></content>
                                        <smart-splitter-item id="placeholderItem" class="smart-placeholder" pinned>
                                            <smart-tabs-window tab-position="hidden" opened header-buttons='[]'>
                                                <smart-tab-item></smart-tab-item>
                                            </smart-tabs-window>
                                        </smart-splitter-item>
                                    </smart-splitter>
                                </smart-splitter-item>
                            </smart-splitter>
                        </smart-splitter-item>
                    </smart-splitter>
                    <smart-tabs-window id="tabsWindowFeedback" class="smart-tabs-window-feedback smart-hidden"></smart-tabs-window>
                    <smart-tabs-window id="autoHideWindow" class="smart-docking-layout-auto-hide-window" pinned header-buttons='["close", "dock"]' tab-position="hidden">
                        <smart-tab-item></smart-tab-item>
                    </smart-tabs-window>
                </div>`}propertyChangedHandler(e,t,a){const i=this;switch(e){case"autoSaveState":i._handleAutoSave();break;case"layout":i._handleLayout();break;case"liveResize":case"resizeStep":{const t=i.getElementsByTagName("smart-splitter");for(let o=0;o<t.length;o++)t[o][e]=a;"liveResize"===e&&(i.$.autoHideWindow[e]=a);break}case"snapMode":i._handleSnapping(),i._snapFeedback=void 0;break;case"hideSplitterBars":i._setSplitterBarVisibility();break;default:super.propertyChangedHandler(e,t,a);}}ready(){super.ready()}render(){const e=this;if(e.autoLoadState){const t=e.loadState();t&&(e.layout=t)}e.$.itemsContainer.liveResize=e.liveResize,e.$.itemsContainer.resizeStep=e.resizeStep,e._handleLayout(),e.$tabsWindowFeedback.removeClass("smart-hidden"),e._setFocusable(),e.checkLicense(),super.render()}static get requires(){return{"Smart.TabsWindow":"smart.window.js","Smart.Splitter":"smart.splitter.js"}}appendChild(e){const t=this;if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}return e?e instanceof Smart.TabsWindow?void t.insertBefore(e,null):void t.error(t.localize("invalidNodeType",{elementType:t.nodeName.toLowerCase(),method:"appendChild"})):void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"appendChild"}))}autoHideBottom(e){this._autoHide(e,"bottom")}autoHideLeft(e){this._autoHide(e,"left")}autoHideRight(e){this._autoHide(e,"right")}autoHideTop(e){this._autoHide(e,"top")}clearState(){const e=this;return e.id?void window.localStorage.removeItem("smartDockingLayout"+e.id):void e.warn(e.localize("noId"))}dock(e){this._dock(e)}undock(e){const t=this;if("number"==typeof e?e=t._items[e]:"string"==typeof e&&(e=t._getItemById(e)),!e)return;if(!(t.shadowRoot||t).contains(e)&&t._getClosestDockingLayout(e)!==t)return;const i=e.getRootNode()&&e.getRootNode().host?e.getRootNode().host:void 0,a=e.closest("smart-splitter-item")||(i?i.closest("smart-splitter-item"):void 0);if(!a)return;const o=a.getBoundingClientRect();let s;if(e instanceof Smart.TabsWindow){e.autoHide?(t.$.autoHideWindow.close(),e._autoHideWindow&&(e.style.width=e._autoHideWindow.offsetWidth+"px",e.style.height=e._autoHideWindow.offsetHeight+"px"),"left"===e.tabPosition||"right"===e.tabPosition?e.style.height=t.offsetHeight+"px":e.style.width=t.offsetWidth+"px"):(e.style.width=e.offsetWidth+"px",e.style.height=e.offsetHeight+"px"),e.windowParent="body",e.opened=!0,e.autoHide&&(e.tabPosition="top"),e.autoHide=e.allowToggle=e.pinned=!1,e.style.maxWidth=e.style.maxHeight="",s=e;const i=a.closest("smart-splitter");i.removeChild(a),t._removeUnneccessaryItems(i)}else if(e instanceof Smart.TabItem){const o=e.closest("smart-tabs-window")||(i?i.closest("smart-tabs-window"):void 0);let n;1===o.items.length?(n=o,a.closest("smart-splitter").removeChild(a)):(n=t._createTabsWindowFromObject({label:e.label}),o.removeChild(e),n.appendChild(e)),"body"!==n.windowParent&&(n.windowParent="body"),n.parentElement!==document.body&&document.body.appendChild(n),n.allowToggle=n.autoHide=n.pinned=!1,n.label=e.label,n.opened=!0,n._parentInfo={closestItem:o,position:e.index},s=n,e=o}else return;e._originalTabPosition?s.tabPosition=e._originalTabPosition:e.autoHide&&(s.tabPosition="top"),s.tabTextOrientation=e._originalTextOrientation||"horizontal",s===e&&(delete s._originalTabPosition,delete s._originalTextOrientation),t._setFloatingItemsHeaderButtons(s),s.style.left=o.left+"px",s.style.top=o.top+"px",s.resizeMode="both";const n=t._items.indexOf(e);if(s.layout=t,-1<n&&(t._items.splice(n,1),s.position&&(s.style.top=s.position.top,s.style.left=s.position.left,delete s.position)),0!==t._items.filter(e=>e.opened).length||t.$.placeholderItem.parentElement||t.$.itemsContainer.appendChild(t.$.placeholderItem),t._validateWindowPosition(s),t._setAutoHidePaddings(),t._noStateChangeFiring||(t._handleAutoSave(),t.$.fireEvent("stateChange",{type:"float",item:s})),document.activeElement!==s){const e=document.scrollingElement||document.documentElement,t=e.scrollLeft,i=e.scrollTop;s.focus(),s.bringToFront(),window.scrollTo(t,i)}}insertBefore(e,t,i){const a=this;if(!a.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,e.concat(Array.prototype.slice.call(arguments)))}let o=e;o instanceof Smart.TabsWindow?(e=document.createElement("smart-splitter-item"),e.size=o.size||"",e.max=o.max||"",e.min=o.min||"",e.locked=o.locked||!1,e.collapsible=o.collapsible||!1,e.collapsed=o.collapsed||!1,e.appendChild(o)):o instanceof Smart.SplitterItem?o=o.querySelector("smart-tabs-window"):a.error(a.localize("invalidNodeType",{elementType:a.nodeName.toLowerCase(),method:"insertBefore"})),o.opened=o.pinned=!0,o.style.width=o.style.height="",o.style.top=o.style.left="",o.style.paddingTop=o.style.paddingBottom="",o.style.paddingLeft=o.style.paddingRight="",e.style.top=e.style.left="";let s;if(t){if(s=t.closest("smart-splitter"),s===a.$.verticalHiddenItemsContainer||s===a.$.horizontalHiddenItemsContainer?(s=a.$.itemsContainer,t=0===a._items.length?null:"top"===t.tabPosition||"left"===t.tabPosition?a._items[0]:a._items[a._items.length-1]):i&&(s=a.$.itemsContainer),!(t instanceof Smart.TabsWindow))return void a.error(a.localize("invalidNodeType",{elementType:a.nodeName.toLowerCase(),method:"insertBefore"}));s.autoFitMode="end",s.insertBefore(e,s._items.filter(e=>e.contains(t))[0]),a._items.splice(a._items.indexOf(t),0,o)}else s=a.$.itemsContainer,a._dockingAutoHideTabItem&&(s.autoFitMode="end"),a._items.push(o),a.$.itemsContainer.insertBefore(e);if(s.autoFitMode="proportional",o.autoHide)a._autoHide(o,o.autoHidePosition);else{o.autoHide=o.allowToggle=!1,o._originalTabPosition&&(o.tabPosition=o._originalTabPosition,delete o._originalTabPosition),o._originalTextOrientation&&(o.tabTextOrientation=o._originalTextOrientation,delete o._originalTextOrientation),a._setDockedItemsHeaderButtons(o);const e=document.scrollingElement||document.documentElement,t=e.scrollLeft,i=e.scrollTop;o.focus(),window.scrollTo(t,i)}0<a._items.filter(e=>e.opened).length&&a.$.placeholderItem.parentElement&&a.$.itemsContainer.removeChild(a.$.placeholderItem),o.layout=a,o.minimized=!1,o.maximized=!1,o.locked=!1,o.resizeMode="none",a._handleAutoHiddenSplitterBars(),a._setSplitterBarVisibility(),a._handleAutoSave(),a.$.fireEvent("stateChange",{type:"dock",item:o})}insertBeforeItem(e,t){this._insert(e,t,"top","insertBeforeItem")}insertAfterItem(e,t){this._insert(e,t,"bottom","insertAfterItem")}insertIntoLeft(e,t){this._insert(e,t,"inside-left","insertIntoLeft")}insertIntoRight(e,t){this._insert(e,t,"inside-right","insertIntoRight")}insertIntoTop(e,t){this._insert(e,t,"inside-top","insertIntoTop")}insertIntoBottom(e,t){this._insert(e,t,"inside-bottom","insertIntoBottom")}insertLayoutTop(e){this._insert(0,e,"layout-top","insertLayoutTop")}insertLayoutBottom(e){this._insert(0,e,"layout-bottom","insertLayoutBottom")}insertLayoutLeft(e){this._insert(0,e,"layout-left","insertLayoutLeft")}insertLayoutRight(e){this._insert(0,e,"layout-right","insertLayoutRight")}insertOutsideTargetGroupTop(e,t){this._insert(e,t,"outside-top","insertOutsideTargetGroupTop")}insertOutsideTargetGroupBottom(e,t){this._insert(e,t,"outside-bottom","insertOutsideTargetGroupBottom")}insertOutsideTargetGroupLeft(e,t){this._insert(e,t,"outside-left","insertOutsideTargetGroupLeft")}insertOutsideTargetGroupRight(e,t){this._insert(e,t,"outside-right","insertOutsideTargetGroupRight")}getAutoHideItems(e){function t(e){let t=[];if(!e._items)return t;for(let a=0;a<e._items.length;a++)e._items[a].$.hasClass("smart-docking-layout-item-holder")||t.push(e._items[a].getElementsByTagName("smart-tabs-window")[0]);return t}const i=this;return e?"horizontal"===e?t(i.$.horizontalHiddenItemsContainer):t(i.$.verticalHiddenItemsContainer):t(i.$.horizontalHiddenItemsContainer).concat(t(i.$.verticalHiddenItemsContainer))}getIndex(e){const t=this;return t.isReady?t._items.length?t._items.indexOf(e):void 0:void 0}get autoHideItems(){const e=this;if(e.isReady)return e.getAutoHideItems()}get items(){const e=this;if(e.isReady)return e._items.filter(e=>e.opened).concat(e.getAutoHideItems())}get closedItems(){const e=this;if(e.isReady)return e._items.filter(e=>!e.opened)}get undockedItems(){const e=this;if(e.isReady){const t=document.getElementsByTagName("smart-tabs-window");let a=[];for(let o=0;o<t.length;o++)t[o].closest("smart-docking-layout")||e._getClosestDockingLayout(t[o])||t[o].layout!==e||(t[o].undocked=!0,a.push(t[o]));return a}}getItemGroupElement(e){const t=this;return t.isReady&&e&&e instanceof Smart.TabsWindow&&(t.shadowRoot||t).contains(e)?e.closest("smart-splitter"):void 0}getState(e){const t=this,a=t.getAutoHideItems(),o=t.undockedItems,s=[];for(let o=0;o<a.length;o++)s.push(t._createTabsWindowStructure(a[o],e));for(let a=0;a<o.length;a++)s.push(t._createTabsWindowStructure(o[a],e));return[{type:"LayoutGroup",items:s.concat(t._createLayoutStructure(t.$.itemsContainer,e)),orientation:t.$.itemsContainer.orientation}]}getClosestSplitterBars(e){const t=this;if(!t._items||!t._items.length)return;if("string"==typeof e?e=t._getItemById(e):"number"==typeof e&&(e=t._items[parseInt(e)]),!(e instanceof Smart.TabsWindow)||!t._items.find(t=>t===e))return;let i=e.closest("smart-splitter");for(;i&&!i.bars.length;)i=i.closest("smart-splitter");if(i)return i.bars}getJSONStructure(){return this.getState(!0)}loadState(e){const t=this;if(!e){if(!t.id)return void t.warn(t.localize("noId"));e=JSON.parse(window.localStorage.getItem("smartDockingLayout"+t.id))}return e?(t._loadState(e),e):void 0}remove(e){const t=this;return"number"==typeof e?e=t._items[e]:"string"==typeof e&&(e=t._getItemById(e)),e instanceof Smart.TabsWindow?e.closest("smart-docking-layout")!==t&&t._getClosestDockingLayout(e)!==t?void t.error(t.localize("invalidNodeRemove",{elementType:t.nodeName.toLowerCase(),method:"remove"})):void t.removeChild(e):void t.error(t.localize("invalidIndex",{elementType:t.nodeName.toLowerCase(),method:"remove"}))}removeAll(){this._removeAll()}removeChild(e){const t=this;if(!e)return void t.error(t.localize("invalidNode",{elementType:t.nodeName.toLowerCase(),method:"removeChild"}));if(!(e instanceof Smart.TabsWindow))return void t.error(t.localize("invalidNodeType",{elementType:t.nodeName.toLowerCase(),method:"removeChild"}));if(!t.isCompleted){const e=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(t,e.concat(Array.prototype.slice.call(arguments)))}const i=e.closest("smart-splitter-item");if(i){const a=i.closest("smart-splitter");a&&(i.closest("smart-splitter").removeChild(i),t._items.splice(t._items.indexOf(e),1),t._removeUnneccessaryItems(a),0===t._items.filter(e=>e.opened).length&&!t.$.placeholderItem.parentElement&&t.$.itemsContainer.appendChild(t.$.placeholderItem),e.layout=t,t._handleAutoSave(),t.$.fireEvent("stateChange",{type:"remove",item:e}))}}saveState(){const e=this;return e.id?void window.localStorage.setItem("smartDockingLayout"+e.id,JSON.stringify(e.getJSONStructure())):void e.warn(e.localize("noId"))}update(e,t){const i=this;if("number"==typeof e?e=i._items[parseInt(e)]:"string"==typeof e&&(e=i._getItemById(e)),!e||!(e instanceof Smart.TabsWindow))return void i.error(i.localize("invalidNodeType",{elementType:i.nodeName.toLowerCase(),method:"update"}));if(((i.shadowRoot||i).contains(e)||i._getClosestDockingLayout(e)===i)&&t&&"object"==typeof t){if(t.items)for(let a=0;a<t.items.length;a++)e.update(t.items[a].index,t.items[a].label,t.items[a].content);t.id&&(e.id=t.id),t.label&&(e.label=t.label),e.tabCloseButtons=t.tabCloseButtons||!1,t.headerButtons&&Array.isArray(t.headerButtons)&&(e.headerButtons=0===t.headerButtons.length?["close","autoHide"]:t.headerButtons);const a=e.closest("smart-splitter-item");a&&(e.autoHide?i._autoHide(e):(a.size=void 0===t.size?a.size:t.size,a.min=void 0===t.min?a.min:t.min,a.max=void 0===t.max?a.max:t.max,a.locked=void 0===t.locked?a.locked:t.locked,a.collapsible=void 0===t.collapsible?a.collapsible:t.collapsible,a.collapsed=void 0===t.collapsed?a.collapsed:t.collapsed))}}_autoHide(e,t){const i=this;if("number"==typeof e?e=i._items[e]:"string"==typeof e&&(e=i._getItemById(e)),!e)return;if(e instanceof Smart.TabItem){const a=e.closest("smart-tabs-window")||(e.getRootNode()&&e.getRootNode().host?e.getRootNode().host.closest("smart-tabs-window"):void 0);if(a&&2>a.items.length)e=a;else{const o=e;if(a){if(a.autoHide&&a.tabPosition===t)return;a.removeChild(e)}e=i._createTabsWindowFromObject({label:e.label}),e.appendChild(o)}}if(!(e instanceof Smart.TabsWindow))return void i.error(i.localize("invalidNodeType",{elementType:i.nodeName.toLowerCase(),method:"appendChild"}));let a,o=e.closest("smart-splitter-item");const s=e.closest("smart-splitter")||(e.isInShadowDOM?e.getRootNode().host:void 0)||i.$.itemsContainer,n=i._getAutoHidePositionDetails(t,e,o),d=n.autoHideSplitter;t=n.position,e.offsetHeight&&(a="left"===t||"right"===t?e.offsetWidth:e.offsetHeight),o||(o=document.createElement("smart-splitter-item"),o.appendChild(e)),o.min=30;const l="auto-hide-"+t;if(!(e.autoHide&&o.$.hasClass(l))){const n=i._items.indexOf(e);i._items.splice(n,-1<n?1:0),0!==i._items.filter(e=>e.opened).length||i.$.placeholderItem.parentElement||("left"===t?i.$.itemsContainer.insert(1,i.$.placeholderItem):i.$.itemsContainer.appendChild(i.$.placeholderItem)),i._handleAutoHideWindow({position:t,tabsWindow:e,splitterItem:o,autoHideName:l,splitterContainer:s,autoHideSplitter:d}),d.bars.map(e=>e.hide()),(!i.shadowRoot||i.shadowRoot&&i.isCompleted)&&i._setAutoHidePaddings();const r=e.items;if(r)for(let e=0;e<r.length;e++)r[e]._autoHideWindowSize||(r[e]._autoHideWindowSize=a);i.$.autoHideWindow.opened&&i.$.autoHideWindow._tabsWindow&&i.$.autoHideWindow._tabsWindow._setAutoHideWindowSize(i.$.autoHideWindow._tabsWindow.selectedIndex),i.isCompleted&&(i._handleAutoSave(),i.$.fireEvent("stateChange",{type:"autoHide",item:e}),i.shadowRoot&&setTimeout(function(){"top"===t||"bottom"===t?(i.$.horizontalHiddenItemsContainer.items.filter(e=>-1<e.className.indexOf("auto-hide-")).forEach(e=>{const t=e.querySelector("smart-tabs-window");e.style.height="",t.refreshTabs()}),i.$.horizontalHiddenItemsContainer.refresh()):(i.$.verticalHiddenItemsContainer.items.filter(e=>-1<e.className.indexOf("auto-hide-")).forEach(e=>{const t=e.querySelector("smart-tabs-window");e.style.width="",t.refreshTabs()}),i.$.verticalHiddenItemsContainer.refresh()),i._setAutoHidePaddings()},150))}}_moveHandler(){this.hasAttribute("dragged")&&"touchmove"===event.originalEvent.type&&event.originalEvent.preventDefault()}_getAutoHidePositionDetails(e,t,i){const a=this,o=t.closest("smart-splitter")||a.$.itemsContainer,s=o?o._items.indexOf(i):0;let n;switch(e){case"top":case"bottom":n=a.$.horizontalHiddenItemsContainer;break;case"left":case"right":n=a.$.verticalHiddenItemsContainer;break;default:if("vertical"===o.orientation){n=a.$.verticalHiddenItemsContainer;const t=n.items.filter(e=>-1<e.className.indexOf("auto-hide-"));e=1===t.length&&1===a._items.length?t[0].$.hasClass("auto-hide-right")?"right":"left":s>=o.items.length/2?"right":"left"}else{n=a.$.horizontalHiddenItemsContainer;const t=n.items.filter(e=>-1<e.className.indexOf("auto-hide-"));e=1===t.length&&1===a._items.length?t[0].$.hasClass("auto-hide-bottom")?"bottom":"top":s>=o.items.length/2?"bottom":"top"}}return{autoHideSplitter:n,position:e}}_handleAutoHideWindow(e){const t=this,i=e.autoHideName,a=e.splitterItem,o=e.splitterContainer,s=e.position,n=e.autoHideSplitter;let d=e.tabsWindow,l=(t.shadowRoot||t).querySelector("."+i),r="offset"+("left"===s||"right"===s?"Width":"Height");if(d.locked=!1,l){const e=[].slice.call(d.isCompleted?d.items:d.children),s=l.querySelector("smart-tabs-window"),n=s.items.length;for(let t=0;t<e.length;t++)s.insert(n,{node:e[t]}),e[t]._autoHideWindowSize=d[r];a.parentElement&&o.removeChild(a),t._removeUnneccessaryItems(o),d=s}else{o&&o.contains(a)&&o.removeChild(a),(t._initializingItems||!d.autoHide)&&(d._originalTabPosition=d.tabPosition,d._originalTextOrientation=d.tabTextOrientation,d._originalLocked=d.locked),d.autoHideWindow=t.$.autoHideWindow,d.autoHide=d.allowToggle=!0,d.selectedIndex=null,d.$.tabsElement&&d.$.tabsElement.selectedIndex!==d.selectedIndex&&(d.$.tabsElement.selectedIndex=d.selectedIndex),d.tabTextOrientation="right"===s||"left"===s?"vertical":"horizontal",d.tabPosition=s,d.style.top=d.style.left="",d.style.width=d.style.height="",d.opened=!0,d.resizeMode="none";for(let e=0;e<a.classList.length;e++)-1<a.classList[e].indexOf("auto-hide-")&&a.$.removeClass(a.classList[e]);if(a.$.addClass(i),a.style.paddingLeft=a.style.paddingRight=a.style.paddingTop=a.style.paddingBottom="",a.min&&(a.min=""),t._removeUnneccessaryItems(o),"top"===s||"left"===s?n.insert(0,a):n.appendChild(a),n.autoFitMode="proportional",Smart.Utilities.Core.Browser.Safari&&("left"===s||"right"===s)){const e=d.querySelector(".smart-tab-strip");d.size=e.offsetWidth}else{if(Smart.Utilities.Core.Browser.Firefox&&("top"===s||"bottom"===s)){const e=(d.shadowRoot||d).querySelector(".smart-tab-strip");e&&(d.size=e.offsetHeight)}d.size="auto"}d.min&&(d.min=""),d.min=30,d.locked=!0,n.autoFitMode="end"}}_autoHideWindowCloseHandler(){const e=this,t=e.$.autoHideWindow._tabsWindow,i=document.scrollingElement||document.documentElement,a=i.scrollLeft,o=i.scrollTop;return t._moveContent(t._autoHideWindow.items[0],t._autoHideWindow._tab),e.$.autoHideWindow.opened?void(!t.allowToggle||null!==t.$.tabsElement.selectedIndex&&(t.select(t.$.tabsElement.selectedIndex),document.activeElement!==t.$.tabsElement&&(t.$.tabsElement.focus(),window.scrollTo(a,o)))):(t.selectedIndex=null,void(document.activeElement!==t.$.tabsElement&&(t.$.tabsElement.focus(),window.scrollTo(a,o))))}_autoHideWindowResizeEndHandler(e){const t=e.target,i="left"===t.resizeMode||"right"===t.resizeMode?"width":"height";t._tab&&(t._tab._autoHideWindowSize=e.detail[i])}_cancelDragOperation(e){const t=this;t.removeAttribute("dragged"),t._dragDetails.windowFeedback.removeAttribute("tabs-window-dragged"),t._dragDetails.windowFeedback.removeAttribute("ontop"),t._returnItemToOrigin(t._dragDetails.windowFeedback),t._noStateChangeFiring=!0,e||t._endDrag()}_createTabsWindowFromObject(e,t){const a=document.createElement("smart-tabs-window");let o,i=["close","autoHide"];if(a.layout=this,e.id&&(a.id=e.id),e.disabled&&(a.disabled=e.disabled),e.label&&(a.label=e.label),e.headerPosition&&(a.headerPosition=e.headerPosition),e.tabCloseButtons&&(a.tabCloseButtons=e.tabCloseButtons),e.dropPosition&&(a.dropPosition=e.dropPosition),e.resizeMode&&(a.resizeMode=e.resizeMode),this.hasAnimation||(a.animation="none"),a.draggable=void 0===e.draggable||e.draggable,a.floatable=void 0===e.floatable||e.floatable,a.tabCloseButtons=e.tabCloseButtons?e.tabCloseButtons:a.tabCloseButtons,e.autoHide?(a.autoHideWindow=this.$.autoHideWindow,a.autoHide=a.allowToggle=e.autoHide,a.autoHidePosition=e.autoHidePosition):e.undocked&&(i=["close","maximize","minimize"],a.undocked=e.undocked,a.position={top:e.top?-1<(e.top+"").indexOf("%")?e.top:parseFloat(e.top)+"px":void 0,left:e.left?-1<(e.left+"").indexOf("%")?e.left:parseFloat(e.left)+"px":void 0,width:e.width,height:e.height}),a.tabPosition=e.tabPosition||a.tabPosition,a.opened=a.pinned=!0,e.headerButtons&&(i=e.headerButtons),(!e.headerButtons||Array.isArray(e.headerButtons)&&0===e.headerButtons.length)&&(i=["close","autoHide"]),a.headerButtons=i,a.size=e.size||"",a.max=e.max||"",a.min=e.min?e.min:30,a.locked=e.locked||!1,a.collapsible=e.collapsible||!1,a.collapsed=e.collapsed||!1,e.items&&Array.isArray(e.items))for(let s=0;s<e.items.length;s++)t&&e.items[s].instance?(o=e.items[s].instance,o.index=null,o.id=e.items[s].id||""):(o=document.createElement("smart-tab-item"),o.label=e.items[s].label?e.items[s].label:"",o.id=e.items[s].id||"",o.content=e.items[s].content?e.items[s].content:"",o.selected=!!e.items[s].selected&&e.items[s].selected,a._isItemSelected=!0),o.draggable=void 0===e.items[s].draggable||e.items[s].draggable,o.floatable=void 0===e.items[s].floatable||e.items[s].floatable,e.items[s].id&&(o.id=e.items[s].id),a.appendChild(o);return a}_createItemsFromArray(e,t){const a=this;let o=e;const i=o.length;a._removeAll(!0),a._initializingItems=!0;const s=a.undockedItems;for(let a=0;a<s.length;a++)s[a].layout=null,s[a].parentElement.removeChild(s[a]);1===i&&o[0].type&&"layoutgroup"===o[0].type.toLowerCase()&&(a.$.itemsContainer.orientation=o[0].orientation||a.$.itemsContainer.orientation,a.$.itemsContainer.liveResize=o[0].liveResize||a.$.itemsContainer.liveResize,a.$.itemsContainer.resizeMode=o[0].resizeMode||a.$.itemsContainer.resizeMode,o=o[0].items);let n;a.$.itemsContainer.autoFitMode="end";for(let s=0;s<o.length;s++)n=a._createLayoutItem(o[s],t),n&&(a.$.placeholderItem.parentElement&&a.$.itemsContainer.removeChild(a.$.placeholderItem),a.$.itemsContainer.appendChild(n));0===a._items.filter(e=>e.opened).length?!a.$.placeholderItem.parentElement&&a.$.itemsContainer.appendChild(a.$.placeholderItem):a.$.placeholderItem.parentElement&&a.$.itemsContainer.removeChild(a.$.placeholderItem),a.$.itemsContainer.autoFitMode="proportional",delete a._initializingItems}_createLayoutItem(e,t){if(!e)return;const a=this,i=document.createElement("smart-splitter-item");let o;if(e.type&&"layoutgroup"===e.type.toLowerCase()){o=document.createElement("smart-splitter"),o._isInShadowDOM=a.shadowRoot,o.autoFitMode="proportional",e.id&&(o.id=e.id),e.orientation&&(o.orientation=e.orientation),e.resizeMode&&(o.resizeMode=e.resizeMode),o.liveResize=a.liveResize,o.resizeStep=a.resizeStep;let s;for(let n=0;n<e.items.length;n++)s=a._createLayoutItem(e.items[n],t),s&&o.appendChild(s);if(!o.querySelector("smart-splitter-item"))return}else{if(o=a._createTabsWindowFromObject(e.type&&"layoutgroup"===e.type.toLowerCase()?e.items[0]:e,t),o.autoHide)return a._autoHide(o,o.autoHidePosition),void delete o.autoHidePosition;if(o.undocked)return a.undock(o),document.body.appendChild(o),o.opened=!0,o.pinned=!1,o.layout=a,o.position&&(o.style.left=o.position.left,o.style.top=o.position.top,o.style.width=o.position.width,o.style.height=o.position.height,delete o.position),void(o.size&&(o.style.left=o.position.left,o.style.top=o.position.top));a._items.push(o)}return i.size=e.size||"",i.max=e.max||"",i.min=e.min||30,i.locked=e.locked||!1,i.collapsible=e.collapsible||!1,i.collapsed=e.collapsed||!1,i.appendChild(o),i}_createLayoutStructure(e,t){function a(e){for(let t=e.firstElementChild;t;){if(t instanceof Smart.Splitter)return t;if(t instanceof Smart.TabsWindow)return t;t=t.nextElementSibling}}const o=this,s=[];let n,d,l=e._items;const i=l[0].$.content.children[0];1===l.length&&i instanceof Smart.Splitter&&(l=i._items,e===o.$.itemsContainer&&(o.$.itemsContainer.orientation=i.orientation));for(let r=0;r<l.length;r++)if(l[r]!==o.$.placeholderItem){if(d=a(l[r].$.content),d instanceof Smart.TabsWindow)n=o._createTabsWindowStructure(d,t);else if(d instanceof Smart.Splitter){for(;1===d._items.length&&d._items[0].$.content.children[0]instanceof Smart.Splitter;)d=d._items[0].$.content.children[0];n=1===d._items.length?o._createTabsWindowStructure(d._items[0].$.content.children[0],t):{type:"LayoutGroup",items:o._createLayoutStructure(d,t),orientation:d.orientation},d.id&&(n.id=d.id),"adjacent"!==d.resizeMode&&(n.resizeMode=d.resizeMode),5!==d.resizeStep&&(n.resizeStep=d.resizeStep),d.liveResize&&(n.resizeStep=d.liveResize)}n.size=l[r][e._measurements.size],l[r].locked&&(n.locked=!0),l[r].min&&(n.min=l[r].min),l[r].max&&(n.max=l[r].max),s.push(n)}return s}_createTabsWindowStructure(e,t){function a(e){const i={};return i.type="LayoutPanelItem",i.label=e.label||"",e.selected&&(i.selected=e.selected),e.disabled&&(i.disabled=e.disabled),i.draggable=void 0===e.draggable||e.draggable,i.floatable=void 0===e.floatable||e.floatable,t||(i.instance=e),e.id&&(i.id=e.id),i}const o={type:"LayoutPanel"};if(e.id&&(o.id=e.id),e.disabled&&(o.disabled=e.disabled),e.label&&(o.label=e.label),e.autoHide?(o.autoHide=e.autoHide,o.autoHidePosition=e.tabPosition):"top"!==e.tabPosition&&(o.tabPosition=e.tabPosition),e.closest("smart-docking-layout")||this._getClosestDockingLayout(e)||(o.undocked=!0,o.top=e.style.top,o.left=e.style.left,o.width=e.style.width,o.height=e.style.height),e.dropPosition&&"all"!==e.dropPosition[0]&&(o.dropPosition=e.dropPosition),o.draggable=void 0===e.draggable||e.draggable,o.floatable=void 0===e.floatable||e.floatable,void 0!==e.floatable&&(o.floatable=e.floatable),"none"!==e.resizeMode&&(o.resizeMode=e.resizeMode),e.items){o.items=[];for(let t=0;t<e.items.length;t++)o.items.push(a(e.items[t]))}return o}_containerTabStripResizeHandler(e){const t=this,i=e.target.closest("smart-splitter");(i===t.$.horizontalHiddenItemsContainer||i===t.$.verticalHiddenItemsContainer)&&(i._resizeEventHandler(),t._setAutoHidePaddings())}_getItemById(e){const t=this,a=e;if(e=document.getElementById(a),e)return e;if(t.shadowRoot&&(e=t.shadowRoot.querySelector("#"+a),!e)){let o=t.items;for(let t=0;t<o.length;t++){const i=o[t];if(i.shadowRoot&&(e=i.shadowRoot.querySelector("#"+a),e))return e}o=document.querySelectorAll("smart-tabs-window");for(let s=0;s<o.length;s++){const i=o[s];if(i.layout===t&&i.shadowRoot&&(e=i.shadowRoot.querySelector("#"+a),e))return e}}}_dock(e,t){const i=this;if("number"==typeof e?e=i._items[e]:"string"==typeof e&&(e=i._getItemById(e)),!e)return;let a;if(e instanceof Smart.TabItem){const t=i._handleTabItemDocking(e);e=t.tabsWindow,a=t.newTabsWindow}else"object"!=typeof e||e instanceof HTMLElement||(e=i._createTabsWindowFromObject(e));if(!(e instanceof Smart.TabsWindow)||!e.autoHide)return void(0>i._items.indexOf(e)&&(a.autoHide=!1,0===e.items.length&&"simple"===i.snapMode&&e.parentElement.removeChild(e),t?i._insert(-1,a,t?"layout-"+t:void 0):i.appendChild(a)));if((i.shadowRoot||i).contains(e)){const o=e.closest("smart-splitter-item"),s=e.closest("smart-splitter"),n=!o.nextElementSibling;t||("horizontal"===s.orientation?t=n?"bottom":"top":t=n?"right":"left"),0===e.items.length&&o.closest("smart-splitter").removeChild(o),a&&(e=a),e.autoHide&&(i.$.verticalHiddenItemsContainer.contains(e)?i.$.verticalHiddenItemsContainer.removeChild(e.closest("smart-splitter-item")):i.$.horizontalHiddenItemsContainer.contains(e)&&i.$.horizontalHiddenItemsContainer.removeChild(e.closest("smart-splitter-item")),e.tabPosition=e._originalTabPosition||"top",delete e._originalTabPosition),i._setDockedItemsHeaderButtons(e),e.autoHide=e.allowToggle=e.maximized=e.minimized=e.collapsed=e.locked=!1,e.tabTextOrientation="horizontal",i.$.autoHideWindow.close(),i._insert(-1,e,"layout-"+t),i._setAutoHidePaddings(),delete i._dockingAutoHideTabItem}}_handleTabItemDocking(e){const t=this,i=(e.isInShadowDOM?e.getRootNode().host:e).closest("smart-tabs-window");let a;if(i){const o=t.$.autoHideWindow;if(!i.autoHide)return{tabsWindow:i,newTabsWindow:i};t._dockingAutoHideTabItem=!0,a=1===i.items.length?i:document.createElement("smart-tabs-window"),delete e._autoHideWindowSize,a.size="left"===o.resizeMode||"right"===o.resizeMode?o.offsetWidth:o.offsetHeight,i.removeChild(e),0!==i.items.length||a.id||(t.shadowRoot||t).contains(i)||i.parentElement.removeChild(i),a.tabCloseButtons=i.tabCloseButtons,a.dropPosition=i.dropPosition,a.draggable=e.draggable,a.floatable=e.floatable}return a||(a=document.createElement("smart-tabs-window")),t.hasAnimation||(a.animation="none"),a.min=30,a.opened=a.pinned=a.autoHide=!0,a.style.maxWidth=a.style.maxHeight="",a._originalTabPosition=i._originalTabPosition||void 0,a._originalTextOrientation=i._originalTextOrientation||void 0,a!==i&&(delete i._originalTabPosition,delete i._originalTextOrientation),a.label=e.label,a.appendChild(e),e=i,{tabsWindow:e,newTabsWindow:a}}_dockEventHandler(e){const t=this;let i=e.target;i._tabsWindow&&(i=i._tabsWindow),i.autoHide?t._dock(i.items[i.selectedIndex]):t._autoHide(i,t._items.indexOf(i)<(t._items.length-1)/2)}_documentDownHandler(e){const t=this;let i=e.originalEvent.target;if(i.shadowRoot)for(i=e.originalEvent.composedPath()[0];i;){if(i.closest(".smart-window")){i=i.closest(".smart-window");break}i=i.getRootNode().host}else i=i.closest(".smart-window");if(t.$.autoHideWindow._tabsWindow&&(!i||i!==t.$.autoHideWindow&&i!==t.$.autoHideWindow._tabsWindow)&&(t.$.autoHideWindow._tabsWindow.selectedIndex=null),t._dragDetails)return void t._cancelDragOperation();if(i instanceof Smart.TabsWindow&&t.draggable&&!t.disabled&&!(t._dragDetails||i.maximized||i.minimized||!Smart.Utilities.Core.isMobile&&1!==e.which||i._dragDetails&&"resize"===i._dragDetails.type&&i._dragDetails.started)){const a=e.originalEvent.target.shadowRoot?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(i=a.closest(".smart-header-section")||a.closest(".smart-tab-label-container"),t._dragDetails={},i&&i.classList.contains("smart-header-section")&&("simple"===t.snapMode||a.closest(".smart-buttons-container"))&&(i=void 0),t._dragDetails.windowFeedback=t.$.tabsWindowFeedback,i){const a=i.getRootNode()&&i.getRootNode().host?i.getRootNode().host:i;if(t._dragDetails.selectedTabsWindow=i.closest("smart-tabs-window")||(a?a.closest("smart-tabs-window"):void 0),t._dragDetails.selectedTabsWindow!==t.$.autoHideWindow)t._dragDetails.selectedItem=t._dragDetails.selectedTabsWindow.closest("smart-splitter-item");else if(t._dragDetails.selectedItem=t.$.autoHideWindow._tabsWindow.closest("smart-splitter-item"),!t.$.autoHideWindow._tabsWindow.draggable)return void(t._dragDetails=void 0);if(!t._dragDetails.selectedTabsWindow||!t._dragDetails.selectedTabsWindow.draggable||t._dragDetails.selectedTabsWindow.layout!==t)return void(t._dragDetails=void 0);if(t._dragDetails.offset={x:0,y:0},t._dragDetails.selectedTabLabel=i,t._dragDetails.x=e.pageX,t._dragDetails.y=e.pageY,t._dragDetails.selectedTabLabel.$.hasClass("smart-header-section")){if(!t._dragDetails.selectedItem&&t._dragDetails.selectedTabsWindow.pinned)return void(t._dragDetails=void 0);t._dragDetails.windowFeedback=t._dragDetails.selectedTabsWindow;const a=i.getBoundingClientRect();t._dragDetails.offset.x=e.clientX-a.left,t._dragDetails.offset.y=e.clientY-a.top}else{if(!t._dragDetails.selectedTabLabel.tab||void 0!==t._dragDetails.selectedTabLabel.tab.draggable&&!t._dragDetails.selectedTabLabel.tab.draggable)return void(t._dragDetails=void 0);1===t._dragDetails.selectedTabsWindow.items.length&&(t._dragDetails.windowFeedback=t._dragDetails.selectedTabsWindow,t._dragDetails.windowFeedback.floatable=t._dragDetails.selectedTabsWindow.items[0].floatable)}}t._items.map(e=>e.removeAttribute("ontop")),t._dragDetails.windowFeedback!==t.$.autoHideWindow&&t._dragDetails.windowFeedback.setAttribute("ontop","")}}_getClosestDockingLayout(e){return this._getClosestElement("smart-docking-layout",e)}_getClosestElement(e,t){const i=this;if(t&&i.shadowRoot&&t.getRootNode())for(let i=t.getRootNode().host;i;){if(!i.closest)return;if(i.closest(e))return i.closest(e);i=i.getRootNode()?i.getRootNode().host:void 0}}_documentMoveHandler(e){var t=Math.abs;const i=this,a=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target.shadowRoot?e.originalEvent.composedPath()[0]:e.originalEvent.target;if(!i.disabled&&i._dragDetails&&(!i._dragDetails||i._dragDetails.selectedTabsWindow)&&a&&!(5>=t(e.pageX-i._dragDetails.x)&&5>=t(e.pageY-i._dragDetails.y))){const t=document.scrollingElement||document.documentElement,o=t.scrollLeft,s=t.scrollTop,n=i._dragDetails.selectedTabsWindow;if(i._dragDetails.isInsideTheLayout=a.closest&&a.closest("smart-docking-layout")===i,!i._dragDetails.isInsideTheLayout&&i.shadowRoot&&(i._dragDetails.isInsideTheLayout=i._getClosestDockingLayout(a)),i._dragDetails.started=!0,i._dragDetails.windowFeedback===i.$.autoHideWindow){const e=i._dragDetails.selectedTabsWindow.getBoundingClientRect();let t;1===i.$.autoHideWindow._tabsWindow.items.length?t=i.$.autoHideWindow._tabsWindow:(t=document.createElement("smart-tabs-window"),t.draggable=!0,t.min=30,t.layout=i),t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.left=e.left+"px",t.style.top=e.top+"px",t.setAttribute("ontop",""),i._dragDetails.windowFeedback=t,i.$.autoHideWindow.$.addClass("no-transition"),i.$.autoHideWindow.close(),i.$.autoHideWindow.$.removeClass("no-transition")}if(i._setDragDetailsOnMove(a),i.$.autoHideWindow.close(),!i._dragDetails.windowFeedback.classList.contains("smart-tabs-window-feedback"))i._handleWindowOnDrag();else if(i._dragDetails._parentInfo||(i._dragDetails._parentInfo={closestItem:n,position:i._originalTabIndex||i._dragDetails.selectedTabLabel.tab.index},i._originalTabIndex=void 0),i._dragDetails.windowFeedback.parentElement!==document.body&&document.body.appendChild(i._dragDetails.windowFeedback),i._dragDetails.selectedItem){const e=i._dragDetails.selectedItem.closest("smart-splitter");!i._dragDetails.windowFeedback.size&&e&&(i._dragDetails.windowFeedback.size=i._dragDetails.selectedTabsWindow[e._measurements.size])}i._dragDetails.selectedTabLabel.classList.contains("smart-header-section")||i._dragDetails.windowFeedback.setAttribute("tabs-window-dragged",""),(i._dragDetails.windowFeedback.hasAttribute("tabs-window-dragged")||i._dragDetails.selectedTabsWindow===i.$.autoHideWindow||i._dragDetails._parentInfo&&"string"==typeof i._dragDetails._parentInfo.position)&&(i._dragDetails.windowFeedback.style.left=e.pageX-i._dragDetails.offset.x+"px",i._dragDetails.windowFeedback.style.top=e.pageY-i._dragDetails.offset.y+"px",i._setWindowFeedbackSize()),i._dragDetails.windowFeedback.opened=!0,document.activeElement!==i&&(i.focus(),window.scrollTo(o,s));const d=i._dragDetails.hoveredTabsWindow?a.closest(".smart-tabs-header-section"):void 0;i._dragDetails.hoveredTabArea=d?d:i._dragDetails.hoveredTabsWindow&&a.closest(".smart-tabs-content-section")?i._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabContentSection:i._dragDetails.hoveredTabsWindow,i.shadowRoot&&i._dragDetails.selectedTabsWindow===i._dragDetails.windowFeedback&&requestAnimationFrame(()=>{i._dragDetails&&i._dragDetails.windowFeedback.refreshTabHeader()}),i._setSnappingMarkers(e,d)}}_setDragDetailsOnMove(e){const t=this;let i;if(!t.hasAttribute("dragged")){t._originalBodyOverflow={overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY,overflow:document.body.style.overflow};const e=(document.scrollingElement||document.documentElement).scrollHeight>document.documentElement.clientHeight,a=(document.scrollingElement||document.documentElement).scrollWidth>document.documentElement.clientWidth;let o=t._dragDetails.selectedTabsWindow;if(document.body.style.overflow=document.body.style.overflowX=document.body.style.overflowY="",e&&!a?document.body.style.overflowX="hidden":a&&!e?document.body.style.overflowY="hidden":!a&&!e&&(document.body.style.overflow="hidden"),t._dragDetails.windowFeedback.$.hasClass("smart-tabs-window-feedback")||o===t.$.autoHideWindow){const e=t._dragDetails.selectedTabLabel.tab||t.$.autoHideWindow._tab;let i=t.$.tabsWindowFeedback;o===t.$.autoHideWindow&&(o=t.$.autoHideWindow._tabsWindow,i=t._dragDetails.windowFeedback,i.label=e.label,i.floatable=e.draggable,i.floatable=e.floatable),Smart.Utilities.Core.isMobile&&!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&(t._dragDetails.selectedTabLabel._lazyRemove=!0),e.parentElement&&o.removeChild(e),t._originalTabIndex=e.index,i.appendChild(e);const a=t._dragDetails.selectedTabsWindow;if(a===t.$.autoHideWindow)1<a._tabsWindow.items.length&&(i.tabPosition=a.tabPosition,i.tabTextOrientation=a._originalTextOrientation||a.tabTextOrientation);else{const e=a.autoHide;i.tabPosition=a._originalTabPosition||(e?"top":a.tabPosition),i.tabTextOrientation=a._originalTextOrientation||(e?"horizontal":a.tabTextOrientation)}if(e._autoHideWindowSize)i.size=e._autoHideWindowSize;else if(o.autoHide){const e="offset"+("top"===o.tabPosition||"bottom"===o.tabPosition?"Height":"Width");i.size=(o._autoHideWindow||o)[e]}}i=t._dragDetails.selectedTabsWindow.closest("smart-docking-layout"),!i&&t.shadowRoot&&(i=t._getClosestDockingLayout(t._dragDetails.selectedTabsWindow)),i||t._dragDetails.windowFeedback._originalPinnedState||(t._dragDetails.windowFeedback._originalPinnedState=t._dragDetails.windowFeedback.pinned),t._dragDetails.windowFeedback.pinned=!1,t.setAttribute("dragged","")}t._dragDetails.hoveredItem=e.closest("smart-splitter-item"),t.shadowRoot&&!t._dragDetails.hoveredItem&&(t._dragDetails.hoveredItem=t._getClosestElement("smart-splitter-item",e)),t._dragDetails.hoveredItem?(i=t._dragDetails.hoveredItem.closest("smart-docking-layout"),!i&&t.shadowRoot&&(i=t._getClosestDockingLayout(t._dragDetails.hoveredItem)),i&&i===t?t._dragDetails.hoveredTabsWindow=t._dragDetails.hoveredItem.querySelector("smart-tabs-window"):t._dragDetails.hoveredItem=t._dragDetails.hoveredTabsWindow=void 0):t._dragDetails.hoveredTabsWindow=e.closest("smart-tabs-window")||(e.getRootNode()&&e.getRootNode().host?e.getRootNode().host.closest("smart-tabs-window"):void 0),t._dragDetails.hoveredTabsWindow&&(i=t._dragDetails.hoveredTabsWindow.closest("smart-docking-layout"),!i&&t.shadowRoot&&(i=t._getClosestDockingLayout(t._dragDetails.hoveredTabsWindow)),i&&i!==t?t._dragDetails.hoveredTabsWindow=void 0:t._dragDetails.hoveredTabsWindow.bringToFront())}_documentDragStartHandler(e){const t=this;t._dragDetails&&e.preventDefault()}_documentSelectStartHandler(e){const t=this;t._dragDetails&&t._dragDetails.started&&e.preventDefault()}_documentUpHandler(e){const t=this,i=e.originalEvent||e,a=i.target.shadowRoot?i.composedPath()[0]:i.target;if(!t._dragDetails||t._dragDetails&&!t._dragDetails.started||t.disabled)return void delete t._dragDetails;t._noStateChangeFiring=!0,t.removeAttribute("dragged"),t._dragDetails.windowFeedback.removeAttribute("tabs-window-dragged"),t._dragDetails.windowFeedback.removeAttribute("ontop");let o=a.closest&&a.closest("smart-docking-layout");!o&&t.shadowRoot&&(o=t._getClosestDockingLayout(a)),e.ctrlKey&&(t._snapFeedback._position=o=void 0);const s=t._snapFeedback?t._snapFeedback._position:void 0;if(!o&&!s||o&&!t._dragDetails.hoveredTabArea&&!s)t._dropWindowOutsideLayout(e,s,o);else if(t._dragDetails.hoveredTabsWindow&&s){if(t._dragDetails.hoveredTabArea&&t._dragDetails.hoveredTabArea.classList.contains("smart-tabs-header-section")){let e,o=t._dragDetails.hoveredTabsWindow.itemLabels.length,s=a.closest(".smart-tab-label-container");s&&!s.$.hasClass("smart-add-new-tab")&&s.tab||(s=t._dragDetails.hoveredTabsWindow.itemLabels[o-1],e=!0);let n=t._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&t._dragDetails.windowFeedback.$.hasClass("smart-tabs-window-feedback")?[t._dragDetails.selectedTabLabel.tab]:[].slice.call(t._dragDetails.windowFeedback.items);let d;if(t._dragDetails.hoveredTabsWindow.autoHide){const e=t._dragDetails.hoveredTabsWindow.tabPosition;d=t._dragDetails.windowFeedback["offset"+("top"===e||"bottom"===e?"Height":"Width")]}for(let a=0;a<n.length;a++)n[a]._autoHideWindowSize=d||t._dragDetails.windowFeedback.size,t._dragDetails.windowFeedback.removeChild(n[a]),t._dragDetails.hoveredTabsWindow.insert(e?o:s.tab.index,{node:n[a]}),o=t._dragDetails.hoveredTabsWindow.items.length;t._dragDetails.targetWindow=t._dragDetails.hoveredTabsWindow}else t._dragDetails.targetWindow=t._handleItemNesting(),t._eventAlreadyFired=!0;t.$.autoHideWindow.close(),t._noStateChangeFiring=!1}if(t.shadowRoot){const e=t._dragDetails.targetWindow;setTimeout(()=>e.refreshTabHeader(),100)}t._endDrag()}_dropWindowOutsideLayout(e,t,i){const a=this;let o;if(!a.floatable||void 0!==a._dragDetails.windowFeedback.floatable&&!a._dragDetails.windowFeedback.floatable)return void a._cancelDragOperation(!0);if(a._dragDetails.windowFeedback.classList.contains("smart-tabs-window-feedback")){const t=a._dragDetails.windowFeedback.items[0];if(t&&void 0!==t.floatable&&!t.floatable)return void a._cancelDragOperation(!0);const i=a._dragDetails.selectedTabLabel.tab;let s=document.createElement("smart-tabs-window");a.hasAnimation||(s.animation="none"),s.opened=!0,s.label=i.label,a._dragDetails.windowFeedback.removeChild(i),a._dragDetails.selectedTabLabel.tab.$.removeClass("smart-visibility-hidden"),s.appendChild(a._dragDetails.selectedTabLabel.tab),s.style.left=e.pageX+"px",s.style.top=e.pageY+"px",s.style.maxWidth=s.style.maxHeight="",s.resizeMode=a._dragDetails.selectedTabsWindow.resizeMode,s.tabTextOrientation=a._dragDetails.windowFeedback.tabTextOrientation,s.tabPosition=a._dragDetails.windowFeedback.tabPosition,s.min=30,s.style.width=a._dragDetails.windowFeedback.style.width,s.style.height=a._dragDetails.windowFeedback.style.height,s.draggable=void 0===i.draggable||i.draggable,s.floatable=void 0===i.floatable||i.floatable,document.body.appendChild(s),s.pinned=s.autoHide=s.allowToggle=!1,a._noStateChangeFiring=!1,o=s}else a._dragDetails._parentInfo&&a._dragDetails._parentInfo.closestItem?(a._dragDetails.windowFeedback.parentElement!==document.body&&(a._dragDetails.windowFeedback.windowParent="body",document.body.appendChild(a._dragDetails.windowFeedback)),a._dragDetails.windowFeedback.style.maxWidth=a._dragDetails.windowFeedback.style.maxHeight="",a._dragDetails.windowFeedback.pinned=a._dragDetails.windowFeedback.allowToggle=a._dragDetails.windowFeedback.autoHide=!1,a._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&(a._dragDetails.windowFeedback.label=a._dragDetails.selectedTabLabel.tab.label)):!t&&!(a._dragDetails.selectedItem instanceof Smart.SplitterItem)&&a._dragDetails.selectedTabLabel.$.hasClass("smart-tab-label-container")&&a._returnItemToOrigin(a._dragDetails.windowFeedback),o=a._dragDetails.windowFeedback,o.locked=!1,a._dragDetails.selectedItem&&(a._noStateChangeFiring=!1);a.$.autoHideWindow.close(),i||(a._dragDetails.windowFeedback.pinned=!1),a._validateWindowPosition(o),a._dragDetails._parentInfo&&(o._parentInfo={closestItem:a._dragDetails._parentInfo.closestItem,position:a._dragDetails._parentInfo.position}),o.layout=a,a._dragDetails.targetWindow=o,o.resizeMode="both",a._setFloatingItemsHeaderButtons(o)}_endDrag(){const e=this,t=e._dragDetails.windowFeedback;if(e.$.tabsWindowFeedback.close(),0===t.$.tabsElement._tabs.length&&t.parentElement&&!t.$.hasClass("smart-tabs-window-feedback")&&t.parentElement.removeChild(t),(e.shadowRoot||e).contains(e._dragDetails.windowFeedback)||void 0===e._dragDetails.windowFeedback._originalPinnedState||(e._dragDetails.windowFeedback.pinned=e._dragDetails.windowFeedback._originalPinnedState,delete e._dragDetails.windowFeedback._originalPinnedState),e._originalBodyOverflow&&(document.body.style.overflow=e._originalBodyOverflow.overflow,document.body.style.eoverflowX=e._originalBodyOverflow.overflowX,document.body.style.overflowY=e._originalBodyOverflow.overflowY,delete e._originalBodyOverflow),e._dragDetails.targetWindow?(e._dragDetails.targetWindow.focus(),e._dragDetails.selectedTabsWindow&&e._dragDetails.selectedTabsWindow.removeAttribute("active")):e._dragDetails.windowFeedback.bringToFront(),e._dragDetails.started=!1,e._dragDetails.hoveredItem=e._dragDetails.hoveredTabsWindow=e._dragDetails.isInsideTheLayout=void 0,t.removeAttribute("dragged"),e._handleSnapping(),e._dragDetails.selectedTabsWindow&&delete e._dragDetails.selectedTabsWindow._ownerLayout,0===t.items.length&&((e.shadowRoot||e).contains(t)&&(t.opened=!1),t.$.hasClass("smart-tabs-window-feedback")&&e.$.container.appendChild(t)),!e._eventAlreadyFired&&!e._noStateChangeFiring){e._handleAutoSave();let t={item:e._dragDetails.targetWindow};t.type=-1<e._items.indexOf(e._dragDetails.targetWindow)?"dock":"float",e.$.fireEvent("stateChange",t)}e._noStateChangeFiring=e._eventAlreadyFired=void 0,e._dragDetails._parentInfo&&e._dragDetails._parentInfo.closestItem&&e._removeUnneccessaryItems(e._dragDetails._parentInfo.closestItem.closest("smart-splitter"));let i=e._getClosestDockingLayout(t);return t.closest("smart-docking-layout")||i?(t.style.top=t.style.left="",void delete e._dragDetails):void(t.top&&(t.style.top=t.top),t.left&&(t.style.left=t.left),e._dragDetails.selectedTabLabel&&e._dragDetails.selectedTabLabel._lazyRemove&&(e._dragDetails.selectedTabLabel.parentElement&&e._dragDetails.selectedTabLabel.parentElement.removeChild(e._dragDetails.selectedTabLabel),delete e._dragDetails.selectedTabLabel._lazyRemove),t._cancelDragging(),delete e._dragDetails)}_getTabItemContent(e){const t=e.isCompleted?e.$.content:e,i=document.createDocumentFragment();for(;t.firstChild;)i.appendChild(t.firstChild);return i}_getHeaderLabelDimensions(){var e=Math.max,t=Math.min;const i=this;if(!i._dragDetails||!i._dragDetails.hoveredTabsWindow)return;const a=i._dragDetails.hoveredTabsWindow.$.tabsElement,o="left"===a.tabPosition||"right"===a.tabPosition;let s,n,d=0,l=0;if(i._dragDetails.hoveredTabArea)s=i._dragDetails.hoveredTabArea.offsetWidth,n=i._dragDetails.hoveredTabArea.offsetHeight,d=i._dragDetails.hoveredTabArea.offsetLeft,l=i._dragDetails.hoveredTabArea.offsetTop;else if(0<a.$.tabStrip.children.length){const e=a.$.tabStrip.children[a.$.tabStrip.children.length-1];d=e.offsetLeft+(o?0:e.offsetWidth),l=e.offsetTop+(o?e.offsetHeight:0),s=e.offsetWidth,n=e.offsetHeight}i._dragDetails.hoveredTabArea=a.$.tabsHeaderSection;let r=0,m=0;"horizontal"===a.tabTextOrientation?r=a.$.scrollButtonNear.offsetWidth:m=a.$.scrollButtonNear.offsetHeight;const g=i._dragDetails.hoveredTabArea.getBoundingClientRect(),p=i._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabStrip,c=p.getBoundingClientRect(),h=c.left-g.left+g.left+d-p.scrollLeft-r,b=c.top-g.top+g.top+l-p.scrollTop-m,_=t(d-p.scrollLeft-r,0),w=t(l-p.scrollTop-m,0);return{width:t(c.width,e(0,s+_),e(0,c.left+c.width-h)),height:t(c.height,e(0,n+w),e(0,c.top+c.height-b)),top:b+window.pageYOffset-w,left:h+window.pageXOffset-_}}_handleAutoSave(){const e=this;e.autoSaveState&&e.saveState()}_handleAutoHiddenSplitterBars(){const e=this,t=e.$.itemsContainer.querySelectorAll(".auto-hide-left,.auto-hide-right, .auto-hide-top, .auto-hide-bottom");for(let e=0;e<t.length;e++)t[e].previousElementSibling instanceof Smart.SplitterBar?t[e].previousElementSibling.hide():t[e].nextElementSibling instanceof Smart.SplitterBar&&t[e].nextElementSibling.hide()}_handleItemPositionInserting(e,t,i){const a=this;e.autoHide||-1<i.indexOf("layout")?a._handleLayoutItemInserting(t,e,i):-1<i.indexOf("outside-")?a._handleOutsideItemInserting(t,e,i):(-1<i.indexOf("inside-")?a._handleInsideItemInserting(t,e,i):a._handleNormalItemInserting(t,e,i),a._handleAutoSave(),a.$.fireEvent("stateChange",{type:"dock",item:e}),a._setSplitterBarVisibility())}_handleInsideItemInserting(e,t,i){var a=Math.min;const o=this,s=document.createElement("smart-splitter-item"),n=document.createElement("smart-splitter-item");let d,l=e.closest("smart-splitter-item"),r=e.closest("smart-splitter"),m=o._items.indexOf(e);d=r&&1===r._items.length?r:document.createElement("smart-splitter"),d._isInShadowDOM=o.shadowRoot,d.autoFitMode="proportional",d.liveResize=o.liveResize,d.resizeStep=o.resizeStep,t.windowParent=null,s.appendChild(t),e.windowParent=null,i=i.replace("inside-",""),d.orientation="top"===i||"bottom"===i?"horizontal":"vertical";const g=l["horizontal"===d.orientation?"offsetHeight":"offsetWidth"]/2;if(d.parentElement?d.insertBefore(s,"top"===i||"left"===i?l:null):(n.appendChild(e),e.min&&(n.min=e.min),"top"===i||"left"===i?(d.appendChild(s),d.appendChild(n)):(d.appendChild(n),d.appendChild(s)),l.appendChild(d)),t.size){const e="string"==typeof t.size&&-1<t.size.indexOf("%");s.size=e?t.size:a(g,parseFloat(t.size))}s.max=t.max||"",s.min=t.min?t.min:30,s.locked=t.locked||!1,s.collapsible=t.collapsible||!1,s.collapsed=t.collapsed||!1,("bottom"===i||"right"===i)&&(m=a(m+1,o._items.length)),t.pinned=!0,t.autoHide=t.allowToggle=t.maximized=t.minimized=t.collapsed=!1,t._originalTabPosition?(t.tabPosition=t._originalTabPosition,delete t._originalTabPosition):t.tabPosition="top",t._originalTextOrientation?(t.tabTextOrientation=t._originalTextOrientation,delete t._originalTextOrientation):t.tabTextOrientation="horizontal",o._items.splice(m,0,t),o._handleAutoHiddenSplitterBars()}_handleLayoutItemInserting(e,t,i){const a=this,o=document.createElement("smart-splitter-item"),s="bottom"===i||"top"===i?"offsetHeight":"offsetWidth";if(t.size||(t.size=t[s]),i=i.replace("layout-",""),o.size=t.size||"",o.max=t.max||"",o.min=t.min||"",o.locked=t.locked||!1,o.collapsible=t.collapsible||!1,o.collapsed=t.collapsed||!1,o.size&&!a._dockingAutoHideTabItem&&(o.size=Math.min(a[s]/2,parseFloat(t.size))),"horizontal"===a.$.itemsContainer.orientation&&("right"===i||"left"===i)||"vertical"===a.$.itemsContainer.orientation&&("top"===i||"bottom"===i)){let e,s=a.$.itemsContainer.orientation;const n=a.$.itemsContainer,d=[].slice.call(n._items),l=function(e,t){n.appendChild(e),n.insertBefore(t,"right"===i||"bottom"===i?null:e)};t.windowParent=null,o.appendChild(t),d.map(e=>e.size=e[n._measurements.size]);const r="right"===i||"bottom"===i;r?a._items.push(t):a._items.splice(0,0,t),n.removeAll(),n.orientation="top"===i||"bottom"===i?"horizontal":"vertical";const m=n[n._measurements.size]-o.size;if(1<d.length){const t=document.createElement("smart-splitter");t._isInShadowDOM=a.shadowRoot,t.autoFitMode="end",t.orientation=s,t.liveResize=a.liveResize,t.resizeStep=a.resizeStep,e=document.createElement("smart-splitter-item"),e.min=30,e.appendChild(t),e.size=m,l(e,o);for(let e=0;e<d.length;e++)t.appendChild(d[e]);t.autoFitMode="proportional"}else d[0].size=m,a._dockingAutoHideTabItem&&(n.autoFitMode="end"),l(d[0],o),n.autoFitMode="proportional";a._handleAutoHiddenSplitterBars(),a._handleAutoSave(),a.$.fireEvent("stateChange",{type:"dock",item:t}),a._setSplitterBarVisibility()}else{const e=-1<i.indexOf("left")||-1<i.indexOf("top")?a._items.filter(e=>e.opened)[0]:void 0;return t.windowParent=null,o.appendChild(t),a.insertBefore(o,e,a.$.itemsContainer),!0}}_handleNormalItemInserting(e,t,i){let a=e.closest("smart-splitter-item");const o=this,s=e.closest("smart-splitter"),n=document.createElement("smart-splitter-item"),d="right"===i||"bottom"===i?s._items.indexOf(a)+1:s._items.indexOf(a);let l=o._items.indexOf(e);t.windowParent=null,n.appendChild(t),n.size=t.size||"",n.min=t.min||"",s.insert(d,n),("bottom"===i||"right"===i)&&(l=Math.min(l+1,o._items.length)),t.pinned=!0,t.locked=!1,t.autoHide=t.allowToggle=t.maximized=t.minimized=t.collapsed=!1,t._originalTabPosition?(t.tabPosition=t._originalTabPosition,delete o._originalTabPosition):t.tabPosition="top",t._originalTextOrientation?(t.tabTextOrientation=t._originalTextOrientation,delete t._originalTextOrientation):t.tabTextOrientation="horizontal",o._items.splice(l,0,t),o._handleAutoHiddenSplitterBars()}_handleOutsideItemInserting(e,t,i){const a=this,o=document.createElement("smart-splitter-item");let s=e.closest("smart-splitter");if(s||(s=a.$.itemsContainer),o.size=t.size||"",o.max=t.max||"",o.min=t.min||"",o.locked=t.locked||!1,o.collapsible=t.collapsible||!1,o.collapsed=t.collapsed||!1,s!==a.$.itemsContainer){let n=s.closest("smart-splitter-item");const d=document.createElement("smart-splitter"),l=document.createElement("smart-splitter-item");if(d._isInShadowDOM=a.shadowRoot,i=i.replace("outside-",""),d.autoFitMode="proportional",d.liveResize=a.liveResize,d.resizeStep=a.resizeStep,t.windowParent=null,o.appendChild(t),l.min=30,l.appendChild(s),d.orientation="top"===i||"bottom"===i?"horizontal":"vertical",n.appendChild(d),"right"===i||"bottom"===i?(d.appendChild(l),d.appendChild(o),a._items.splice(a._items.indexOf(e)+1,0,t)):(d.appendChild(o),d.appendChild(l),a._items.splice(a._items.indexOf(e),0,t)),!o.size)o.size=d[d._measurements.size]/2;else{const e=o.size;o.size="",o.size=e}a._handleAutoHiddenSplitterBars(),a._handleAutoSave(),a.$.fireEvent("stateChange",{type:"dock",item:t}),a._setSplitterBarVisibility()}else return t.windowParent=null,o.appendChild(t),a.insertBefore(o,-1<i.indexOf("left")||-1<i.indexOf("top")?a._items[0]:void 0,a.$.itemsContainer),!0}_handleLayout(){const e=this;if(e._items=[],"string"==typeof e.layout&&(e.layout=JSON.parse(e.layout)),null!==e.layout&&Array.isArray(e.layout))return void e._createItemsFromArray(e.layout);const t=Array.from(e.$.itemsContainer.children);e.$.itemsContainer.innerHTML="";for(let a=0;a<t.length;a++){"Smart-TABS-WINDOW"!==t[a].tagName&&t[a].parentElement.removeChild(t[a]),t[a].layout=e;const i=document.createElement("smart-splitter-item");i.appendChild(t[a]),e.$.itemsContainer.appendChild(i),e._items.push(t[a])}}_handleSnapping(e){const t=this;"simple"===t.snapMode?t._handleSimpleSnapping(e):t._handleAdvancedSnapping()}_handleAdvancedSnapping(){const e=this;if(!e._dragDetails)return;if(e._snapFeedback&&!e._dragDetails.hoveredTabsWindow&&(e._snapFeedback._position=void 0,e._snapFeedback.areaHighlighter&&e._snapFeedback.areaHighlighter.parentElement&&e._snapFeedback.areaHighlighter.parentElement.removeChild(e._snapFeedback.areaHighlighter),e._snapFeedback.headerHighlighter&&e._snapFeedback.headerHighlighter.parentElement&&e._snapFeedback.headerHighlighter.parentElement.removeChild(e._snapFeedback.headerHighlighter),!e._dragDetails.hoveredItem)){if(e._snapFeedback.innerSnapElement&&e._snapFeedback.innerSnapElement.parentElement&&e._snapFeedback.innerSnapElement.parentElement.removeChild(e._snapFeedback.innerSnapElement),e._snapFeedback.outherSnapElement&&!e._dragDetails.isInsideTheLayout){const t=[].slice.call(e.$.container.children);for(let a=0;a<t.length;a++)-1<t[a].className.indexOf("smart-docking-layout-snap")&&e._snapFeedback.outherSnapElement.appendChild(t[a])}return}if(e._snapFeedback||(e._snapFeedback={innerSnapElement:document.createElement("div"),outherSnapElement:document.createElement("div"),areaHighlighter:document.createElement("div"),headerHighlighter:document.createElement("div")},e._snapFeedback.innerSnapElement.classList.add("smart-docking-layout-snap"),e._snapFeedback.areaHighlighter.classList.add("smart-docking-layout-snap-highlighter"),e._snapFeedback.headerHighlighter.classList.add("smart-docking-layout-snap-highlighter-header"),e._snapFeedback.innerSnapElement.innerHTML=`
                            <div>
                                <div class="top">
                                    <div><div></div></div>
                                </div>
                            </div>
                            <div>
                                <div class="left">
                                    <div><div></div></div>
                                </div>
                                <div class="center">
                                    <div><div></div></div>
                                </div>
                                <div class="right">
                                    <div><div></div></div>
                                </div>
                            </div>
                            <div>
                                <div class="bottom">
                                    <div><div></div></div>
                                </div>
                            </div>`,e._snapFeedback.outherSnapElement.innerHTML=`
                            <div class="smart-docking-layout-snap layout-top">
                                <div><div></div></div>
                            </div>
                            <div class="smart-docking-layout-snap layout-left">
                                <div><div></div></div>
                            </div>
                            <div class="smart-docking-layout-snap layout-right">
                                <div><div></div></div>
                            </div>
                            <div class="smart-docking-layout-snap layout-bottom">
                                <div><div></div></div>
                            </div>`),e._snapFeedback.areaHighlighter.parentElement&&(e._snapFeedback.areaHighlighter.removeAttribute("position"),e._snapFeedback.areaHighlighter.classList.remove("smart-hidden")),e._snapFeedback.areaHighlighter.style.width="",e._snapFeedback.areaHighlighter.style.height="",e._snapFeedback._position=e._dragDetails.hoveredItem&&!(e._dragDetails.hoveredItem instanceof Smart.SplitterItem)?e._dragDetails.hoveredItem.className:"",e._dragDetails.hoveredItem&&-1<e._dragDetails.hoveredItem.className.indexOf("layout-")){e._snapFeedback._position=e._snapFeedback._position.replace("smart-docking-layout-snap ",""),e._snapFeedback.areaHighlighter.setAttribute("position",e._snapFeedback._position);const t=e._dragDetails.selectedTabsWindow;return void(-1<t.dropPosition.indexOf("all")||-1<t.dropPosition.indexOf(e._snapFeedback._position)?(e._dragDetails.hoveredItem.setAttribute("show",""),e.$.container.appendChild(e._snapFeedback.areaHighlighter),e._dragDetails.hoveredTabsWindow=!0,-1<["layout-left","layout-right"].indexOf(e._snapFeedback._position)?e._snapFeedback.areaHighlighter.style.width=e._dragDetails.windowFeedback.style.width||e._dragDetails.windowFeedback.offsetWidth+"px":-1<["layout-top","layout-bottom"].indexOf(e._snapFeedback._position)&&(e._snapFeedback.areaHighlighter.style.height=e._dragDetails.windowFeedback.style.height||e._dragDetails.windowFeedback.offsetHeight+"px")):(e._dragDetails.hoveredItem.removeAttribute("show"),e._snapFeedback._position=void 0))}let t=e._dragDetails.hoveredTabsWindow?e._dragDetails.hoveredTabsWindow.dropPosition:["all"];if(0===t.length&&(t=["all"]),e._dragDetails.hoveredTabsWindow instanceof Smart.TabsWindow&&e._dragDetails.hoveredTabArea&&e._dragDetails.hoveredTabArea.closest(".smart-tabs-header-section")&&(-1<t.indexOf("all")||-1<t.indexOf("header"))){e._dragDetails.hoveredTabArea=e._dragDetails.hoveredTabArea.classList.contains("smart-tab-label-container")?e._dragDetails.hoveredTabArea:void 0;const t=e._getHeaderLabelDimensions(),i=e._snapFeedback.headerHighlighter;i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.top=t.top+"px",i.style.left=t.left+"px",i.classList.remove("smart-hidden"),i.parentElement!==document.body&&document.body.appendChild(i),e._snapFeedback._position="header"}else e._snapFeedback.headerHighlighter.style.width=e._snapFeedback.headerHighlighter.style.height=0;const i=e._snapFeedback.innerSnapElement.closest("smart-splitter-item");if(e._dragDetails.hoveredItem instanceof Smart.SplitterItem){if(i&&e._dragDetails.hoveredItem!==i&&i.removeChild(e._snapFeedback.innerSnapElement),0>e._dragDetails.hoveredItem.className.indexOf("auto-hide")){const a=e._snapFeedback.innerSnapElement.querySelectorAll(".top, .bottom, .left, .right, .center");for(let e=0;e<a.length;e++)-1<t.indexOf(a[e].className)||0===t.indexOf("all")?a[e].setAttribute("show",""):a[e].removeAttribute("show");e._snapFeedback.innerSnapElement.classList.remove("smart-hidden"),e._dragDetails.hoveredItem.contains(e._snapFeedback.innerSnapElement)||e._dragDetails.hoveredItem.appendChild(e._snapFeedback.innerSnapElement)}const a=[].slice.call(e._snapFeedback.outherSnapElement.children),o=e._dragDetails.selectedTabsWindow;let s;for(let t=0;t<a.length;t++)s=a[t].className.replace("smart-docking-layout-snap ",""),a[t].classList.remove("smart-hidden"),-1<o.dropPosition.indexOf("all")||-1<o.dropPosition.indexOf(s)?a[t].setAttribute("show",""):a[t].removeAttribute("show"),e.$.container.appendChild(a[t])}if(!e._snapFeedback._position||0>t.indexOf("all")&&0>t.indexOf(e._snapFeedback._position))return void(e._snapFeedback._position=e._dragDetails.hoveredTabArea=void 0);if("center"===e._snapFeedback._position&&0<e._items.filter(e=>e.opened).length&&(e._dragDetails.hoveredTabArea=e._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabsHeaderSection),-1<["left","right"].indexOf(e._snapFeedback._position)?e._snapFeedback.areaHighlighter.style.width=e._dragDetails.windowFeedback.style.width||e._dragDetails.windowFeedback.offsetWidth+"px":-1<["top","bottom"].indexOf(e._snapFeedback._position)&&(e._snapFeedback.areaHighlighter.style.height=e._dragDetails.windowFeedback.style.height||e._dragDetails.windowFeedback.offsetHeight+"px"),e._snapFeedback.areaHighlighter.setAttribute("position",e._snapFeedback._position),"header"===e._snapFeedback._position)e._dragDetails.hoveredTabsWindow.$.tabsElement.$.tabContentSection.appendChild(e._snapFeedback.areaHighlighter);else{const t=e._dragDetails.hoveredTabsWindow.closest("smart-splitter").orientation;(("left"===e._snapFeedback._position||"right"===e._snapFeedback._position)&&"horizontal"===t||("top"===e._snapFeedback._position||"bottom"===e._snapFeedback._position)&&"vertical"===t)&&(e._snapFeedback._position="inside-"+e._snapFeedback._position),e._dragDetails.hoveredItem.closest("smart-splitter-item").appendChild(e._snapFeedback.areaHighlighter)}}_handleSimpleSnapping(e){var t=Math.min;const a=this;if(!e)return a._dragDetails&&(a._dragDetails.hoveredTabsWindow=a._dragDetails.hoveredTabArea=void 0),void(a._snapFeedback&&(a._snapFeedback._position=void 0,a._snapFeedback.parentElement&&a._snapFeedback.classList.add("smart-visibility-hidden")));a._snapFeedback||(a._snapFeedback=document.createElement("div"),a._snapFeedback.addEventListener("transitionend",function(){a._snapFeedback.classList.contains("smart-visibility-hidden")&&a._snapFeedback.parentElement&&a._snapFeedback.parentElement.removeChild(a._snapFeedback)}));for(let t=0;t<a._snapFeedback.classList.length;t++)-1<a._snapFeedback.classList[t].indexOf("smart-docking-snap-")&&a._snapFeedback.classList.remove(a._snapFeedback.classList[t]);a._snapFeedback._position=e,e=e.replace("inside-",""),a._snapFeedback.classList.add("smart-docking-snap-"+e+"-feedback"),a._snapFeedback.classList.remove("smart-visibility-hidden");let i=0===e.indexOf("layout")?a._dragDetails.selectedTabsWindow.dropPosition:a._dragDetails.hoveredTabsWindow.dropPosition;0===i.length&&(i=["all"]),-1<i.indexOf("all")||-1<i.indexOf(e)?a._snapFeedback.removeAttribute("disabled"):(a._snapFeedback.setAttribute("disabled",""),a._snapFeedback._position=void 0);let o,s,n,d,l;const r=a.getBoundingClientRect(),m=getComputedStyle(a._dragDetails.hoveredTabsWindow.$.contentSection),g=parseFloat(m.getPropertyValue("padding-left")||0),p=parseFloat(m.getPropertyValue("padding-right")||0),c=parseFloat(m.getPropertyValue("padding-top")||0),h=parseFloat(m.getPropertyValue("padding-bottom")||0),b=a.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-left")[0],_=a.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-top")[0];switch(a._snapFeedback.style.display="",e){case"header":{const e=a._getHeaderLabelDimensions();o=e.width,s=e.height,n=e.top,d=e.left,o&&s||(a._snapFeedback.style.display="none");break}case"left":case"right":l=a._dragDetails.hoveredTabArea.getBoundingClientRect(),s=a._dragDetails.hoveredTabArea.offsetHeight,o=a._dragDetails.hoveredTabArea.offsetWidth/2,n=l.top+window.pageYOffset,d=l.left+("right"===e?a._dragDetails.hoveredTabArea.offsetWidth/2:0)+window.pageXOffset;break;case"top":case"bottom":l=a._dragDetails.hoveredTabArea.getBoundingClientRect(),s=a._dragDetails.hoveredTabArea.offsetHeight/2,o=a._dragDetails.hoveredTabArea.offsetWidth,n=l.top+window.pageYOffset+("bottom"===e?a._dragDetails.hoveredTabArea.offsetHeight/2:0),d=l.left+window.pageXOffset;break;case"layout-left":case"layout-right":{a._snapFeedback.parentElement&&void 0===a._snapFeedback.maxWidth&&(a._snapFeedback.maxWidth=parseFloat(getComputedStyle(a._snapFeedback).getPropertyValue("max-width"))||0),o=.07*a.$.itemsContainer.offsetWidth-(g+p),a._snapFeedback.maxWidth&&(o=t(a._snapFeedback.maxWidth,o)),s=a.$.itemsContainer.offsetHeight-(c+h),n=r.top+window.pageYOffset+c+(_?_.offsetHeight:0),d=r.left+window.pageXOffset+("layout-left"===e?g:0)+(b?b.offsetWidth:0)+("layout-right"===e?a.$.itemsContainer.offsetWidth-o-p:0);break}case"layout-top":case"layout-bottom":a._snapFeedback.parentElement&&void 0===a._snapFeedback.maxHeight&&(a._snapFeedback.maxHeight=parseFloat(getComputedStyle(a._snapFeedback).getPropertyValue("max-height"))||0),s=.07*a.$.itemsContainer.offsetHeight-(c+h),a._snapFeedback.maxHeight&&(s=t(a._snapFeedback.maxHeight,s)),o=a.$.itemsContainer.offsetWidth-(g+p),n=r.top+window.pageYOffset+(_?_.offsetHeight:0)+("layout-bottom"===e?a.$.itemsContainer.offsetHeight-s+c:c),d=r.left+window.pageXOffset+g+(b?b.offsetWidth:0);}a._snapFeedback.style.height=s+"px",a._snapFeedback.style.width=o+"px",a._snapFeedback.style.left=d+"px",a._snapFeedback.style.top=n+"px",a._snapFeedback._position||(a._dragDetails.hoveredTabArea=void 0),a._snapFeedback.parentElement||document.body.appendChild(a._snapFeedback)}_handleItemNesting(){const e=this;let t=e._dragDetails.windowFeedback;if(t.classList.contains("smart-tabs-window-feedback")){let i=document.createElement("smart-tabs-window");const a=e._dragDetails.selectedTabLabel.tab;i.min=30,i.opened=i.pinned=!0,i.headerPosition=e._dragDetails.selectedTabsWindow.headerPosition,e._dragDetails.selectedTabsWindow.autoHide?(i.tabTextOrientation=e._dragDetails.selectedTabsWindow._originalTextOrientation||"horizontal",i.tabPosition=e._dragDetails.selectedTabsWindow._originalTabPosition||"top"):(i.tabPosition=e._dragDetails.selectedTabsWindow.tabPosition,i.tabTextOrientation=e._dragDetails.selectedTabsWindow.tabTextOrientation),e.hasAnimation||(i.animation="none"),i.size=-1<e._snapFeedback._position.indexOf("top")||-1<e._snapFeedback._position.indexOf("bottom")?parseFloat(t.style.height)||t.offsetHeight:parseFloat(t.style.width)||t.offsetWidth,i.label=a.label,i.id="",e._dragDetails.windowFeedback.removeChild(a),i.appendChild(a),i.style.left=i.style.top="",i.draggable=void 0===a.draggable||a.draggable,i.floatable=void 0===a.floatable||a.floatable,t=i}else{const i=t.context;t.context=t,t.windowParent=null,t.context=i,t.size=-1<e._snapFeedback._position.indexOf("top")||-1<e._snapFeedback._position.indexOf("bottom")?parseFloat(t.style.height)||t.offsetHeight:parseFloat(t.style.width)||t.offsetWidth,t.style.top=t.style.left=t.style.width=t.style.height="",t.pinned=!0,t._originalTabPosition||(t._originalTabPosition=t.tabPosition)}return e._insert(e._items.indexOf(e._dragDetails.hoveredTabsWindow),t,e._snapFeedback._position),t}_handleWindowOnDrag(){const e=this;if(e._dragDetails.windowFeedback.hasAttribute("dragged"))return;let t=e._dragDetails.selectedItem,i=e._dragDetails.selectedTabsWindow,a=i.closest("smart-splitter");if(e._setWindowFeedbackSize(),i===e.$.autoHideWindow&&!e._dragDetails._parentInfo)e._dragDetails._parentInfo={},1<i._tabsWindow.items.length?(e._dragDetails._parentInfo.closestItem=i._tabsWindow,e._dragDetails._parentInfo.position=e.$.autoHideWindow._tab.index):(e._dragDetails._parentInfo.closestItem=e.$.itemsContainer,e._dragDetails._parentInfo.position=i._tabsWindow.tabPosition,e._dragDetails.windowFeedback.headerButtons=e.$.autoHideWindow._tabsWindow.headerButtons,e._noStateChangeFiring=!0,e.undock(e._dragDetails.windowFeedback)),e._originalTabIndex=void 0;else{if(a&&a!==e.$.itemsContainer&&1===a._items.length)for(;1===a._items.length&&a!==e.$.itemsContainer;)a=a.parentElement.closest("smart-splitter"),t=t.parentElement.closest("smart-splitter-item");if(!e._dragDetails._parentInfo)if(e._dragDetails._parentInfo={},i.closest("smart-docking-layout")!==e&&e._getClosestDockingLayout(i)!==e)e._dragDetails._parentInfo.position={top:i.offsetTop,left:i.offsetLeft};else if(i.autoHide)e._dragDetails._parentInfo.closestItem=e.$.itemsContainer,e._dragDetails._parentInfo.position=i.tabPosition,i._originalTabPosition&&(i.tabPosition=i._originalTabPosition),i._originalTextOrientation&&(i.tabTextOrientation=i._originalTextOrientation);else{const i=a._items.indexOf(t),o=a._items.length;1===o?(e._dragDetails._parentInfo.position="horizontal"===a.orientation?"top":"left",e._dragDetails._parentInfo.closestItem=void 0):(0===i?(e._dragDetails._parentInfo.position="horizontal"===a.orientation?"top":"left",e._dragDetails._parentInfo.closestItem=a._items[i+1].getElementsByTagName("smart-tabs-window")[0]):(e._dragDetails._parentInfo.position="horizontal"===a.orientation?"bottom":"right",e._dragDetails._parentInfo.closestItem=a._items[i-1].getElementsByTagName("smart-tabs-window")[0]),e._dragDetails._parentInfo.closestItemSize=e._dragDetails._parentInfo.closestItem[a._measurements.size],a===e._dragDetails._parentInfo.closestItem.closest("smart-splitter")?2===a._items.length&&(e._dragDetails._parentInfo.position="inside-"+e._dragDetails._parentInfo.position):a===e.$.itemsContainer?e._dragDetails._parentInfo.position="layout-"+e._dragDetails._parentInfo.position:e._dragDetails._parentInfo.position="outside-"+e._dragDetails._parentInfo.position)}}if(a)e._dragDetails.windowFeedback.size=e._dragDetails.windowFeedback[a._measurements.size];else if(i===e.$.autoHideWindow){const t=e.$.autoHideWindow._tabsWindow.tabPosition;e._dragDetails.windowFeedback.size=e.$.autoHideWindow["offset"+("top"===t||"bottom"===t?"Height":"Width")]}e._dragDetails.windowFeedback.setAttribute("dragged",""),e._dragDetails.windowFeedback.parentElement!==document.body&&(e._dragDetails.windowFeedback.windowParent="body",document.body.appendChild(e._dragDetails.windowFeedback)),("advanced"!==e.snapMode&&"none"===e._dragDetails.windowFeedback.tabPosition||e._dragDetails.windowFeedback.autoHide)&&(e._dragDetails.windowFeedback.tabPosition=e._dragDetails.windowFeedback._originalTabPosition||"top"),e._dragDetails.windowFeedback.autoHide=!1,e._dragDetails.windowFeedback.allowToggle=!1;const o=e._items.indexOf(e._dragDetails.windowFeedback);-1<o&&e._items.splice(o,1),t&&t.parentElement&&(0===e._items.filter(e=>e.opened).length&&!e.$.placeholderItem.parentElement&&(-1<e.$.itemsContainer._items[0].className.indexOf("auto-hide")?e.$.itemsContainer.insert(1,e.$.placeholderItem):e.$.itemsContainer.insert(0,e.$.placeholderItem)),a?(a.removeChild(t),e._dragDetails.initialSplitterOrientation="horizontal"===a.orientation,e._removeUnneccessaryItems(a)):i===e.$.autoHideWindow&&0===e.$.autoHideWindow._tabsWindow.items.length&&e.$.autoHideWindow._tabsWindow.closest("smart-splitter").removeChild(t),e._setAutoHidePaddings())}_setWindowFeedbackSize(){const e=this,t=e._dragDetails.selectedTabsWindow;if(!e._dragDetails._isWindowFeedbackSizeSet){let i,a;t.autoHide&&t._autoHideWindow?"top"===t.tabPosition||"bottom"===t.tabPosition?(i=t.offsetWidth+"px",a=t._autoHideWindow.offsetHeight+"px"):(i=t._autoHideWindow.offsetWidth+"px",a=t.offsetHeight+"px"):(i=t.style.width||t.offsetWidth+"px",a=t.style.height||t.offsetHeight+"px"),e._dragDetails.windowFeedback.style.width=i,e._dragDetails.windowFeedback.style.height=a,e._dragDetails._isWindowFeedbackSizeSet=!0}}_insert(e,t,i){const a=this;if("number"!=typeof e)return void a.error(a.localize("invalidIndex",{elementType:a.nodeName.toLowerCase(),method:arguments[3]||"insert"}));if("object"==typeof t&&!(t instanceof HTMLElement))t=a._createTabsWindowFromObject(t);else if("string"==typeof t)t=a._getItemById(t);else if(t instanceof Smart.TabItem){let e=t.closest("smart-tabs-window");if(!e&&a.shadowRoot&&t.getRootNode()&&t.getRootNode().host&&(e=t.getRootNode().host.closest("smart-tabs-window")),e&&e.autoHide)return void a._dock(e,i);t=a._createTabsWindowFromObject({label:t.label,items:[{label:t.label,content:t.content}]})}if(!t||!(t instanceof Smart.TabsWindow))return void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:arguments[3]||"insert"}));if((a.shadowRoot||a).contains(t)&&t.autoHide)return void a._dock(t,i);if(i&&-1<i.indexOf("layout")){const t=a._items.filter(e=>e.opened);e=0<t?-1<i.indexOf("left")||-1<i.indexOf("top")?0:t[t.length-1]:0}let o=a._items[e];a._items[e]&&!a._items[e].opened&&(o=a._items.filter(e=>e.opened)[0]),0===a._items.length&&(a.$.itemsContainer.orientation=-1<i.indexOf("left")||-1<i.indexOf("right")?"vertical":"horizontal"),t.style.top=t.style.left="",t.style.width=t.style.height="",t.opened=!0,t.pinned=!0;const s=t.closest("smart-splitter-item");if(!o){if(a.insertBefore(t,o||null),s){let e=s.closest("smart-splitter");!e&&a.shadowRoot&&s.getRootNode()&&s.getRootNode().host&&(e=s.getRootNode().host.closest("smart-splitter")),e&&e.removeChild(s)}return}if(delete t._parentInfo,t.autoHide&&(a.$.verticalHiddenItemsContainer.contains(t)?a.$.verticalHiddenItemsContainer.removeChild(t.closest("smart-splitter-item")):a.$.horizontalHiddenItemsContainer.contains(t)&&a.$.horizontalHiddenItemsContainer.removeChild(t.closest("smart-splitter-item"))),i?a._handleItemPositionInserting(t,o,i):a.insertBefore(t,o||null),s){const e=s.closest("smart-splitter");e&&e.removeChild(s)}if(t.autoHide)a._autoHide(t,i);else{const e=document.scrollingElement||document.documentElement,i=e.scrollLeft,a=e.scrollTop;t.focus(),window.scrollTo(i,a)}0<a._items.filter(e=>e.opened).length&&a.$.placeholderItem.parentElement&&a.$.itemsContainer.removeChild(a.$.placeholderItem),t.layout=a,t.resizeMode="none",t.minimized=!1,t.maximized=!1,a._setDockedItemsHeaderButtons(t)}_itemsContainerCloseHandler(e){const t=this;if(e.target instanceof Smart.Tabs){const i=e.target;return void(0===i._tabs.length&&t.removeChild(i.closest("smart-tabs-window")))}if(e.target instanceof Smart.TabsWindow){const i=e.target.closest("smart-splitter-item"),a=i.closest("smart-splitter");a&&(a.removeChild(i),t._removeUnneccessaryItems(a)),e.target.close(),0!==t._items.filter(e=>e.opened).length||t.$.placeholderItem.parentElement||t.$.itemsContainer.appendChild(t.$.placeholderItem)}}_itemsContainerAutoHideHandler(e){const t=this,i=e.detail.button,a=i.closest("smart-tabs-window")||i.getRootNode().host;if(a){const e=a.closest("smart-splitter-item");if(e){const i=a.closest("smart-splitter");if(i){const o=i.items,s="horizontal"===i.orientation,n=o.indexOf(e)>=o.length/2;s?n?t.autoHideBottom(a):t.autoHideTop(a):n?t.autoHideRight(a):t.autoHideLeft(a)}}}}_itemsContainerMenuHandler(e){const t=this,i=t.$.menu,a=t.getBoundingClientRect(),o=e.detail.button.getBoundingClientRect();i.open(o.left-a.left,o.top-a.top),t._menuOpenButton=e.detail.button}_itemsContainerResizeHandler(){const e=this,t=event.target._items?event.target._items[event.detail.firstItem.index]:void 0;e._handleAutoSave(),e.$.fireEvent("stateChange",{type:"resize",item:t})}_keyDownHandler(e){const t=this;if(!t.disabled&&t.hasAttribute("dragged")&&t._snapFeedback)if(e.preventDefault(),"Control"!==e.key)"Escape"===e.key&&t._cancelDragOperation();else if("advanced"===t.snapMode){for(let e in t._snapFeedback)if(t._snapFeedback[e]instanceof HTMLElement){if("outherSnapElement"==e){const e=t.$.container.children;for(let t=0;t<e.length;t++)-1<e[t].className.indexOf("smart-docking-layout-snap")&&e[t].classList.add("smart-hidden");continue}t._snapFeedback[e].classList.add("smart-hidden")}}else t._snapFeedback.classList.add("smart-hidden")}_keyUpHandler(e){const t=this;if(!t.disabled&&"Control"===e.key&&t.hasAttribute("dragged")&&t._snapFeedback)if(e.preventDefault(),"advanced"===t.snapMode){for(let e in t._snapFeedback)if(t._snapFeedback[e]instanceof HTMLElement){if("outherSnapElement"==e){const e=t.$.container.children;for(let t=0;t<e.length;t++)-1<e[t].className.indexOf("smart-docking-layout-snap")&&e[t].classList.remove("smart-hidden");continue}t._snapFeedback[e].classList.remove("smart-hidden")}t._handleSnapping()}else t._snapFeedback.classList.remove("smart-hidden")}_loadState(e){const t=this;t._createItemsFromArray(e,!0)}_removeAll(e){function t(e){const t=e._items;if(t)for(let a=0;a<t.length;a++)t[a].$.hasClass("smart-docking-layout-item-holder")||e.removeChild(t[a])}const i=this;i.$.itemsContainer.removeAll(),t(i.$.horizontalHiddenItemsContainer),t(i.$.verticalHiddenItemsContainer),i._items=[],e||i.$.itemsContainer.appendChild(i.$.placeholderItem)}_removeUnneccessaryItems(e){if(e){const t=this;for(let i;e._items&&0===e._items.length&&e!==t.$.itemsContainer;)(i=e.closest("smart-splitter-item")).removeChild(e),e=i.closest("smart-splitter"),e.removeChild(i)}}_returnItemToOrigin(e){const t=this;if(e&&t._dragDetails){let a=t._dragDetails._parentInfo;if(a)if("number"==typeof a.position){const t=[].slice.call(e.items);for(let o=0;o<t.length;o++)e.removeChild(t[o]),a.closestItem.insert(a.position,{node:t[o]})}else"object"==typeof a.position?(e.style.top=a.position.top+"px",e.style.left=a.position.left+"px"):a.closestItem?a.closestItem===t.$.itemsContainer?t._autoHide(e,a.position):t._insert(t._items.indexOf(a.closestItem),e,a.position):t.appendChild(e)}}_setAutoHidePaddings(){const e=this,t=e.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-left")[0],i=e.$.verticalHiddenItemsContainer.getElementsByClassName("auto-hide-right")[0],a=e.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-top")[0],o=e.$.horizontalHiddenItemsContainer.getElementsByClassName("auto-hide-bottom")[0];a&&(a.style.paddingLeft=t?t.offsetWidth+"px":"",a.style.paddingRight=i?i.offsetWidth+"px":""),o&&(o.style.paddingLeft=t?t.offsetWidth+"px":"",o.style.paddingRight=i?i.offsetWidth+"px":"")}_setDockedItemsHeaderButtons(e){let t=e.headerButtons,i=["close","maximize","minimize"],a=t.filter(e=>0>i.indexOf(e));a=0===a.length?["close","autoHide"]:t,e.headerButtons=a}_setFloatingItemsHeaderButtons(e){const t=["close","autoHide"];e._originalTabPosition=e.tabPosition;let i=e.headerButtons.filter(e=>0>t.indexOf(e));i=0===i.length?["close","maximize","minimize"]:e.headerButtons,e.headerButtons=i}_setFocusable(){const e=this;if(!e.disabled&&!e.unfocusable){let t=0<e.tabIndex?e.tabIndex:0;e.setAttribute("tabindex",t)}else e.removeAttribute("tabindex")}_setSnappingMarkers(e,t){var i=Math.max;const a=this;let o=Smart.Utilities.Core.isMobile?document.elementFromPoint(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset):e.originalEvent.target,s=o.closest&&o.closest("smart-docking-layout");if(s||(s=a._getClosestDockingLayout(o)),o.shadowRoot&&(o=e.originalEvent.composedPath()[0]),"advanced"===a.snapMode)return e.ctrlKey?void 0:(a._dragDetails.hoveredItem=o.closest(".smart-docking-layout-snap")?o:a._dragDetails.hoveredItem&&0<a._dragDetails.hoveredItem.getElementsByTagName("smart-splitter").length?void 0:a._dragDetails.hoveredItem,a._dragDetails.hoveredTabArea=t?o.closest(".smart-tab-label-container")||t:a._dragDetails.hoveredTabArea,void a._handleSnapping());if(!s||s!==a)return void a._handleSnapping();if(!a._dragDetails.hoveredTabsWindow||a._dragDetails.windowFeedback!==a.$.tabsWindowFeedback&&a._dragDetails.hoveredTabsWindow===a._dragDetails.selectedTabsWindow)return a._dragDetails.hoveredItem=o.closest(".smart-docking-layout-snap")?o:a._dragDetails.hoveredItem&&0<a._dragDetails.hoveredItem.getElementsByTagName("smart-splitter").length?void 0:a._dragDetails.hoveredItem,void a._handleSnapping();let n={};if(a._dragDetails.hoveredItem){const e=a._dragDetails.hoveredItem.getBoundingClientRect(),t=a.$.itemsContainer.getBoundingClientRect();n.left=a._dragDetails.hoveredItem?e.left-t.left:0,n.top=a._dragDetails.hoveredItem?e.top-t.top:0}else n.left=n.top=0;const d=a.getBoundingClientRect(),l=a.$.itemsContainer.getBoundingClientRect(),r=i(0,e.pageX-window.pageXOffset-d.left-(l.left-d.left)),m=i(0,e.pageY-window.pageYOffset-d.top-(l.top-d.top));if(a._dragDetails.hoveredTabArea===t)a._dragDetails.hoveredTabArea=o.closest(".smart-tab-label-container"),a._handleSnapping("header");else if(!a._dragDetails.hoveredItem||a._dragDetails.hoveredTabsWindow.autoHide)a._handleSnapping();else if(r<.05*a.$.itemsContainer.offsetWidth&&r<.15*a._dragDetails.hoveredItem.offsetWidth)a._handleSnapping("layout-left",e);else if(r>.95*a.$.itemsContainer.offsetWidth&&r>.85*a._dragDetails.hoveredItem.offsetWidth+a._dragDetails.hoveredItem.offsetLeft)a._handleSnapping("layout-right");else if(m<.05*a.$.itemsContainer.offsetHeight)a._handleSnapping("layout-top");else if(m>.95*a.$.itemsContainer.offsetHeight)a._handleSnapping("layout-bottom");else if(o.closest(".smart-tabs-content-section")){const e=a._dragDetails.hoveredItem.closest("smart-splitter").orientation;r<n.left+.3*a._dragDetails.hoveredTabArea.offsetWidth?a._handleSnapping("horizontal"===e?"inside-left":"left"):r>n.left+.7*a._dragDetails.hoveredTabArea.offsetWidth?a._handleSnapping("horizontal"===e?"inside-right":"right"):m<n.top+a._dragDetails.hoveredTabArea.offsetTop+.5*a._dragDetails.hoveredTabArea.offsetHeight+a._dragDetails.hoveredTabsWindow.$.headerSection.offsetHeight?a._handleSnapping("vertical"===e?"inside-top":"top"):a._handleSnapping("vertical"===e?"inside-bottom":"bottom")}else a._handleSnapping()}_setSplitterBarVisibility(){const e=this,t=e.$.itemsContainer.getElementsByTagName("smart-splitter-bar");for(let a=0;a<t.length;a++)e.hideSplitterBars?t[a].hide():t[a].show()}_validateWindowPosition(e){var t=Math.max,i=Math.min;e.$.addClass("no-transition","");const a=document.scrollingElement||document.documentElement;e.style.top=0<a.scrollTop?(parseFloat(e.style.top)||e.offsetTop)+"px":t(0,i(parseFloat(e.style.top)||e.offsetTop,document.documentElement.clientHeight-e.offsetHeight))+"px",e.style.left=0<a.scrollLeft?(parseFloat(e.style.left)||e.offsetLeft)+"px":t(0,i(parseFloat(e.style.left)||e.offsetLeft,document.documentElement.clientWidth-e.offsetWidth))+"px",requestAnimationFrame(()=>e.$.removeClass("no-transition"))}});