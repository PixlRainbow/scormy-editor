
/* Smart HTML Elements v4.6.0 (2019-Oct) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-grid-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Apply",booleanFirst:"\u2610",booleanLast:"\u2611",cancel:"Cancel",dateFirst:"1",dateLast:"9",from:"from",numberFirst:"1",numberLast:"9",stringFirst:"A",stringLast:"Z",thenBy:"then by"}},type:"object",extend:!0}}}static get listeners(){return{change:"_changeHandler",click:"_clickHandler",keydown:"_keydownHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Input":"smart.input.js","Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return`<div id="container">
                    <smart-sortable id="sortable" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>
                    <div id="footer" class="smart-grid-panel-container-footer">
                        <smart-input id="inputNotSorted" animation="[[animation]]" drop-down-button-position="right" readonly theme="[[theme]]"></smart-input>
                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable">
                            <span class="smart-grid-panel-cancel-button"></span>
                            <span class="smart-grid-panel-apply-button"></span>
                        </div>
                    </div>
                </div>`}ready(){super.ready()}render(){const a=this;"right"===a.closeButtonPosition&&(a.$.sortable.handlePosition="left"),a._localize(),a._createSources(),super.render()}propertyChangedHandler(a,b,c){super.propertyChangedHandler(a,b,c);const d=this;switch(a){case"animation":case"theme":{const b=Array.from(d.$.sortable.getElementsByTagName("smart-input"));b.forEach(b=>b[a]=c);break}case"disabled":case"unfocusable":d._setFocusable();break;case"closeButtonPosition":d.$.sortable.handlePosition="right"===d.closeButtonPosition?"left":"right";break;case"dataSource":d.$.sortable.$.container.innerHTML="",d._createSources();break;case"locale":case"messages":{const a=d.$.sortable._items;d._localize(),a.length&&(a[0].children[1].innerHTML=d.localize("firstBy"),a.forEach(function(a,b){0!==b&&(a.children[1].innerHTML=d.localize("thenBy"));const c=d._HTMLToSourceMap.get(a),e=d._ascDescTemplates[c.dataType]||d._ascDescTemplates.string;a.children[3].innerHTML=d.localize("from"),a.children[4].firstElementChild.innerHTML=e[0],a.children[4].children[1].innerHTML=e[1]}));break}case"maxLevel":if(c!==void 0&&null!==c)for(;0<d.$.sortable._items.length&&d.$.sortable._items.length>c;)d._interactionHandler(d.$.sortable._items[d.$.sortable._items.length-1].firstElementChild);d._disableItemAddition();}}_changeHandler(a){const b=this,c=b.shadowRoot||b.isInShadowDOM?a.composedPath()[0]:a.target;if(b.$.inputNotSorted.contains(c)){const a=b.$.inputNotSorted.value,c=b._labelToSourceMap.get(a);return b._createSortItem(c,b.$.sortable._items.length),b.$.sortable.updateItems(),b._visibleLabels.push(a),b._updateHiddenSource(),b._disableItemAddition(),void(b.$.inputNotSorted.value="")}const d=c.closest("smart-input");if(d){const a=d.parentElement.parentElement,c=a.children[4].firstElementChild,e=a.children[4].children[1],f=d.value,g=b._HTMLToSourceMap.get(a).label,h=b._labelToSourceMap.get(f),i=b._ascDescTemplates[h.dataType]||b._ascDescTemplates.string;b._HTMLToSourceMap.set(a,h),b._visibleLabels.splice(b._visibleLabels.indexOf(g),1,f),b._updateHiddenSource(),c.innerHTML=i[0],e.innerHTML=i[1],h.sortDirection&&-1===h.sortDirection.indexOf("asc")?(e.classList.add("selected"),c.classList.remove("selected")):(c.classList.add("selected"),e.classList.remove("selected"))}}_updateHiddenSource(){const a=this;a._hiddenSource=a.dataSource.map(a=>({label:a.label,value:a.dataField,icon:a.icon})).filter(b=>-1===a._visibleLabels.indexOf(b.label)),a.$.inputNotSorted.dataSource=a._hiddenSource,a.$.sortable._items.forEach(b=>b.getElementsByTagName("smart-input")[0].dataSource=a._hiddenSource),a._disableItemAddition()}_clickHandler(a){const b=this;b._interactionHandler(b.shadowRoot||b.isInShadowDOM?a.composedPath()[0]:a.target,a)}_interactionHandler(a,b){const c=this;if(c.disabled||c.readonly)return!0;const d=a.closest(".smart-grid-panel-item");if(d){if(a===d.firstElementChild){const a=c._HTMLToSourceMap.get(d),b=a.label;c.$.sortable.$.container.removeChild(d),c.$.sortable.updateItems(),c._visibleLabels.splice(c._visibleLabels.indexOf(b),1),c._updateHiddenSource(),c._disableItemAddition(),c.$.sortable._items.length&&(c.$.sortable._items[0].children[1].innerHTML=c.localize("firstBy"))}else if(d.children[4].contains(a)){const e=d.children[4].firstElementChild,f=d.children[4].children[1];"click"===b.type?!a.classList.contains("selected")&&(a===e?(f.classList.remove("selected"),e.classList.add("selected"),c._HTMLToSourceMap.get(d).sortDirection="ascending"):a===f&&(e.classList.remove("selected"),f.classList.add("selected"),c._HTMLToSourceMap.get(d).sortDirection="descending")):(e.classList.toggle("selected"),f.classList.toggle("selected"),c._HTMLToSourceMap.get(d).sortDirection=e.classList.contains("selected")?"ascending":"descending")}return!0}if(a===c.$.buttonsContainer.firstElementChild)return c.$.fireEvent("cancel"),!0;if(a===c.$.buttonsContainer.children[1]){const a=[],b={dataFields:[],dataTypes:[],orderBy:[]},d={value:a};return c.$.sortable._items.forEach(d=>{const e=c._HTMLToSourceMap.get(d);a.push({dataField:e.dataField,sortDirection:e.sortDirection}),b.dataFields.push(e.dataField),b.dataTypes.push(e.dataType),b.orderBy.push(e.sortDirection)}),c instanceof Smart.SortPanel&&(d.sortByInfo=b),c.$.fireEvent("apply",d),!0}}_keydownHandler(a){const b=this,c=a.key;(" "===c||"Enter"===c)&&(a.preventDefault(),b._interactionHandler((b.shadowRoot||b.getRootNode()).activeElement,a))}_sortableDragEndHandler(a){const b=this,c=a.detail.oldIndex,d=a.detail.newIndex,e=Math.max(c,d),f=b.$.sortable._items;0===(c&&d)&&(f[0].children[1].innerHTML=b.localize("firstBy"),f[1].children[1].innerHTML=b.localize("thenBy"),1<e&&(f[e].children[1].innerHTML=b.localize("thenBy")))}_localize(){const a=this;a.$.inputNotSorted.placeholder=a.localize("pickAnother"),a.$.buttonsContainer.firstElementChild.innerHTML=a.localize("cancel"),a.$.buttonsContainer.children[1].innerHTML=a.localize("apply"),a._ascDescTemplates={boolean:[a.localize("booleanFirst")+" \u2192 "+a.localize("booleanLast"),a.localize("booleanLast")+" \u2192 "+a.localize("booleanFirst")],date:[a.localize("dateFirst")+" \u2192 "+a.localize("dateLast"),a.localize("dateLast")+" \u2192 "+a.localize("dateFirst")],number:[a.localize("numberFirst")+" \u2192 "+a.localize("numberLast"),a.localize("numberLast")+" \u2192 "+a.localize("numberFirst")],string:[a.localize("stringFirst")+" \u2192 "+a.localize("stringLast"),a.localize("stringLast")+" \u2192 "+a.localize("stringFirst")]}}_createSources(){const a=this,c=(a instanceof Smart.SortPanel?"sort":"group")+"Index",b=[],d=[];if(a._HTMLToSourceMap=new Map,a._labelToSourceMap=new Map,a.dataSource.forEach(d=>{a._labelToSourceMap.set(d.label,d),-1!==d[c]&&void 0!==d[c]&&b.push(d)}),b.sort((d,a)=>d[c]-a[c]),void 0!==a.maxLevel&&null!==a.maxLevel)for(;0<b.length&&b.length>a.maxLevel;)b.pop();b.forEach(a=>d.push(a.label)),a._visibleLabels=d,a._updateHiddenSource(),b.forEach((b,c)=>{a._createSortItem(b,c)}),a.$.sortable.updateItems(),a._disableItemAddition(),a._setFocusable()}_createSortItem(a,b){const c=this,d=c.disabled||c.unfocusable?-1:0,e=document.createElement("div"),f=c._ascDescTemplates[a.dataType]||c._ascDescTemplates.string;e.className="smart-grid-panel-item",e.innerHTML=`<div class="smart-grid-panel-item-close-button" tabindex="${d}"></div>
<div class="smart-grid-panel-label-by smart-unselectable">${c.localize(0<b?"thenBy":"firstBy")}</div>
<div class="smart-grid-panel-field-container"><smart-input class="smart-grid-panel-field-selection" drop-down-button-position="right" value="${a.label}" animation="${c.animation}" readonly theme="${c.theme}"></smart-input></div>
<div class="smart-grid-panel-from smart-unselectable">${c.localize("from")}</div >
<div class="smart-grid-panel-direction smart-unselectable" tabindex="${d}">
    <div class="smart-grid-panel-asc">${f[0]}</div >
    <div class="smart-grid-panel-desc">${f[1]}</div>
</div>
`,e.getElementsByTagName("smart-input")[0].dataSource=c._hiddenSource,c.$.sortable.$.container.appendChild(e),e.getElementsByTagName("input")[0].tabIndex=d,a.sortDirection&&-1===a.sortDirection.indexOf("asc")?e.children[4].children[1].classList.add("selected"):(a.sortDirection="ascending",e.children[4].firstElementChild.classList.add("selected")),c._HTMLToSourceMap.set(e,a)}_disableItemAddition(){const a=this,b=a.maxLevel,c=0===a._hiddenSource.length||b!==void 0&&null!==b&&Math.max(0,b)===a.$.sortable._items.length;a.$.inputNotSorted.disabled=c,c&&a.$.inputNotSorted.removeAttribute("focus")}_setFocusable(){const a=this,b=a.disabled||a.unfocusable?-1:0,c=Array.from(a.getElementsByClassName("smart-grid-panel-item-close-button")),d=Array.from(a.getElementsByClassName("smart-grid-panel-direction")),e=Array.from(a.getElementsByTagName("input")),f=c.concat(d).concat(e);a.$.buttonsContainer.firstElementChild.tabIndex=b,a.$.buttonsContainer.children[1].tabIndex=b,f.forEach(a=>a.tabIndex=b)}}),Smart("smart-sort-panel",class extends Smart.GridPanel{static get properties(){return{messages:{value:{en:{firstBy:"Sort by",noSorting:"No sorting applied",pickAnother:"Pick another field to sort by"}},type:"object",extend:!0}}}static get styleUrls(){return["smart.textbox.css"]}_localize(){super._localize();const a=this;a.$.sortable.$.container.setAttribute("no-sorting",a.localize("noSorting"))}}),Smart("smart-group-panel",class extends Smart.GridPanel{static get properties(){return{maxLevel:{value:8,type:"number?"},messages:{value:{en:{collapseAll:"Collapse all",expandAll:"Expand all",firstBy:"Group by",noGrouping:"No grouping",pickAnother:"Pick another field to group by"}},type:"object",extend:!0}}}template(){return`<div id="container">
                    <smart-sortable id="sortable" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>
                    <div id="expandCollapseContainer" class="smart-grid-panel-buttons-container smart-grid-panel-expand-collapse smart-unselectable">
                        <span class="smart-group-panel-collapse-button"></span>
                        <span class="smart-group-panel-expand-button"></span>
                    </div>
                    <div id="footer" class="smart-grid-panel-container-footer">
                        <smart-input id="inputNotSorted" animation="[[animation]]" drop-down-button-position="right" readonly theme="[[theme]]"></smart-input>
                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable">
                            <span class="smart-grid-panel-cancel-button"></span>
                            <span class="smart-grid-panel-apply-button"></span>
                        </div>
                    </div>
                </div>`}_interactionHandler(a,b){const c=this,d=super._interactionHandler(a,b);d||(a===c.$.expandCollapseContainer.firstElementChild?c.$.fireEvent("collapseAll"):a===c.$.expandCollapseContainer.children[1]&&c.$.fireEvent("expandAll"))}_localize(){super._localize();const a=this;a.$.expandCollapseContainer.firstElementChild.innerHTML=a.localize("collapseAll"),a.$.expandCollapseContainer.children[1].innerHTML=a.localize("expandAll"),a.$.sortable.$.container.setAttribute("no-grouping",a.localize("noGrouping"))}_setFocusable(){super._setFocusable();const a=this,b=a.disabled||a.unfocusable?-1:0;a.$.expandCollapseContainer.firstElementChild.tabIndex=b,a.$.expandCollapseContainer.children[1].tabIndex=b}}),Smart("smart-multi-column-filter-panel",class extends Smart.BaseElement{static get properties(){return{closeButtonPosition:{value:"left",allowedValues:["left","right"],type:"string"},dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{addFilter:"+ Add filter",and:"And",apply:"Apply",cancel:"Cancel",CONTAINS:"contains",CONTAINS_CASE_SENSITIVE:"contains (case sensitive)",DOES_NOT_CONTAIN:"does not contain",DOES_NOT_CONTAIN_CASE_SENSITIVE:"does not contain (case sensitive)",EMPTY:"empty",ENDS_WITH:"ends with",ENDS_WITH_CASE_SENSITIVE:"ends with (case sensitive)",EQUAL:"equal",EQUAL_CASE_SENSITIVE:"equal (case sensitive)",GREATER_THAN:"greater than",GREATER_THAN_OR_EQUAL:"greater than or equal",LESS_THAN:"less than",LESS_THAN_OR_EQUAL:"less than or equal",noFilters:"No filters applied",NOT_EMPTY:"not empty",NOT_EQUAL:"not equal",NOT_NULL:"not null",NULL:"null",or:"Or",STARTS_WITH:"starts with",STARTS_WITH_CASE_SENSITIVE:"starts with (case sensitive)",where:"Where"}},type:"object",extend:!0},operator:{value:"and",allowedValues:["and","or"],type:"string"},value:{value:[],type:"array"}}}static get listeners(){return{change:"_changeHandler",click:"_interactionHandler",keydown:"_interactionHandler"}}static get requires(){return{"Smart.Button":"smart.button.js","Smart.CheckBox":"smart.checkbox.js","Smart.DateTimePicker":"smart.datetimepicker.js","Smart.FilterGroup":"smart.filter.js","Smart.Input":"smart.input.js","Smart.NumericTextBox":"smart.numerictextbox.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return`<div id="container">
                    <div id="itemsContainer" class="smart-filter-panel-items-container smart-unselectable"></div>
                    <div id="footer" class="smart-grid-panel-container-footer">
                        <div id="addFilterButton" class="smart-filter-panel-add-filter-button smart-unselectable"></div>
                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable">
                            <span class="smart-grid-panel-cancel-button"></span>
                            <span class="smart-grid-panel-apply-button"></span>
                        </div>
                    </div>
                </div>`}ready(){super.ready()}render(){const a=this;a._setFocusable(),a._localize(),a._applyValue(),super.render()}propertyChangedHandler(a,b,c){super.propertyChangedHandler(a,b,c);const d=this;"animation"===a||"theme"===a?Array.from(d.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input")).forEach(b=>b[a]=c):"disabled"===a||"unfocusable"===a?d._setFocusable(!0):"dataSource"===a||"value"===a?d._applyValue():"locale"===a||"messages"===a?d._localize(!0):"operator"===a?d._setOperator():void 0}_setOperator(){const a=this,b=a.localize(a.operator);for(let c=2;c<a._items.length;c++)a._items[c].children[1].innerHTML=b}_changeHandler(a){const b=this,c=b.shadowRoot||b.isInShadowDOM?a.composedPath()[0]:a.target;if(!1!=c instanceof Smart.Input){const d=c.parentElement,e=d.children;if(c===e[1])b.operator=c.$.input.dataValue,b._setOperator();else if(c===e[2]){const c=b.dataSource.find(b=>b.dataField===a.detail.oldValue).dataType,f=b.dataSource.find(b=>b.dataField===a.detail.value).dataType;if(f===c)return;const g=e[3].value;let h,i;"date"===f?(h=b._numberAndDateConditions,i=document.createElement("smart-date-time-picker"),i.calendarButton=!0,i.dropDownAppendTo="body",i.formatString="M/d/yy H:mm"):"number"===f?(h=b._numberAndDateConditions,i=document.createElement("smart-numeric-text-box")):"boolean"===f?(h=b._booleanConditions,i=document.createElement("smart-check-box")):(h=b._stringConditions,i=document.createElement("smart-input"));i.animation=b.animation,i.theme=b.theme,i.unfocusable=b.disabled||b.unfocusable,e[4].remove(),d.appendChild(i),""===g||h.find(a=>a.label===g)||(e[3].value=""),e[3].dataSource=h,d.dataType=f}else if(c===e[3]){const a=e[4],b=c.$.input.dataValue;-1!==b.indexOf("NULL")||-1!==b.indexOf("EMPTY")?(a.value="",a.checked=!1,a.classList.add("smart-visibility-hidden")):a.classList.remove("smart-visibility-hidden"),c.condition=b}}}_interactionHandler(a){const b=this;if(!(b.disabled||b.readonly)){if("keydown"===a.type)if(" "===a.key||"Enter"===a.key)a.preventDefault();else return;const c=b.shadowRoot||b.isInShadowDOM?a.composedPath()[0]:a.target,d=c.closest(".smart-grid-panel-item");if(d){if(c===d.firstElementChild){const a=b._items.indexOf(d);let c;b._items.splice(a,1),d.remove(),0<b._items.length&&2>a&&(0===a&&(b._items[0].children[1].remove(),c=document.createElement("div"),c.innerHTML=b.localize("where"),b._items[0].insertBefore(c,b._items[0].children[1])),1<b._items.length&&(b._items[1].children[1].remove(),c=document.createElement("smart-input"),c.className="underlined",c.dataSource=[{value:"and",label:b.localize("and")},{value:"or",label:b.localize("or")}],c.dropDownButtonPosition="right",c.readonly=!0,c.value=b.localize(b.operator),c.animation=b.animation,c.theme=b.theme,c.unfocusable=b.disabled||b.unfocusable,b._items[1].insertBefore(c,b._items[1].children[1])))}return}if(c===b.$.addFilterButton&&0<b.dataSource.length)return void b.$.itemsContainer.appendChild(b._createItem(b.dataSource[0],"","",b._items.length));if(c===b.$.buttonsContainer.firstElementChild)return void b.$.fireEvent("cancel");if(c===b.$.buttonsContainer.children[1]){const a=b._stringConditions.concat(b._numberAndDateConditions),c=b.operator,d=[],e={},f=[];for(let g in b._items.forEach(f=>{const g=b.dataSource.find(a=>a.label===f.children[2].value),h=[];let i=f.children[3].value;if(""===i)return;i=a.find(a=>a.label===i).value,h.push(g.dataField,i),-1===i.indexOf("NULL")&&-1===i.indexOf("EMPTY")&&("boolean"===g.dataType?h.push(f.children[4].checked):"date"===g.dataType?h.push(f.children[4].value.toDate()):h.push(f.children[4].value));let j=e[h[0]];void 0===j&&(j=new Smart.Utilities.FilterGroup,e[h[0]]=j);const k=j.createFilter(g.dataType,h[2],h[1]);j.addFilter(c,k),d.push(h)}),e)f.push([g,e[g]]);b.$.fireEvent("apply",{filters:f,operator:c,value:d})}}}_applyValue(){const a=this,b=document.createDocumentFragment();let c=0;for(a._items=[];a.$.itemsContainer.firstElementChild;)a.$.itemsContainer.firstElementChild.remove();0===a.dataSource.length||(a.value.forEach(d=>{if(!Array.isArray(d))return;const e=d[0],f=a.dataSource.find(a=>a.dataField===e);if(f){const e=a._createItem(f,d[1],d[2],c);b.appendChild(e),c++}}),a.$.itemsContainer.appendChild(b))}_createItem(a,b,c,d){const e=this,f=e.disabled||e.unfocusable?-1:0,g=document.createElement("div"),h=document.createDocumentFragment(),i=document.createElement("div"),j=document.createElement("smart-input"),k=document.createElement("smart-input");let l,m;return i.className="smart-grid-panel-item-close-button",i.tabIndex=f,h.appendChild(i),0===d?(l=document.createElement("div"),l.innerHTML=e.localize("where")):1===d?(l=document.createElement("smart-input"),l.className="underlined",l.dataSource=[{value:"and",label:e.localize("and")},{value:"or",label:e.localize("or")}],l.dropDownButtonPosition="right",l.readonly=!0,l.value=e.localize(e.operator),l.animation=e.animation,l.theme=e.theme,l.unfocusable=e.disabled||e.unfocusable):(l=document.createElement("div"),l.innerHTML=e.localize(e.operator)),h.appendChild(l),j.className="underlined",j.dataSource=e.dataSource.map(a=>({value:a.dataField,label:a.label,icon:a.icon})),j.dropDownButtonPosition="right",j.readonly=!0,j.value=a.label,j.animation=e.animation,j.theme=e.theme,j.unfocusable=e.disabled||e.unfocusable,h.appendChild(j),"boolean"===a.dataType?(k.dataSource=e._booleanConditions,m=document.createElement("smart-check-box"),m.checked="boolean"==typeof c&&c):"date"===a.dataType?(k.dataSource=e._numberAndDateConditions,m=document.createElement("smart-date-time-picker"),m.calendarButton=!0,m.dropDownAppendTo="body",m.formatString="M/d/yy H:mm",m.value=c):"number"===a.dataType?(k.dataSource=e._numberAndDateConditions,m=document.createElement("smart-numeric-text-box"),m.value="number"==typeof c||"string"==typeof c?c:0):(k.dataSource=e._stringConditions,m=document.createElement("smart-input"),m.value=void 0!==c&&null!==c?c.toString():""),k.className="underlined",k.dropDownButtonPosition="right",k.readonly=!0,k.animation=e.animation,k.theme=e.theme,k.unfocusable=e.disabled||e.unfocusable,k.dataSource.find(a=>a.value===b)?(k.value=e.localize(b),k.condition=b):(m.value="",m.checked=!1),void 0!==b&&(-1!==b.indexOf("NULL")||-1!==b.indexOf("EMPTY"))&&(m.value="",m.checked=!1,m.classList.add("smart-visibility-hidden")),m.animation=e.animation,m.theme=e.theme,m.unfocusable=e.disabled||e.unfocusable,h.appendChild(k),h.appendChild(m),g.appendChild(h),g.className="smart-grid-panel-item",e._items.push(g),g.dataType=a.dataType,g}_localize(a){const b=this;b.$.addFilterButton.innerHTML=b.localize("addFilter"),b.$.buttonsContainer.firstElementChild.innerHTML=b.localize("cancel"),b.$.buttonsContainer.children[1].innerHTML=b.localize("apply"),b.$.itemsContainer.setAttribute("no-filters",b.localize("noFilters")),b._stringConditions=[{value:"EMPTY",label:b.localize("EMPTY")},{value:"NOT_EMPTY",label:b.localize("NOT_EMPTY")},{value:"CONTAINS",label:b.localize("CONTAINS")},{value:"CONTAINS_CASE_SENSITIVE",label:b.localize("CONTAINS_CASE_SENSITIVE")},{value:"DOES_NOT_CONTAIN",label:b.localize("DOES_NOT_CONTAIN")},{value:"DOES_NOT_CONTAIN_CASE_SENSITIVE",label:b.localize("DOES_NOT_CONTAIN_CASE_SENSITIVE")},{value:"STARTS_WITH",label:b.localize("STARTS_WITH")},{value:"STARTS_WITH_CASE_SENSITIVE",label:b.localize("STARTS_WITH_CASE_SENSITIVE")},{value:"ENDS_WITH",label:b.localize("ENDS_WITH")},{value:"ENDS_WITH_CASE_SENSITIVE",label:b.localize("ENDS_WITH_CASE_SENSITIVE")},{value:"EQUAL",label:b.localize("EQUAL")},{value:"EQUAL_CASE_SENSITIVE",label:b.localize("EQUAL_CASE_SENSITIVE")},{value:"NULL",label:b.localize("NULL")},{value:"NOT_NULL",label:b.localize("NOT_NULL")}],b._numberAndDateConditions=[{value:"EQUAL",label:b.localize("EQUAL")},{value:"NOT_EQUAL",label:b.localize("NOT_EQUAL")},{value:"LESS_THAN",label:b.localize("LESS_THAN")},{value:"LESS_THAN_OR_EQUAL",label:b.localize("LESS_THAN_OR_EQUAL")},{value:"GREATER_THAN",label:b.localize("GREATER_THAN")},{value:"GREATER_THAN_OR_EQUAL",label:b.localize("GREATER_THAN_OR_EQUAL")},{value:"NULL",label:b.localize("NULL")},{value:"NOT_NULL",label:b.localize("NOT_NULL")}],b._booleanConditions=[{value:"EQUAL",label:b.localize("EQUAL")},{value:"NOT_EQUAL",label:b.localize("NOT_EQUAL")},{value:"NULL",label:b.localize("NULL")},{value:"NOT_NULL",label:b.localize("NOT_NULL")}];a&&b._items.forEach((a,c)=>{const d=a.children[1],e=a.children[3];0===c?d.innerHTML=b.localize("where"):1===c?(d.dataSource=[{value:"and",label:b.localize("and")},{value:"or",label:b.localize("or")}],d.value=b.localize(b.operator)):d.innerHTML=b.localize(b.operator),e.dataSource="string"===a.dataType?b._stringConditions:"boolean"===a.dataType?b._booleanConditions:b._numberAndDateConditions,e.value=e.condition?b.localize(e.condition):""})}_setFocusable(a){const b=this,c=b.disabled||b.unfocusable?-1:0;if(b.$.addFilterButton.tabIndex=c,b.$.buttonsContainer.firstElementChild.tabIndex=c,b.$.buttonsContainer.children[1].tabIndex=c,a){const a=Array.from(b.$.itemsContainer.getElementsByClassName("smart-grid-panel-item-close-button")),d=Array.from(b.$.itemsContainer.querySelectorAll("smart-date-time-picker, smart-numeric-text-box, smart-check-box, smart-input"));a.forEach(a=>a.tabIndex=c),d.forEach(a=>a.unfocusable=b.disabled||b.unfocusable)}}}),Smart("smart-column-panel",class extends Smart.BaseElement{static get properties(){return{dataSource:{value:[],type:"array",reflectToAttribute:!1},messages:{value:{en:{apply:"Apply",cancel:"Cancel",find:"Find a field",noResults:"No results"}},type:"object",extend:!0}}}static get listeners(){return{click:"_interactionHandler",keydown:"_interactionHandler","find.keyup":"_findKeyupHandler","sortable.dragEnd":"_sortableDragEndHandler"}}static get requires(){return{"Smart.Sortable":"smart.sortable.js"}}static get styleUrls(){return["smart.gridpanel.css"]}template(){return`<div id="container">
                    <div class="smart-column-panel-find-container">
                        <input id="find" readonly="[[readonly]]"></input>
                        <span id="clearButton" class="clear-button smart-hidden"></span>
                    </div>
                    <smart-sortable id="sortable" animation="[[animation]]" disabled="[[readonly]]" drag-mode="handle" handle-position="right" handle-visibility="visible" theme="[[theme]]"></smart-sortable>
                    <div id="footer" class="smart-grid-panel-container-footer">
                        <div id="buttonsContainer" class="smart-grid-panel-buttons-container smart-unselectable">
                            <span class="smart-grid-panel-cancel-button"></span>
                            <span class="smart-grid-panel-apply-button"></span>
                        </div>
                    </div>
                </div>`}ready(){super.ready()}render(){const a=this;a._positionChanged=!1,a._localize(),a._createSortItems(),super.render()}propertyChangedHandler(a,b,c){super.propertyChangedHandler(a,b,c);const d=this;switch(a){case"disabled":case"unfocusable":d._setFocusable();break;case"dataSource":{for(const a=d.$.sortable.$.container;a.firstChild;)a.removeChild(a.firstChild);d._createSortItems(),d._positionChanged=!1,d.$.find.value="";break}case"locale":case"messages":d._localize();}}_createSortItems(){const a=this,b=document.createDocumentFragment();a._HTMLToSourceMap=new Map,a.dataSource.forEach(c=>b.appendChild(a._createSortItem(c))),a.$.sortable.$.container.appendChild(b),a.$.sortable.updateItems(),a._setFocusable()}_createSortItem(a){const b=this,c=document.createElement("div");return b._HTMLToSourceMap.set(c,a),c.className="smart-grid-panel-item",c.innerHTML=`<div class="toggle-visibility${!1===a.visible?" hidden":""}${a.disableToggle?" disable-toggle":""}"></div>
<span class="smart-column-panel-label smart-unselectable${a.icon?" icon "+a.icon:""}">${a.label}</span>`,c}_interactionHandler(a){const b=this;if(!(b.disabled||b.readonly||"keydown"===a.type&&-1===[" ","Enter"].indexOf(a.key))){const c=b.shadowRoot||b.isInShadowDOM?a.composedPath()[0]:a.target;if(c.classList.contains("toggle-visibility"))c.classList.toggle("hidden");else if(c.parentElement===b.$.buttonsContainer){if(c===b.$.buttonsContainer.firstElementChild)return void b.$.fireEvent("cancel");if(c===b.$.buttonsContainer.children[1]){const a=[];b.$.sortable._items.forEach(c=>{const d=Object.assign({},b._HTMLToSourceMap.get(c));d.visible=!c.firstElementChild.classList.contains("hidden"),a.push(d)}),b.$.fireEvent("apply",{value:a,positionChanged:b._positionChanged}),b._positionChanged=!1}}else c.classList.contains("clear-button")&&(b.$.find.value="",b._findKeyupHandler())}}_findKeyupHandler(){const a=this;if(a.disabled||a.readonly)return;const b=a.$.find,c=b.value,d=a.$.sortable._items;if(""===c)return b.parentElement.classList.remove("no-results"),a.$.clearButton.classList.add("smart-hidden"),d.forEach(a=>a.classList.remove("smart-hidden")),void(a.$.sortable.disabled=a.readonly);let e=!0;a.$.clearButton.classList.remove("smart-hidden"),d.forEach(b=>{const d=a._HTMLToSourceMap.get(b);-1===d.label.toLowerCase().indexOf(c.toLowerCase())?b.classList.add("smart-hidden"):(b.classList.remove("smart-hidden"),e=!1)}),a.$.sortable.disabled=!0,e?b.parentElement.classList.add("no-results"):b.parentElement.classList.remove("no-results")}_sortableDragEndHandler(){this._positionChanged=!0}_localize(){const a=this;a.$.find.placeholder=a.localize("find"),a.$.buttonsContainer.firstElementChild.innerHTML=a.localize("cancel"),a.$.buttonsContainer.children[1].innerHTML=a.localize("apply"),a.$.container.firstElementChild.setAttribute("no-results",a.localize("noResults"))}_setFocusable(){const a=this,b=a.disabled||a.unfocusable?-1:0,c=Array.from(a.$.sortable.getElementsByClassName("toggle-visibility"));a.$.find.tabIndex=b,a.$.clearButton.tabIndex=b,a.$.buttonsContainer.firstElementChild.tabIndex=b,a.$.buttonsContainer.children[1].tabIndex=b,c.forEach(a=>a.tabIndex=a.classList.contains("disable-toggle")?-1:b)}});