
/* Smart HTML Elements v4.6.0 (2019-Oct) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

Smart("smart-color-panel",class extends Smart.BaseElement{static get properties(){return{applyValueMode:{value:"instantly",allowedValues:["instantly","useButtons"],type:"string"},columnCount:{value:8,type:"number?"},displayMode:{value:"default",allowedValues:["default","grid","palette","radial","hexagonal","spectrumGrid","materialGrid"],type:"string"},disableUndo:{value:!1,type:"boolean"},editAlphaChannel:{value:!1,type:"boolean"},enableCustomColors:{value:!1,type:"boolean"},gridThemeColors:{value:null,type:"array?",reflectToAttribute:!1},gridShadeColors:{value:null,type:"array?",reflectToAttribute:!1},gridStandardColors:{value:null,type:"array?",reflectToAttribute:!1},hideAlphaEditor:{value:!1,type:"boolean"},hideContentToFit:{value:["RGB","HEX","alpha","previewContainer"],type:"array"},hideHEXEditor:{value:!1,type:"boolean"},hidePreviewContainer:{value:!1,type:"boolean"},hideRGBEditor:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},messages:{value:{en:{redPrefix:"R:",greenPrefix:"G:",bluePrefix:"B:",hexPrefix:"#:",alphaPrefix:"Alpha:",ok:"OK",cancel:"CANCEL",customColor:"CUSTOM COLOR",standardColors:"Standard colors",themeColors:"Theme colors"}},type:"object",extend:!0},name:{value:"",type:"string"},palette:{value:"default",allowedValues:["default","gray","red","green","blue","custom"],type:"string"},paletteColors:{value:null,type:"array?",reflectToAttribute:!1},paletteCustomColors:{value:null,type:"array?",reflectToAttribute:!1},tooltipDisplayMode:{value:"hex",allowedValues:["none","rgba","rgb","hex"],type:"string"},value:{value:null,type:"string?"},valueFormat:{value:"default",allowedValues:["rgb","rgba","hex","hsv","default"],type:"string"},valueMember:{value:"value",type:"string?"}}}static get listeners(){return{"container.click":"_containerClickHandler","container.mouseover":"_handleGridModeCellHover","paletteModeContainer.down":"_paletteDownHandler","container.change":"_handleInputChange","document.move":"_moveThumbHandler","document.up":"_releaseThumbUpHandler","paletteModeContainer.wheel":"_inputWheelHandler",resize:"_hideControlsByPriority","hexModeResizeTrigger.resize":"_resizeHoneycombItems","paletteModeContainer.move":"_trackMoveHandler"}}static get requires(){return{"Smart.Utilities.Draw":"smart.draw.js","Smart.Button":"smart.button.js","Smart.Tooltip":"smart.tooltip.js"}}static get styleUrls(){return["smart.button.css","smart.tooltip.css","smart.colorpanel.css"]}template(){return`<div id="container">
                    <div id="gridModeContainer" class ="grid-mode-container"></div>
                    <div id="paletteModeContainer" class ="palette-mode-container">
                        <div id="colorPaletteContainer" class ="color-palette-container">
                            <div id="colorPalette" class ="color-palette">
                                <div id="colorPaletteThumb" class ="color-palette-thumb"></div>
                            </div>
                            <div id="hueScale" class ="hue-scale">
                                <div id="hueScaleThumb" class ="hue-scale-thumb"></div>
                            </div>
                            <div id="colorPaletteRadial" class ="color-palette-radial">
                                <span class="white-radial-gradient"></span>
                                <div id="colorPaletteRadialThumb" class ="color-palette-radial-thumb"></div>
                            </div>
                            <div id="colorPaletteHexagonal" class ="color-palette-hexagonal"></div>
                            <div id="brightnessScale" class ="brightness-scale">
                                <div id="brightnessScaleThumb" class ="brightness-scale-thumb"></div>
                            </div>
                            <span id="hexModeResizeTrigger" class ="color-sample hex-mode-resize-trigger"></span>
                            <div id="colorControlsContainer" class ="color-controls-container"></div>
                        </div>
                        <div id="alphaChannelContainer" class ="alpha-channel-container"></div>
                    </div>
                    <div id="buttonsContainer" class ="buttons-container"></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}propertyChangedHandler(e,a,l){function t(){r._generateGridStructures(),r._applyValue(r.value)}const r=this;switch(e){case"applyValueMode":"instantly"!==l||r.value||(r._HSV={h:0,s:0,v:1},r._selectedItem&&r._selectedItem.classList.contains("selected")&&(r._selectedItem.classList.remove("selected"),r._selectedItem.style.stroke=null)),("palette"===r.displayMode||"radial"===r.displayMode||"hexagonal"===r.displayMode)&&r._handleCancelButtonClick(),"useButtons"===l&&r._createApplyValueButtons();break;case"paletteColors":r._customPalette=r._mapDataSourceToPalette(),t(r.displayMode);break;case"inverted":{const e=r.value,a=r.$.hueScaleThumb.offsetHeight,o=r._validateInRange(a/2,0,r.$.hueScale.offsetHeight-a)/r.$.brightnessScale.offsetHeight;l?(r._HSV.v=r._HSV.s,r._HSV.s=1-o):(r._HSV.s=r._HSV.v,r._HSV.v=1-o),r.value=r._HSVtoRGBA(r._HSV),r.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",r.$.brightnessScaleThumb.s||0),t(r.displayMode),r.value!==e&&r.$.fireEvent("change",{oldValue:e,value:r.value});break}case"palette":t(r.displayMode),r._updatePreviewContainerValues(r.value);break;case"displayMode":case"gridThemeColors":case"gridShadeColors":case"gridStandardColors":if("displayMode"===e){const e=r.value;if(-1<r.$.container.className.indexOf("custom-color-selection")&&r._handleCancelButtonClick(),null!==r.value&&"palette"!==l&&"hexagonal"!==l&&"radial"!==l){!r.editAlphaChannel&&r.$.alphaChannelThumb&&(r.$.alphaChannelThumb.style.left=0,r.$.alphaChannelThumb.a=r._RGBA.a=1),r.value=r._getValue(r.valueFormat),t(),r.$.fireEvent("change",{oldValue:e,value:r.value});break}if(null===r.value&&("palette"===l||"hexagonal"===l||"radial"===l)){r._RGBA={r:255,g:255,b:255,a:1},r._HSV={h:0,s:0,v:1},r.value=r._getValue(r.valueFormat),t(),r.$.fireEvent("change",{oldValue:e,value:r.value});break}r.value=r._getValue(r.valueFormat)}t(r.displayMode);break;case"locale":case"messages":r._localizeLabels();break;case"paletteCustomColors":r._userPalette=l||[],(-1<r.displayMode.toLowerCase().indexOf("grid")||"default"===r.displayMode)&&r._generatePaletteUserColorGrid(!0);break;case"editAlphaChannel":{if(l||(r._RGBA.a=1),!r.value)return;const e=r.value;r.value=r._getValue(r.valueFormat),r.value!==e&&r.$.fireEvent("change",{oldValue:e,value:r.value}),l&&r._createAlphaChannel();break}case"value":{if(l="string"==typeof l?l.trim():l,!r._isValidColor(l))return void r._reset();r._applyValue(l),r.value=r._getValue(r.valueFormat),"hexagonal"===r.displayMode&&r._generateHoneycomb(r.columnCount,r.inverted?{s:r._HSV.s}:{v:r._HSV.v}),a!==r.value&&r.$.fireEvent("change",{oldValue:a,value:r.value});break}case"columnCount":{const e=r.$.container.style;null===l||isNaN(l)?e.removeProperty("--smart-color-panel-grid-mode-column-count"):e.setProperty("--smart-color-panel-grid-mode-column-count",l),r._generatePaletteUserColorGrid(),"spectrumGrid"===r.displayMode?r._generateSpectrumGrid(parseInt(l)):"hexagonal"===r.displayMode&&r._generateHoneycomb(l,r._HSV)}break;case"valueFormat":{if(!r.value)return;const e=r.value;r.value=r._getValue(l),r.$.fireEvent("change",{oldValue:e,value:r.value});break}case"tooltipDisplayMode":if(!r.$.tooltip)return;"none"===l?(r.$.tooltip.close(),r.$.tooltip.disabled=!0):r.$.tooltip.disabled=!1;break;default:if(super.propertyChangedHandler(e,a,l),"disabled"===e){const a=r.getElementsByClassName("color-input");for(let t=0;t<a.length;t++)a[t][e]===l}("disabled"===e||"theme"===e||"animation"===e)&&(r.$.buttonOk&&(r.$.buttonOk[e]=l),r.$.buttonCancel&&(r.$.buttonCancel[e]=l),r.$.buttonCustom&&(r.$.buttonCustom[e]=l),r.$.tooltip&&(r.$.tooltip[e]=l));}}ready(){super.ready()}render(){const e=this;e._initializeBaseVars(),null===e.columnCount||isNaN(e.columnCount)?e.$.container.style.removeProperty("--smart-color-panel-grid-mode-column-count"):e.$.container.style.setProperty("--smart-color-panel-grid-mode-column-count",e.columnCount),"useButtons"===e.applyValueMode&&e._createApplyValueButtons(),e.editAlphaChannel&&e._createAlphaChannel(),e._localizeLabels(),e._generateGridStructures(),e.value||"hexagonal"!==e.displayMode&&"radial"!==e.displayMode&&"palette"!==e.displayMode||(e.value=e._getValue(e.valueFormat)),e._applyValue(e.value),e._hideControlsByPriority(),e.enableShadowDOM&&e.appendChild(e.$.hiddenInput),super.render()}_createApplyValueButtons(e){function a(e){let a=document.createElement("smart-button");return a.classList.add(e),a.classList.add("primary"),a.disabled=l.disabled,a.theme=l.theme,a.animation=l.animation,l.$.buttonsContainer.appendChild(a),a}const l=this;!e&&"useButtons"!==l.applyValueMode||l.$.buttonsContainer.innerHTML.trim()||(l.$.buttonOk=a("button-ok"),l.$.buttonCancel=a("button-cancel"),l.$.buttonOk.content=l.localize("ok"),l.$.buttonCancel.content=l.localize("cancel"))}_createAlphaChannel(){const e=this;if(!(!e.editAlphaChannel||e.editAlphaChannel&&e.$.alphaChannelContainer.innerHTML.trim())){e.$.alphaChannelContainer.innerHTML=`
                            <div class ="alpha-channel-scale">
                                <div class ="alpha-channel-thumb"></div>
                            </div>
                            <label for="aChannelInput" class ="a-channel"></label>
                            <input type="number" step="0.01" id="aChannelInput" class ="color-input a-channel" value="1" min="0" max="1">`,e.$.alphaChannelScale=e.$.alphaChannelContainer.querySelector(".alpha-channel-scale"),e.$.alphaChannelThumb=e.$.alphaChannelContainer.querySelector(".alpha-channel-thumb");const a=e.$.alphaChannelContainer.querySelector("input");a.disabled=e.disabled,e._localizeLabels(),e._applyAlphaValue(e._RGBA.a,"alphaScale")}}_createGridModeComponents(){const e=this;if(-1<["radial","palette","hexagonal"].indexOf(e.displayMode))return!1;if(!e.$.gridModeContainer.innerHTML.trim()){const a=e.$.gridModeContainer;a.innerHTML=`
                        <div id="defaultSamplesContainer" class ="default-samples-container"></div>
                        <div id="gridSamplesContainer" class ="grid-samples-container"></div>
                        <div id="materialGridSamplesContainer" class ="material-grid-samples-container"></div>
                        <div id="spectrumGridSamplesContainer" class ="spectrum-grid-samples-container"></div>
                        <smart-button id="buttonCustom" class ="button-custom-color primary"></smart-button>
                        <div id="userSamplesContainer" class ="user-samples-container"></div>
                        <smart-tooltip id="tooltip" arrow position="auto"></smart-tooltip>`,e.$.defaultSamplesContainer=a.querySelector(".default-samples-container"),e.$.gridSamplesContainer=a.querySelector(".grid-samples-container"),e.$.materialGridSamplesContainer=a.querySelector(".material-grid-samples-container"),e.$.materialGridSamplesContainer.$=Smart.Utilities.Extend(e.$.materialGridSamplesContainer),e.$.spectrumGridSamplesContainer=a.querySelector(".spectrum-grid-samples-container"),e.$.userSamplesContainer=a.querySelector(".user-samples-container"),e.$.buttonCustom=a.querySelector("smart-button"),e.$.tooltip=a.querySelector("smart-tooltip"),e.$.buttonCustom.disabled=e.disabled,e.$.buttonCustom.animation=e.animation,e.$.buttonCustom.theme=e.theme,e.$.buttonCustom.content=e.localize("customColor"),e.$.tooltip.disabled=e.disabled||"none"===e.tooltipDisplayMode,e.$.tooltip.animation=e.animation,e.$.tooltip.theme=e.theme}}_createColorControls(e){const a=this;if(!e&&0>["radial","palette","hexagonal"].indexOf(a.displayMode))return!1;const l=a.$.colorControlsContainer;if(!l.innerHTML.trim()){l.innerHTML=`
                                <div id="previewContainer" class ="preview-container gradient-background">
                                       <span  class ="preview-container-top"></span>
                                       <span class ="preview-container-bottom"></span>
                                </div>
                                <label for="rChannelInput" id="rChannelLabel" class ="r-channel"></label>
                                <input type="number" min="0" max="255" id="rChannelInput" class ="color-input r-channel" value="255">
                                <label for="gChannelInput" id="gChannelLabel" class ="g-channel"></label>
                                <input type="number" min="0" max="255" id="gChannelInput" class ="color-input g-channel" value="255" >
                                <label for="bChannelInput" id="bChannelLabel" class ="b-channel"></label>
                                <input type="number" min="0" max="255" id="bChannelInput" class ="color-input b-channel" value="255">
                                <label for="hexInput" id="hexLabel" class ="hex"></label>
                                <input type="text" id="hexInput" class ="color-input hex" value="FFFFFF" maxlength="6">`;const e=l.getElementsByClassName("color-input");for(let l=0;l<e.length;l++)e[l].disabled=a.disabled;a._localizeLabels()}}_containerClickHandler(e){const a=this;if(!(a.disabled||a.readonly||!e.target)){if(e.target.classList.contains("color-sample"))return void a._handleSampleClick(e);const l=e.target.closest("smart-button");return l===a.$.buttonCancel?void a._handleCancelButtonClick(!0):l===a.$.buttonCustom?(a.$container.addClass("custom-color-selection"),a._createApplyValueButtons(!0),a._createColorControls(!0),a._applyValueInPaletteMode(),a._customColorSelection=!0,void(1===a._RGBA.a&&a.$.alphaChannelThumb&&(a.$.alphaChannelThumb.style.left=0,a.$.alphaChannelThumb.a=a._RGBA.a))):l===a.$.buttonOk?void a._handleOkButtonClick(!0):void(e.target===(a.shadowRoot||a).querySelector(".preview-container-top")&&"useButtons"===a.applyValueMode&&!a.disableUndo&&a._applyValue(a.value))}}_reset(e=this.value){const a=this;a._RGBA={r:255,g:255,b:255,a:1},a._HSV={h:0,s:0,v:1},a.$.hueScaleThumb.h=0,a.$.colorPaletteThumb.s=0,a.$.colorPaletteThumb.v=1,a.$.colorPaletteRadialThumb.h=0,a.$.colorPaletteRadialThumb.s=0,a.$.brightnessScaleThumb.v=1,a.$.brightnessScaleThumb.s=0,"hexagonal"!==a.displayMode&&"radial"!==a.displayMode&&"palette"!==a.displayMode?(a.value=null,a._selectedItem&&a._selectedItem.classList.contains("selected")&&(a._selectedItem.classList.remove("selected"),a._selectedItem.style.stroke=null)):a.value=a._getValue(a.valueFormat),a._applyValue(a.value),a.$.fireEvent("change",{oldValue:e,value:a.value})}_handleColorPaletteDown(e){const a=this,l=a._getXYcoordinates(e);if(l){const t="palette"===a.displayMode||"grid"===a.displayMode?a.$.colorPaletteThumb:a.$.colorPaletteRadialThumb;if(a._activeComponent=l.container,"palette"===a.displayMode||-1<a.$.container.className.indexOf("custom-color-selection")){if(t.s=a._HSV.s=l.x/l.container.offsetWidth,t.v=a._HSV.v=1-l.y/l.container.offsetHeight,"grid"===a.displayMode)return a._moveThumbHandler(e,!0),void a._applyValueInPaletteMode(e);}else if("radial"===a.displayMode){const e=a.$.colorPaletteRadial.offsetWidth,r=l.x-e/2,o=l.y-e/2;t.h=a._HSV.h=0>a._calcHueAngle(r,o)?360+a._calcHueAngle(r,o):a._calcHueAngle(r,o);const n=a.$.brightnessScaleThumb,i=a.$.brightnessScale,s=a._validateInRange(2*a._calcSatDistance(r,o)/e,0,1),d=i.offsetHeight-n.offsetHeight,u=a._validateInRange(n.offsetTop,0,d)/d;a.inverted?(t.v=a._HSV.v=s,t.s=a._HSV.s=1-u):(t.s=a._HSV.s=s,t.v=a._HSV.v=1-u)}a._applyValue(a._HSVtoRGBA(a._HSV),e),a._instantUpdate()}}_handleScalesDown(e){const a=this,l=a._getXYcoordinates(e);let t,r;l&&(a._activeComponent=l.container,l.container===a.$.hueScale?a._updateHueScale(l):l.container===a.$.brightnessScale?(a._updateBrightnessScale(l),"hexagonal"===a.displayMode&&a._generateHoneycomb(a.columnCount,a._HSV)):a.$.alphaChannelScale&&(t=l.x-a.$.alphaChannelThumb.offsetWidth/2,r=a.$.alphaChannelScale.offsetWidth-a.$.alphaChannelThumb.offsetWidth,a.$.alphaChannelThumb.style.left=100*a._validateInRange(t,0,r)/a.$.alphaChannelScale.offsetWidth+"%",a.$.alphaChannelThumb.a=a._RGBA.a=parseFloat(((l.container.offsetWidth-l.x)/l.container.offsetWidth).toFixed(2)),a._applyAlphaValue(a._RGBA.a,"alphaScale")),a._applyValue(a._HSVtoRGBA(a._HSV),e),a._instantUpdate())}_updateBrightnessScale(e){const a=this,l=e.y-a.$.brightnessScaleThumb.offsetHeight/2,t=a.$.brightnessScale.offsetHeight-a.$.brightnessScaleThumb.offsetHeight,r=Math.min(Math.max(parseFloat(l),0),parseFloat(t))/t;a.inverted?a.$.brightnessScaleThumb.s=a._HSV.s=1-r:a.$.brightnessScaleThumb.v=a._HSV.v=1-r,a.$.brightnessScaleThumb.style.top=t*r+"px",a.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",r)}_updateHueScale(e){const a=this,l=e.y-a.$.hueScaleThumb.offsetHeight/2,t=a.$.hueScale.offsetHeight,r=t-a.$.hueScaleThumb.offsetHeight;a.$.hueScaleThumb.h=a._HSV.h=360*(t-e.y)/t,a.$.hueScaleThumb.style.top=r*Math.min(Math.max(parseFloat(l),0),parseFloat(r))/r+"px"}_trackMoveHandler(e){const a=this;Smart.Utilities.Core.isMobile||e.stopPropagation(),"touchmove"===e.originalEvent.type&&a._dragDetails&&e.originalEvent.preventDefault()}_moveThumbHandler(e,a){const l=this,t=e.pageX-window.pageXOffset,r=e.pageY-window.pageYOffset;if(!l.disabled&&!l.readonly&&l._activeComponent&&l._dragDetails&&(l._dragDetails.x!==t||l._dragDetails.y!==r||a)){const a=l._getXYcoordinates(e);if(a){const t=l._activeComponent.offsetWidth,r=l._activeComponent.offsetHeight;switch(l._activeComponent){case l.$.colorPalette:{l.$.colorPaletteThumb.style.left=100*a.x/t+"%",l.$.colorPaletteThumb.style.top=100*a.y/r+"%",l.$.colorPaletteThumb.s=l._HSV.s=a.x/t,l.$.colorPaletteThumb.v=l._HSV.v=1-a.y/r;break}case l.$.colorPaletteRadial:{const e=t,r=a.x-e/2,o=a.y-e/2;l.$.colorPaletteRadialThumb.h=l._HSV.h=0>l._calcHueAngle(r,o)?360+l._calcHueAngle(r,o):l._calcHueAngle(r,o),l.inverted?l.$.colorPaletteRadialThumb.v=l._HSV.v=l._validateInRange(2*l._calcSatDistance(r,o)/e,0,1):l.$.colorPaletteRadialThumb.s=l._HSV.s=l._validateInRange(2*l._calcSatDistance(r,o)/e,0,1);const n=(l.shadowRoot||l).querySelector(".preview-container-bottom");n&&(n.style.backgroundColor=l._HSVtoRGBA());break}case l.$.hueScale:{l._updateHueScale(a);break}case l.$.brightnessScale:{if(l._updateBrightnessScale(a),"hexagonal"===l.displayMode){const e=l.inverted?{s:l._HSV.s}:{v:l._HSV.v};l._generateHoneycomb(l.columnCount,e)}break}case l.$.alphaChannelScale:{const e=a.x-l.$.alphaChannelThumb.offsetWidth/2,r=t-l.$.alphaChannelThumb.offsetWidth;l.$.alphaChannelThumb.a=l._RGBA.a=parseFloat(((t-a.x)/t).toFixed(2)),l.$.alphaChannelThumb.style.left=100*l._validateInRange(e,0,r)/t+"%";break}}l._applyValue(l._HSVtoRGBA(l._HSV),e),l._instantUpdate()}}}_releaseThumbUpHandler(){const e=this,a=!!e._activeComponent;e._activeComponent=null;e.disabled||e.readonly||!a||e._dragDetails&&e._dragDetails.isPalettePressed||e._instantUpdate()}_handleCancelButtonClick(e){const a=this,l=a.value;switch("palette"!==a.displayMode&&"radial"!==a.displayMode&&"hexagonal"!==a.displayMode?(a.value=l,a._HSV=a._getValue("hsv",a.value)||{h:1,s:0,v:1},a._RGBA=a._getValue("HSVtoRGBAarray",a.value)):(a._HSV=a._getValue("hsv",a.value)||{h:1,s:0,v:1},a._RGBA=a._getValue("HSVtoRGBAarray",a.value),a.value=a._getValue(a.valueFormat)),a._applyValue(a.value),a.displayMode){case"radial":a._generateRadialCanvas();break;case"hexagonal":a._generateHoneycomb(a.columnCount,a._HSV);}if(null===a.value&&a._selectedItem&&a._selectedItem.classList.contains("selected")&&a._selectedItem.classList.remove("selected"),l!==a.value&&a.$.fireEvent("change",{oldValue:l,value:a.value}),-1<a.$.container.className.indexOf("custom-color-selection")&&a._applyValueInPaletteMode(),e&&a.$.fireEvent("cancelButtonClick"),!1===a._customColorSelection){a._updatePreviewContainerValues(a.value);const e="hexagonal"===a.displayMode?a.$.colorPaletteHexagonal:a.$.gridModeContainer;let l=e.getElementsByClassName("selected");for(let e=0;e<l.length;e++)!l[e]||a.value&&a._equalValues(l[e].colorCode,a.value)||(l[e].style.stroke=null,l[e].classList.remove("selected"))}else a.$container.removeClass("custom-color-selection");if(a._customColorSelection=!1,a._customTempColor=void 0,"palette"===a.displayMode||"radial"===a.displayMode){const e=(a.shadowRoot||a).querySelector(".preview-container-top");e&&(e.style.backgroundColor=a.value)}}_handleOkButtonClick(e){const a=this,l=a.value;if(!1===a._customColorSelection||"undefined"==typeof a._customColorSelection){if(a._customTempColor&&(a._userPalette.unshift(a._customTempColor),a._generatePaletteUserColorGrid(),a._generateNewPalette=!1,a._customTempColor=""),a.value="palette"===a.displayMode||"radial"===a.displayMode||"hexagonal"===a.displayMode||a._selectedItem&&a._selectedItem.classList.contains("selected")?a._getValue(a.valueFormat):null,null===a.value)if("palette"===a.displayMode)a._applyValue(a._HSVtoRGBA(a._HSV),event);else{let e=a.$.gridModeContainer.getElementsByClassName("selected");for(let a=0;a<e.length;a++)e[a]&&e[a].classList.remove("selected")}l!==a.value&&a.$.fireEvent("change",{oldValue:l,value:a.value})}else{const e=a._getValue(a.valueFormat);return"useButtons"!==a.applyValueMode&&(a.value=e),a.$container.removeClass("custom-color-selection"),a._userPalette.unshift(e),a._generatePaletteUserColorGrid(),a._customColorSelection=!1,void(l!==a.value&&a.$.fireEvent("change",{oldValue:l,value:a.value}))}e&&a.$.fireEvent("okButtonClick",{}),a._customColorSelection=!1;"useButtons"!==a.applyValueMode||a._equalValues(a.value,a._HSVtoRGBA())||a._updatePreviewContainerValues(a._getValue("rgba"),!0)}_handleInputChange(e){var a=Math.min,l=Math.max;const t=this,r=t.value,o=e.target;if(!(t.disabled||t.readonly)){e.preventDefault(),e.stopPropagation();const n=["r-channel","g-channel","b-channel"].find(e=>-1<o.className.indexOf(e)),i=o.classList.contains("a-channel");if(n||i)o.value=n?a(255,l(0,o.value)):a(1,l(0,parseFloat(o.value)||0)),t._RGBA=t._getRGBAFromInputs(),t._HSV=t._getValue("hsv","rgba("+t._RGBA.r+", "+t._RGBA.g+", "+t._RGBA.b+", "+t._RGBA.a+")");else if(o.classList.contains("hex")){const e=t.value?t._getValue("hex"):null,a="#"+o.value;t._isHEX(a)?(t._RGBA.a=1,t._applyValue(t.editAlphaChannel?t._toRGBA(a):t._toHEX(a))):o.value=e?e.substring(1):"ffffff"}t._applyValue(t.editAlphaChannel?t._getValue("rgba"):t._getValue("hex")),"useButtons"===t.applyValueMode||-1<t.$.container.className.indexOf("custom-color-selection")||(t.value=t._getValue(t.valueFormat),t.$.fireEvent("change",{oldValue:r,value:t.value}))}}_applyValue(e,a){const l=this;return e&&null!==e&&"rgba(NaN, NaN, NaN, 1)"!==e?void(l._HSVRGBArefresh(e.trim()),"palette"===l.displayMode||-1<l.$.container.className.indexOf("custom-color-selection")?l._applyValueInPaletteMode(a):"radial"===l.displayMode?l._applyValueInRadialMode(a):"hexagonal"===l.displayMode?l._applyValueInHexagonalMode(a):l._applyValueInAnyGridMode(e.trim()),l._applyAlphaValue(l._RGBA.a),l.$.hiddenInput.value=l.value):(l._RGBA={r:255,g:255,b:255,a:1},void(l.$.hiddenInput.value=l.value))}_applyAlphaValue(e,a){const l=this;if(e=parseFloat(e),l.$.alphaChannelScale){if("alphaScale"!==a){const a=l.$.alphaChannelThumb.offsetWidth,t=l.$.alphaChannelScale.offsetWidth,r=(1-e)*t>a?(1-e)*a:0;l.$.alphaChannelThumb.style.left=(1-e)*t-r+"px"}if("alphaInput"!==a){const a=l.$.alphaChannelContainer.querySelector("input.a-channel");a.value=e}}l._RGBA.a=e,l._updatePreviewContainerValues(l._getValue("rgba"))}_applyValueInPaletteMode(e){const a=this,l=a._getValue("hex"),t=a.$.hueScale.offsetHeight,r=a.$.hueScaleThumb.offsetHeight,o=a._HSV.h?a.$.hueScale.offsetHeight*(360-a._HSV.h)/360:0,n=0<o-r?o/t*r:0,i=(a.shadowRoot||a).querySelector("input.hex");if(a._setRGBAToInputs(),i&&(i.value=l.substring(1)),a.$.alphaChannelContainer.style.setProperty("--smart-color-panel-alpha-channel-color",a._rgbArrayToHEX([a._RGBA.r,a._RGBA.g,a._RGBA.b,1])),!a._activeComponent){if(a.$.alphaChannelThumb){const e=a.$.alphaChannelThumb.offsetWidth,l=a.$.alphaChannelScale.offsetWidth,t=(1-a._RGBA.a)*l>e?(1-a._RGBA.a)*e:0;a.$.alphaChannelThumb.style.left=(1-a._RGBA.a)*l-t+"px"}a.$.hueScaleThumb.style.top=Math.min(a.$.hueScale.offsetHeight-a.$.hueScaleThumb.offsetHeight,o+n)+"px",a._setPalettePointerXYPosition()}a._activeComponent===a.$.hueScale&&(a.$.colorPalette.style.backgroundColor=a._rgbaToRGB(a._HSVtoRGBA({h:a.$.hueScaleThumb.h,s:1,v:1}))),a._activeComponent&&a._activeComponent!==a.$.colorPalette||a._setPalettePointerXYPosition(e),a.event?a._HSV.h=a.$.hueScaleThumb.h:(a.$.hueScaleThumb.h=a._HSV.h,a.$.colorPalette.style.backgroundColor=a._rgbaToRGB(a._HSVtoRGBA({h:a._HSV.h,s:1,v:1}))),a._updatePreviewContainerValues(a._getValue("rgba"))}_applyValueInRadialMode(e){const a=this,l=a._getValue("hex"),t=(a.shadowRoot||a).querySelector("input.hex");if(a._setRGBAToInputs(),t&&(t.value=l.substring(1)),a.$.alphaChannelContainer.style.setProperty("--smart-color-panel-alpha-channel-color",a._rgbArrayToHEX([a._RGBA.r,a._RGBA.g,a._RGBA.b,1])),!a._activeComponent){const e=a.$.brightnessScale.offsetHeight-a.$.brightnessScaleThumb.offsetHeight;if(a.$.alphaChannelThumb){const e=a.$.alphaChannelThumb.offsetWidth,l=a.$.alphaChannelScale.offsetWidth,t=(1-a._RGBA.a)*l>e?(1-a._RGBA.a)*e:0;a.$.alphaChannelThumb.style.left=(1-a._RGBA.a)*l-t+"px"}const l=a.inverted?a._HSV.v:1-a._HSV.v;a.$.brightnessScaleThumb.style.top=e*l+"px",a.$.colorPaletteRadial.style.setProperty("--smart-color-panel-brightness",l)}if(a._activeComponent&&a._activeComponent!==a.$.colorPaletteRadial||a._setPalettePointerXYPosition(e),a._updatePreviewContainerValues(a._getValue("rgba")),a.inverted){const e=null===a.value?"black":a._HSVtoRGBA({h:a._HSV.h,s:1,v:a._HSV.v});a.$.brightnessScale.style.backgroundImage="linear-gradient("+e+", white)"}else{const e=null===a.value?"white":a._HSVtoRGBA({h:a._HSV.h,s:a._HSV.s,v:1});a.$.brightnessScale.style.backgroundImage="linear-gradient("+e+", black)"}}_applyValueInHexagonalMode(){const e=this,a=e._getValue("hex"),l=(e.shadowRoot||e).querySelector("input.hex");if(e._setRGBAToInputs(),l&&(l.value=a?a.substring(1):null),e.$.alphaChannelContainer.style.setProperty("--smart-color-panel-alpha-channel-color",e._rgbArrayToHEX([e._RGBA.r,e._RGBA.g,e._RGBA.b,1])),!e._activeComponent&&!e._targetItem){const a=e.$.brightnessScale.offsetHeight-e.$.brightnessScaleThumb.offsetHeight;if(e.$.alphaChannelThumb){const a=e.$.alphaChannelThumb.offsetWidth,l=e.$.alphaChannelScale.offsetWidth,t=(1-e._RGBA.a)*l>a?(1-e._RGBA.a)*a:0;e.$.alphaChannelThumb.style.left=(1-e._RGBA.a)*l-t+"px"}e.$.brightnessScaleThumb.style.top=a*(e.inverted?e._HSV.v:1-e._HSV.v)+"px"}const t=e._getValue("rgba");if(e._updatePreviewContainerValues(t?t:e._getValue("hex")),e.inverted){const a=e._HSVtoRGBA({h:e._HSV.h,s:1,v:e._HSV.v},1);e.$.brightnessScale.style.backgroundImage="linear-gradient("+a+", white)"}else{const a=e._HSVtoRGBA({h:e._HSV.h,s:e._HSV.s,v:1},1);e.$.brightnessScale.style.backgroundImage="linear-gradient("+a+", black)"}e._applyValueInAnyGridMode(a,e.$.colorPaletteHexagonal)}_radialThumbPoint(e,a,l,t){var r=Math.round,o=Math.PI;const n={x:r(Math.cos(l*o/180)*t*e+e),y:r(Math.sin(l*o/180)*t*e+a)};return n}_updatePreviewContainerValues(e,a){const l=this,t=(l.shadowRoot||l).querySelector(".preview-container");t&&(("instantly"===l.applyValueMode||a)&&(t.firstElementChild.style.backgroundColor=e),t.lastElementChild.style.backgroundColor=e)}_applyValueInAnyGridMode(e,a){const l=this;if(!e&&null!==e)return;if(!a)switch(l.displayMode){case"default":a=l.$.defaultSamplesContainer;break;case"grid":a=l.$.gridSamplesContainer;break;case"materialGrid":a=l.$.materialGridSamplesContainer;break;case"spectrumGrid":a=l.$.spectrumGridSamplesContainer;break;default:a=l.$.gridModeContainer;}if(!a)return;const t=Array.from(a.getElementsByClassName("color-sample"));let r=l._targetItem;if(r===void 0||null===r)for(let a=0;a<t.length;a++){const o=t[a];if(l._equalValues(o.colorCode,e)){r=t[a];break}}-1<l.$.container.className.indexOf("custom-color-selection")&&l._HSV.h&&l._applyValueInPaletteMode(),l._changeSampleSelection(r)}_generatePaletteGrid(){const e=this;if(e.$.gridSamplesContainer){const a=e["_"+e.palette+"Palette"];let l=document.createDocumentFragment();for(let t=0;t<a.length;t++){const r=document.createElement("span"),o=a[t];r.className="color-sample",r.colorCode=o,r.style.backgroundColor=o,"rgba(255, 255, 255, 0)"===e._toRGBA(o)||"#FFFFFF00"===e._toHEX(e._toRGBA(o))||"transparent"===o?r.setAttribute("transparent",""):r.removeAttribute("transparent"),l.appendChild(r)}e.$.gridSamplesContainer.innerHTML="",e.$.gridSamplesContainer.appendChild(l)}}_generatePaletteUserColorGrid(e){const a=this;if(!a.$.userSamplesContainer)return;if(!a._userPalette||!a._userPalette.length)return void(a.$.userSamplesContainer.innerHTML="");let l,t=a._userPalette.filter(e=>""!==e).slice(0,a.columnCount||1),r=document.createDocumentFragment();t=[...new Set(t)];for(let o=0;o<t.length;o++)if(t[o]){const e=a._createColorSample(t[o],"user-color");r.appendChild(e),l||(l=e)}a.$.userSamplesContainer.innerHTML="",a.$.userSamplesContainer.appendChild(r),!e&&l.colorCode&&a._changeSampleSelection(l),a.paletteCustomColors=a._userPalette.slice(0)}_initializeBaseVars(){const e=this;void 0!==e._RGBA||(e._RGBA={r:255,g:255,b:255,a:1},e._HSV={h:0,s:0,v:1},e.$.hueScaleThumb.h=0,e.$.colorPaletteThumb.s=0,e.$.colorPaletteThumb.v=1,e.$.colorPaletteRadialThumb.h=0,e.$.colorPaletteRadialThumb.s=0,e._defaultPalette=["rgba(255, 255, 255, 0)","rgb(0, 0, 0)","rgb(153, 51, 0)","rgb(51, 51, 0)","rgb(0, 51, 0)","rgb(0, 51, 102)","rgb(0, 0, 128)","rgb(51, 51, 153)","rgb(51, 51, 51)","rgb(128, 0, 0)","rgb(255, 102, 0)","rgb(128, 128, 0)","rgb(0, 128, 0)","rgb(0, 128, 128)","rgb(0, 0, 255)","rgb(102, 102, 153)","rgb(128, 128, 128)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(153, 204, 0)","rgb(51, 153, 102)","rgb(51, 204, 204)","rgb(51, 102, 255)","rgb(128, 0, 128)","rgb(153, 153, 153)","rgb(255, 0, 255)","rgb(255, 204, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(0, 204, 255)","rgb(153, 51, 102)","rgb(192, 192, 192)","rgb(255, 153, 204)","rgb(255, 204, 153)","rgb(255, 255, 153)","rgb(204, 255, 204)","rgb(204, 255, 255)","rgb(153, 204, 255)","rgb(204, 153, 255)","rgb(255, 255, 255)"],e._grayPalette=e._generateShades(40,"gray"),e._redPalette=e._generateShades(40,"red"),e._greenPalette=e._generateShades(40,"green"),e._bluePalette=e._generateShades(40,"blue"),e._customPalette=e._mapDataSourceToPalette(),e._userPalette=e.paletteCustomColors||[],e._colorPalette={},e._cssColorNamesHEX={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},e._defaultModeThemeColors=null===e.gridThemeColors?["#FFFFFF","#000000","#E6E6E6","#495469","#5671C2","#D48439","#A5A5A5","#EEC328","#7399D3","#85AA4C"]:e.gridThemeColors,e._defaultModeStandardColors=null===e.gridStandardColors?["#A52A0D","#DB3A15","#EEC328","#FEFE33","#A6CD57","#62AC54","#65ADEE","#3F6FBE","#10205F","#64379E"]:e.gridStandardColors,e._defaultModeShadesColors=null===e.gridShadeColors?["#F2F2F2","#808080","#D0CECE","#D6DCE4","#DDEBF7","#FCE4D6","#EBEBEB","#FFF2CC","#DDE5F7","#E2EFDA","#D8D8D8","#595959","#AEAAAA","#ACB9CA","#BDD7EE","#F6CAAD","#DBDBDB","#FFE699","#B4C6E7","#C6E0B4","#BFBFBF","#404040","#757171","#8497B0","#9BC2E6","#F4B084","#C0C0C0","#FFD966","#8EA9DB","#A9D08E","#A6A6A6","#262626","#312F2F","#333F4F","#2F75B5","#C65911","#7B7B7B","#BF8F00","#305496","#548235","#808080","#0D0D0D","#161616","#222B35","#1F4E78","#833C0C","#525252","#806000","#203764","#375623"]:e.gridShadeColors,e._materialColors={Red:{50:"rgb(255, 235, 238)",100:"rgb(255, 205, 210)",200:"rgb(239, 154, 154)",300:"rgb(229, 115, 115)",400:"rgb(239, 83, 80)",500:"rgb(244, 67, 54)",600:"rgb(229, 57, 53)",700:"rgb(211, 47, 47)",800:"rgb(198, 40, 40)",900:"rgb(183, 28, 28)","A 100":"rgb(255, 138, 128)","A 200":"rgb(255, 82, 82)","A 400":"rgb(255, 23, 68)","A 700":"rgb(213, 0, 0)"},Pink:{50:"rgb(252, 228, 236)",100:"rgb(248, 187, 208)",200:"rgb(244, 143, 177)",300:"rgb(240, 98, 146)",400:"rgb(236, 64, 122)",500:"rgb(233, 30, 99)",600:"rgb(216, 27, 96)",700:"rgb(194, 24, 91)",800:"rgb(173, 20, 87)",900:"rgb(136, 14, 79)","A 100":"rgb(255, 128, 171)","A 200":"rgb(255, 64, 129)","A 400":"rgb(245, 0, 87)","A 700":"rgb(197, 17, 98)"},Purple:{50:"rgb(243, 229, 245)",100:"rgb(225, 190, 231)",200:"rgb(206, 147, 216)",300:"rgb(186, 104, 200)",400:"rgb(171, 71, 188)",500:"rgb(156, 39, 176)",600:"rgb(142, 36, 170)",700:"rgb(123, 31, 162)",800:"rgb(106, 27, 154)",900:"rgb(74, 20, 140)","A 100":"rgb(234, 128, 252)","A 200":"rgb(224, 64, 251)","A 400":"rgb(213, 0, 249)","A 700":"rgb(170, 0, 255)"},"Deep Purple":{50:"rgb(237, 231, 246)",100:"rgb(209, 196, 233)",200:"rgb(179, 157, 219)",300:"rgb(149, 117, 205)",400:"rgb(126, 87, 194)",500:"rgb(103, 58, 183)",600:"rgb(94, 53, 177)",700:"rgb(81, 45, 168)",800:"rgb(69, 39, 160)",900:"rgb(49, 27, 146)","A 100":"rgb(179, 136, 255)","A 200":"rgb(124, 77, 255)","A 400":"rgb(101, 31, 255)","A 700":"rgb(98, 0, 234)"},Indigo:{50:"rgb(232, 234, 246)",100:"rgb(197, 202, 233)",200:"rgb(159, 168, 218)",300:"rgb(121, 134, 203)",400:"rgb(92, 107, 192)",500:"rgb(63, 81, 181)",600:"rgb(57, 73, 171)",700:"rgb(48, 63, 159)",800:"rgb(40, 53, 147)",900:"rgb(26, 35, 126)","A 100":"rgb(140, 158, 255)","A 200":"rgb(83, 109, 254)","A 400":"rgb(61, 90, 254)","A 700":"rgb(48, 79, 254)"},Blue:{50:"rgb(227, 242, 253)",100:"rgb(187, 222, 251)",200:"rgb(144, 202, 249)",300:"rgb(100, 181, 246)",400:"rgb(66, 165, 245)",500:"rgb(33, 150, 243)",600:"rgb(30, 136, 229)",700:"rgb(25, 118, 210)",800:"rgb(21, 101, 192)",900:"rgb(13, 71, 161)","A 100":"rgb(130, 177, 255)","A 200":"rgb(68, 138, 255)","A 400":"rgb(41, 121, 255)","A 700":"rgb(41, 98, 255)"},"Light Blue":{50:"rgb(225, 245, 254)",100:"rgb(179, 229, 252)",200:"rgb(129, 212, 250)",300:"rgb(79, 195, 247)",400:"rgb(41, 182, 246)",500:"rgb(3, 169, 244)",600:"rgb(3, 155, 229)",700:"rgb(2, 136, 209)",800:"rgb(2, 119, 189)",900:"rgb(1, 87, 155)","A 100":"rgb(128, 216, 255)","A 200":"rgb(64, 196, 255)","A 400":"rgb(0, 176, 255)","A 700":"rgb(0, 145, 234)"},Cyan:{50:"rgb(224, 247, 250)",100:"rgb(178, 235, 242)",200:"rgb(128, 222, 234)",300:"rgb(77, 208, 225)",400:"rgb(38, 198, 218)",500:"rgb(0, 188, 212)",600:"rgb(0, 172, 193)",700:"rgb(0, 151, 167)",800:"rgb(0, 131, 143)",900:"rgb(0, 96, 100)","A 100":"rgb(132, 255, 255)","A 200":"rgb(24, 255, 255)","A 400":"rgb(0, 229, 255)","A 700":"rgb(0, 184, 212)"},Teal:{50:"rgb(224, 242, 241)",100:"rgb(178, 223, 219)",200:"rgb(128, 203, 196)",300:"rgb(77, 182, 172)",400:"rgb(38, 166, 154)",500:"rgb(0, 150, 136)",600:"rgb(0, 137, 123)",700:"rgb(0, 121, 107)",800:"rgb(0, 105, 92)",900:"rgb(0, 77, 64)","A 100":"rgb(167, 255, 235)","A 200":"rgb(100, 255, 218)","A 400":"rgb(29, 233, 182)","A 700":"rgb(0, 191, 165)"},Green:{50:"rgb(232, 245, 233)",100:"rgb(200, 230, 201)",200:"rgb(165, 214, 167)",300:"rgb(129, 199, 132)",400:"rgb(102, 187, 106)",500:"rgb(76, 175, 80)",600:"rgb(67, 160, 71)",700:"rgb(56, 142, 60)",800:"rgb(46, 125, 50)",900:"rgb(27, 94, 32)","A 100":"rgb(185, 246, 202)","A 200":"rgb(105, 240, 174)","A 400":"rgb(0, 230, 118)","A 700":"rgb(0, 200, 83)"},"Light Green":{50:"rgb(241, 248, 233)",100:"rgb(220, 237, 200)",200:"rgb(197, 225, 165)",300:"rgb(174, 213, 129)",400:"rgb(156, 204, 101)",500:"rgb(139, 195, 74)",600:"rgb(124, 179, 66)",700:"rgb(104, 159, 56)",800:"rgb(85,139,47)",900:"rgb(51,105,30)","A 100":"rgb(204,255,144)","A 200":"rgb(178,255,89)","A 400":"rgb(118,255,3)","A 700":"rgb(100, 221, 23)"},Lime:{50:"rgb(249, 251, 231)",100:"rgb(255, 249, 196)",200:"rgb(255, 245, 157)",300:"rgb(255, 241, 118)",400:"rgb(255, 238, 88)",500:"rgb(255, 235, 59)",600:"rgb(253, 216, 53)",700:"rgb(251, 192, 45)",800:"rgb(249, 168, 37)",900:"rgb(245, 127, 23)","A 100":"rgb(244, 255, 129)","A 200":"rgb(238, 255, 65)","A 400":"rgb(198, 255, 0)","A 700":"rgb(174, 234, 0)"},Yellow:{50:"rgb(255, 253, 231)",100:"rgb(255, 249, 196)",200:"rgb(255, 245, 157)",300:"rgb(255, 241, 118)",400:"rgb(255, 238, 88)",500:"rgb(255, 235, 59)",600:"rgb(253, 216, 53)",700:"rgb(251, 192, 45)",800:"rgb(249, 168, 37)",900:"rgb(245, 127, 23)","A 100":"rgb(255, 255, 141)","A 200":"rgb(255, 255, 0)","A 400":"rgb(255, 234, 0)","A 700":"rgb(255, 214, 0)"},Amber:{50:"rgb(255, 248, 225)",100:"rgb(255, 236, 179)",200:"rgb(255, 224, 130)",300:"rgb(255, 213, 79)",400:"rgb(255, 202, 40)",500:"rgb(255, 193, 7)",600:"rgb(255, 179, 0)",700:"rgb(255, 160, 0)",800:"rgb(255, 143, 0)",900:"rgb(255, 111, 0)","A 100":"rgb(255, 229, 127)","A 200":"rgb(255, 215, 64)","A 400":"rgb(255, 196, 0)","A 700":"rgb(255, 171, 0)"},Orange:{50:"rgb(255, 243, 224)",100:"rgb(255, 224, 178)",200:"rgb(255, 204, 128)",300:"rgb(255, 183, 77)",400:"rgb(255, 167, 38)",500:"rgb(255, 152, 0)",600:"rgb(251, 140, 0)",700:"rgb(245, 124, 0)",800:"rgb(239, 108, 0)",900:"rgb(230, 81, 0)","A 100":"rgb(255, 209, 128)","A 200":"rgb(255, 171, 64)","A 400":"rgb(255, 145, 0)","A 700":"rgb(255, 109, 0)"},"Deep Orange":{50:"rgb(251, 233, 231)",100:"rgb(255, 204, 188)",200:"rgb(255, 171, 145)",300:"rgb(255, 138, 101)",400:"rgb(255, 112, 67)",500:"rgb(255, 87, 34)",600:"rgb(244, 81, 30)",700:"rgb(230, 74, 25)",800:"rgb(216, 67, 21)",900:"rgb(191, 54, 12)","A 100":"rgb(255, 158, 128)","A 200":"rgb(255, 110, 64)","A 400":"rgb(255, 61, 0)","A 700":"rgb(221, 44, 0)"},Brown:{50:"rgb(239, 235, 233)",100:"rgb(215, 204, 200)",200:"rgb(188, 170, 164)",300:"rgb(161, 136, 127)",400:"rgb(141, 110, 99)",500:"rgb(121, 85, 72)",600:"rgb(109, 76, 65)",700:"rgb(93, 64, 55)",800:"rgb(78, 52, 46)",900:"rgb(62, 39, 35)","A 100":"","A 200":"","A 400":"","A 700":""},Grey:{50:"rgb(250, 250, 250)",100:"rgb(245, 245, 245)",200:"rgb(238, 238, 238)",300:"rgb(224, 224, 224)",400:"rgb(189, 189, 189)",500:"rgb(158, 158, 158)",600:"rgb(117, 117, 117)",700:"rgb(97, 97, 97)",800:"rgb(66, 66, 66)",900:"rgb(33, 33, 33)","A 100":"","A 200":"","A 400":"","A 700":""},"Blue Grey":{50:"rgb(236, 239, 241)",100:"rgb(207, 216, 220)",200:"rgb(176, 190, 197)",300:"rgb(144, 164, 174)",400:"rgb(120, 144, 156)",500:"rgb(96, 125, 139)",600:"rgb(84, 110, 122)",700:"rgb(69, 90, 100)",800:"rgb(55, 71, 79)",900:"rgb(38, 50, 56)","A 100":"","A 200":"","A 400":"","A 700":""}})}_mapDataSourceToPalette(){const e=this;let a=[];if(!e.paletteColors||!Array.isArray(e.paletteColors)||0===e.paletteColors.length)return[];for(let l=0;l<e.paletteColors.length;l++){const t=e.paletteColors[l];"string"==typeof t?a.push(e.paletteColors[l]):"object"==typeof t&&(t.value&&"string"==typeof t||t[e.valueMember]&&"string"==typeof t[e.valueMember])?a.push(e.paletteColors[l]):a.push(e.paletteColors[l])}return a}_handleSampleClick(e){const a=this,l=e.target,t=a.value;let r=l.colorCode;"hexagonal"===a.displayMode?(r=a._HSVtoRGBA({h:l.h,s:l.s,v:l.v},a._RGBA.a),-1<a._hexagonItems.indexOf(l)&&(a._HSV.h=l.h,a.inverted?(a._HSV.s=l.s,a._HSV.v=l.v):(a._HSV.s=l.s,a._HSV.v=l.v),a._targetItem=l,a._applyValue(a._HSVtoRGBA(a._HSV),e),delete a._targetItem)):a._changeSampleSelection(l),a._HSVRGBArefresh(l.classList.contains("selected")?r:null);"instantly"!==a.applyValueMode||(a.$.hiddenInput.value=a.value=a._getValue(a.valueFormat,l.classList.contains("selected")?r:null),a.value!==t&&a.$.fireEvent("change",{oldValue:t,value:a.value}))}_changeSampleSelection(e){const a=this;if(!(a._selectedItem&&"radial"!==a.displayMode&&"hexagonal"!==a.displayMode&&(!e||a._selectedItem===e&&e.classList.contains("selected")))&&e){const l=a._getContrastColor(a._rgbaToHEX(a._toRGBA(e.colorCode))),t=e.closest("svg");return Array.from((a.shadowRoot||a).querySelectorAll(".selected")).forEach(e=>{e.classList.remove("selected"),e.style.stroke=null}),e.classList.add("selected"),a._selectedItem=e,t&&(e.style.stroke=l,t.appendChild(e)),!0}}_getContrastColor(e){function a(a,l,e){return[parseInt(a,16),parseInt(l,16),parseInt(e,16)]}if(void 0!==e){let l=a(e.slice(1,3),e.slice(3,5),e.slice(5,7)),t=(.299*l[0]+.61*l[1]+.114*l[2])/255;return .6<t?"#000000":"#FFFFFF"}}_getXYcoordinates(e){if(!e)return;const a=this,l=a._activeComponent||(e.originalEvent||e).target;if(!l.closest)return;const t=l.closest(".color-palette")||l.closest(".color-palette-radial")||l.closest(".hue-scale")||l.closest(".brightness-scale")||l.closest(".alpha-channel-scale");if(!t||a.disabled||a.readonly)return;const r=t.getBoundingClientRect();let o=e.pageX-window.pageXOffset-r.left,n=e.pageY-window.pageYOffset-r.top;return 0>o?o=0:o>t.offsetWidth&&(o=t.offsetWidth),0>n?n=0:n>t.offsetHeight&&(n=t.offsetHeight),{x:o,y:n,container:t}}_inputWheelHandler(e){const a=this,l=a.value,t=e.target;if(!(e.target instanceof HTMLInputElement)||e.target.classList.contains("hex"))return;e.preventDefault();let r;return t.classList.contains("a-channel")?(r=parseFloat(t.value)||0,r=0>e.deltaY?r+.01:r-.01,t.value=a._toFixed(a._validateInRange(r,0,1)),a._RGBA=a._getRGBAFromInputs(),a._applyAlphaValue(a._RGBA.a,"alphaInput")):(r=parseInt(t.value)||0,r=0>e.deltaY?r+1:r-1,t.value=a._validateInRange(r,0,255),a._RGBA=a._getRGBAFromInputs(),a._HSV=a._getValue("hsv","rgba("+a._RGBA.r+", "+a._RGBA.g+", "+a._RGBA.b+", "+a._RGBA.a+")")),a._updatePreviewContainerValues(a._getValue(a.valueFormat)),a._setPalettePointerXYPosition(),"useButtons"===a.applyValueMode&&("palette"===a.displayMode?a._applyValueInPaletteMode():"radial"===a.displayMode?a._applyValueInRadialMode():"hexagonal"===a.displayMode&&a._generateHoneycomb(a.columnCount,a._HSV)),-1<a.$.container.className.indexOf("custom-color-selection")?void a._applyValue(a._HSVtoRGBA(a._HSV)):void("useButtons"===a.applyValueMode||(a.value=a._getValue(a.valueFormat),a._applyValue(a.value,e),a.$.fireEvent("change",{oldValue:l,value:a.value})))}_paletteDownHandler(e){const a=this;if(!(!Smart.Utilities.Core.isMobile&&0!==e.button||a.disabled||a.readonly)){a._dragDetails={x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset};const l=(e.originalEvent||e).target;if(l&&l.closest)return a._dragDetails.target=l.closest(".color-palette")||l.closest(".color-palette-radial"),l.closest(".color-palette")||l.closest(".color-palette-radial")?(a._handleColorPaletteDown(e.originalEvent),void(a._dragDetails.isPalettePressed=!0)):void((l.closest(".hue-scale")||l.closest(".alpha-channel-scale")||l.closest(".brightness-scale"))&&a._handleScalesDown(e.originalEvent))}}_setPalettePointerXYPosition(e){var a=Math.round,l=Math.PI,t=Math.min,r=Math.max;const o=this;let n;if("palette"===o.displayMode||-1<o.$.container.className.indexOf("custom-color-selection"))n=o._getXYcoordinates(e),o.$.colorPaletteThumb.style.left=e&&n&&n.x?100*n.x/n.container.offsetWidth+"%":100*o._HSV.s+"%",o.$.colorPaletteThumb.style.top=e&&n&&n.y?100*n.y/n.container.offsetHeight+"%":100*(1-o._HSV.v)+"%";else if("radial"===o.displayMode)if(e){if(n=o._getXYcoordinates(e),!n)return;const i=n.container.offsetWidth?n.container.offsetWidth:o.$.colorPaletteRadial.offsetWidth,s=n.container.offsetHeight?n.container.offsetHeight:o.$.colorPaletteRadial.offsetHeight,d=a(Math.cos(o._HSV.h*l/180)*i/2+i/2),u=a(Math.sin(o._HSV.h*l/180)*i/2+s/2);return 5>Math.abs(i/2-n.x)?(o.$.colorPaletteRadialThumb.style.left=100*n.x/o.$.colorPaletteRadial.offsetWidth+"%",void(o.$.colorPaletteRadialThumb.style.top=100*n.y/o.$.colorPaletteRadial.offsetHeight+"%")):(o.$.colorPaletteRadialThumb.style.left=100*(n.x<i/2?r(d,n.x):t(d,n.x))/i+"%",void(o.$.colorPaletteRadialThumb.style.top=100*(n.y<s/2?r(u,n.y):t(u,n.y))/s+"%"))}else{const e=o._radialThumbPoint(o.$.colorPaletteRadial.offsetWidth/2,o.$.colorPaletteRadial.offsetHeight/2,o._HSV.h,o._HSV.s);o.$.colorPaletteRadialThumb.style.left=100*e.x/o.$.colorPaletteRadial.offsetWidth+"%",o.$.colorPaletteRadialThumb.style.top=100*e.y/o.$.colorPaletteRadial.offsetHeight+"%"}}_handleGridModeCellHover(e){const a=this,l=e.target.closest(".color-sample");if(!a.disabled&&l&&"none"!==a.tooltipDisplayMode&&a.$.tooltip){if(a.$.tooltip.arrow="hexagonal"!==a.displayMode,!a._isValidColor(l.colorCode))return void(a.$.tooltip.disabled=!0);a.$.tooltip.disabled=!1,a.$.tooltip.selector=l;const e=l.h&&l.s&&l.v?a._HSVtoRGBA({h:l.h,s:l.s,v:l.v},a._RGBA.a):a._toRGBA(l.colorCode);switch(a.tooltipDisplayMode){case"rgba":a.$.tooltip.value=e||"";break;case"rgb":a.$.tooltip.value=a._rgbaToRGB(e)||"";break;case"hex":a.$.tooltip.value=a._rgbaToHEX(e)||"";}}}_localizeLabels(){const e=this,a=(e.shadowRoot||e).querySelector("label.r-channel"),l=(e.shadowRoot||e).querySelector("label.g-channel"),t=(e.shadowRoot||e).querySelector("label.b-channel"),r=(e.shadowRoot||e).querySelector("label.a-channel"),o=(e.shadowRoot||e).querySelector("label.hex");if(a&&(a.innerHTML=e.localize("redPrefix")),l&&(l.innerHTML=e.localize("greenPrefix")),t&&(t.innerHTML=e.localize("bluePrefix")),r&&(r.innerHTML=e.localize("alphaPrefix")),o&&(o.innerHTML=e.localize("hexPrefix")),e.$.buttonCustom&&(e.$.buttonCustom.content=e.localize("customColor")),e.$.buttonOk&&(e.$.buttonOk.content=e.localize("ok")),e.$.buttonCancel&&(e.$.buttonCancel.content=e.localize("cancel")),e.$.defaultSamplesContainer){const a=e.$.defaultSamplesContainer.querySelector(".theme-colors-label"),l=e.$.defaultSamplesContainer.querySelector(".standard-colors-label");a&&(a.innerHTML=e.localize("themeColors")),l&&(l.innerHTML=e.localize("standardColors"))}}_generateHoneycomb(e,a){const l=this,t=parseInt(getComputedStyle(l).getPropertyValue("--smart-color-panel-grid-mode-item-size"))/4,r=Math.sqrt(5*Math.pow(t,2)),o=0==e%2?parseInt(e)+1:parseInt(e),n=a&&a.s!==void 0?a.s:1,i=a&&a.v!==void 0?a.v:1,d=l._calculateHexagonCoords(o,r,1),u=d[Math.floor(d.length/2)],s=l._getHoneycomb30degDimmensions(d.length,r,1);l._draw||(l._draw=new Smart.Utilities.Draw(l.$.colorPaletteHexagonal)),l._draw.clear(),l._hexagonItems=[],l.$.materialGridSamplesContainer&&l.$.materialGridSamplesContainer.$.addClass("smart-hidden");for(let t=0;t<d.length;t++){const e=d[t].x-u.x,a=d[t].y-u.y,o=l._validateInRange(l._calcSatDistance(e,a)/u.x,0,1);let g,s,c=0>l._calcHueAngle(e,a)?360+l._calcHueAngle(e,a):l._calcHueAngle(e,a);switch(l.inverted?(g=n,s=o):(g=o,s=i),l.palette){case"red":c=0;break;case"green":c=120;break;case"blue":c=240;break;case"gray":g=0,s=l.inverted?o:1-o;}const h={offsetX:d[t].x,offsetY:d[t].y,style:{fill:l._HSVtoRGBA({h:c,s:g,v:s},1),class:"color-sample"}};let p=l._hexagon(r,h);p.colorCode=l._HSVtoRGBA({h:c,s:g,v:s}),p.h=c,p.s=g,p.v=s,l._hexagonItems.push(p)}l._draw.host.style.width=s.width+"px",l._draw.host.style.height=s.height+"px",l.$.container.style.setProperty("--smart-color-panel-palette-width",s.width+"px"),l.$.container.style.setProperty("--smart-color-panel-palette-height",s.height+"px"),l._applyValueInHexagonalMode(),l._hideControlsByPriority()}_hexagon(e,a){const l=this,t=l._shortStepHexagon(e),r=2*t,o=r+(a.offsetX||0),n=a.offsetY||0,i=o+r,s=n+t,d=i,u=s+e,g=d-r,c=u+t,h=g-r,p=c-t,b=l._draw.path("M "+o+","+n+" L "+i+","+s+" L "+d+","+u+" L "+g+","+c+" L "+h+","+p+" L "+h+","+(p-e)+" Z",a.style||{class:"color-sample"});return b}_shortStepHexagon(e){return Math.sqrt(Math.pow(e,2)/5)}_getHoneycomb30degDimmensions(e,a,l){const t=this,r=.5*(1+Math.sqrt(1-4*((1-e)/3))),o=t._shortStepHexagon(a);return{width:(2*r-1)*(4*o)+2*(2*r)*l,height:(2*r-1)*a+2*r*o+2*r*l}}_generateShades(e,a){var l=Math.max;const t=this,r=a||"gray";let o,n=[];e=l(parseInt(e),2);const s=255/(e-1);for(let d,u=0;u<e;u++)d=l(parseInt(255-u*s),0),t.inverted&&(d=255-d),o="red"===r?"rgb("+d+", 0, 0)":"green"===r?"rgb(0, "+d+", 0)":"blue"===r?"rgb(0, 0, "+d+")":"rgb("+d+", "+d+", "+d+")",n.push(o);return n}_generateColorSpectrum(e){var a=Math.min,l=Math.max;const t=this;let r=[];e=l(parseInt(e),2);const o=360/(e-1),n=2/e;let i=0,s=1,d=1;for(let u=0;u<e;u++){t.inverted?0==u?s=1:u<e/2?s=l(s-n,n/2):u<e-1?(d=l(d-n,n/2),s=a(s+n,1)):(d=l(d-n,n/2),s=a(s+n/4,1)):0==u?d=1:u<e/2?d=l(d-n,n/2):u<e-1?(s=l(s-n,n/2),d=a(d+n,1)):(s=l(s-n,n/2),d=a(d+n/4,1));for(let a=0;a<e;a++)i=parseInt(o*a),i=360===i?360-o/2:i,r.push(t._HSVtoRGBA({h:i,s:s,v:d},1))}return r}_generateSpectrumGrid(e){const a=this;if(!a.$.spectrumGridSamplesContainer)return;const l=Math.pow(e,2),t=document.createDocumentFragment(),r={},o=a._generateShades(e,"gray"),n=a._customPalette;let s;["grayShadesBox","spectrumBox","customColorsBox"].forEach(e=>{r[e]=document.createElement("div"),r[e].className=Smart.Utilities.Core.toDash(e),t.appendChild(r[e])}),s="default"===a.palette?a._generateColorSpectrum(e):-1<["gray","red","green","blue"].indexOf(a.palette)?a._generateShades(l,a.palette):a._generateColorSpectrum(e);for(let l=0;l<e;l++){const e=a._createColorSample(o[l],"gray-shade");r.grayShadesBox.appendChild(e)}for(let t=0;t<l;t++){const e=a._createColorSample(s[t],"spectrum");r.spectrumBox.appendChild(e)}for(let l=0;l<e;l++){const e=n[l];if(!e)break;const t=a._createColorSample(e,"custom-color");r.customColorsBox.appendChild(t)}a.$.spectrumGridSamplesContainer.innerHTML="",a.$.spectrumGridSamplesContainer.appendChild(t)}_generateDefaultGrid(){const e=this;if(!e.$.defaultSamplesContainer)return;const a={},l=null===e.gridThemeColors?e._defaultModeThemeColors:e.gridThemeColors,t=null===e.gridShadeColors?e._defaultModeShadesColors:e.gridShadeColors,r=null===e.gridStandardColors?e._defaultModeStandardColors:e.gridStandardColors,o=document.createDocumentFragment();["themeColorsLabel","themeColorsBox","themeShadesBox","standardColorsLabel","standardColorsBox"].forEach(e=>{a[e]=document.createElement("div"),a[e].className=Smart.Utilities.Core.toDash(e),o.appendChild(a[e])}),a.themeColorsLabel.innerHTML=e.localize("themeColors"),"Theme colors",a.standardColorsLabel.innerHTML=e.localize("standardColors"),"Standard colors";for(let l=0;l<e._defaultModeShadesColors.length;l++)a.themeShadesBox.appendChild(e._createColorSample(t[l],"shades-color"));for(let t=0;t<10;t++)a.themeColorsBox.appendChild(e._createColorSample(l[t],"theme-color")),a.standardColorsBox.appendChild(e._createColorSample(r[t],"standard-color"));e.$.defaultSamplesContainer.innerHTML="",e.$.defaultSamplesContainer.appendChild(o)}_mixColors(e,a,l){const t=e=>e.toString(16),r=e=>parseInt(e,16);let o,n="#";l="undefined"==typeof l?.5:l,e=e.replace(/#/g,""),a=a.replace(/#/g,"");for(let s=0;5>=s;s+=2){const i=r(e.substr(s,2)),d=r(a.substr(s,2));for(o=t(Math.round(d+(i-d)*l));2>o.length;)o="0"+o;n+=o}return n}_generateMaterialGrid(){const e=this;if(!e.$.materialGridSamplesContainer)return;const a=document.createDocumentFragment();e.$.materialGridSamplesContainer.$.removeClass("smart-hidden"),a.appendChild(e._createColorSample("rgb(255, 255, 255, 0)","material-color label-column")),Object.entries(e._materialColors.Red).forEach(l=>{const t=e._createColorSample("rgb(255, 255, 255, 0)","material-color header");t.textContent=l[0],a.appendChild(t)}),Object.entries(e._materialColors).forEach(l=>{const t=e._createColorSample("rgb(255, 255, 255, 0)","material-color label-column");t.textContent=l[0],a.appendChild(t),Object.entries(l[1]).forEach(l=>{a.appendChild(e._createColorSample(l[1],"material-color"))})}),e.$.materialGridSamplesContainer.innerHTML="",e.$.materialGridSamplesContainer.appendChild(a)}_createColorSample(e,a){const l=document.createElement("div"),t=e?"":" empty";return(l.className="color-sample "+a+t,-1<a.indexOf("header")||-1<a.indexOf("label-column"))?l:(l.colorCode=e,l.style.backgroundColor=e,l)}_calculateHexagonCoords(e,a,l){const t=this,r=e,o=function(e){return e=0==e%2?e+1:e,(e+1)/2}(e),n=t._shortStepHexagon(a),s=2*n+l,d=s*(r-1)/2;let i=[];for(let t=0;t<r;t++){const r=t<o?o+t:e-1-(t-o),u=t<o?d-t*s:d-(e-t-1)*s,g=t*(a+n+l);for(let e=0;e<r;e++){const a=u+e*(4*n+2*l);i.push({x:a,y:g})}}return i}_generateGridStructures(){const e=this;if(!e._initializeOnOpening){if(void 0===e._createGridModeComponents()){switch(e.displayMode){case"spectrumGrid":e._generateSpectrumGrid(e.columnCount);break;case"materialGrid":e._generateMaterialGrid();break;case"default":e._generateDefaultGrid();break;case"grid":e._generatePaletteGrid();}return void e._generatePaletteUserColorGrid()}switch(e._createColorControls(),e.displayMode){case"radial":e._generateRadialCanvas();break;case"hexagonal":e._generateHoneycomb(e.columnCount,e._HSV);}}}_generateRadialCanvas(){const e=this;if("radial"!==e.displayMode||"radial"===e.displayMode&&!Smart.Utilities.Core.Browser.Firefox)return;const a=e.$.colorPaletteRadial.offsetWidth,l=a/2;let t=e.$.colorPaletteRadial.querySelector("canvas");t||(t=document.createElement("canvas"));let r=t.getContext("2d"),o=r.createImageData(a,a),n=o.data;t.width=t.height=a;for(let a=-l;a<l;a++)for(let t=-l;t<l;t++){let[o,r]=e._xy2polar(a,t);if(o>l)continue;let i=a+l,s=t+l,d=(i+s*(2*l))*4,u=e._rad2deg(r);const[g,c,h]=e._hsv2rgb(u,1,1);n[d]=g,n[d+1]=c,n[d+2]=h,n[d+3]=255}r.putImageData(o,0,0),e.$.colorPaletteRadial.appendChild(t)}_xy2polar(e,a){let l=Math.sqrt(e*e+a*a),t=Math.atan2(a,e);return[l,t]}_rad2deg(e){var a=Math.PI;return 360*((e+a)/(2*a))}_hsv2rgb(e,a,l){let t,o,n,i=l*a,s=e/60,d=i*(1-Math.abs(s%2-1));0<=s&&1>=s?[t,o,n]=[i,d,0]:1<=s&&2>=s?[t,o,n]=[d,i,0]:2<=s&&3>=s?[t,o,n]=[0,i,d]:3<=s&&4>=s?[t,o,n]=[0,d,i]:4<=s&&5>=s?[t,o,n]=[d,0,i]:5<=s&&6>=s&&([t,o,n]=[i,0,d]);let u=l-i,[c,r,g]=[t+u,o+u,n+u];return[255*c,255*r,255*g]}_hideControlsByPriority(){function e(e){const l=a.getElementsByClassName(e);for(let a=0;a<l.length;a++)l[a].classList.add("smart-hidden")}const a=this,l=(a.shadowRoot||a).querySelector(".color-controls-container");if(!l.innerHTML.trim())return;const t=a.hideContentToFit.slice().reverse(),r=["hex","r-channel","g-channel","b-channel","a-channel","preview-container"];let o=t.length;for(r.forEach(e=>{const l=a.getElementsByClassName(e);for(let a=0;a<l.length;a++)l[a].classList.remove("smart-hidden")});l.scrollHeight>l.offsetHeight&&0<o;)switch(o--,t[o]){case"HEX":e(r[0]);break;case"RGB":r.slice(1,4).forEach(a=>e(a));break;case"previewContainer":e(r[5]);break;case"alpha":e(r[4]);}a._generateRadialCanvas()}_resizeHoneycombItems(){const e=this;"hexagonal"!==e.displayMode||e._generateHoneycomb(e.columnCount,e._HSV)}_getValue(e,a){const l=this,t=l._RGBA;let r,o=null;switch(e){case"hex":o=l._rgbArrayToHEX([t.r,t.g,t.b,t.a]);break;case"rgb":o="rgb("+t.r+", "+t.g+", "+t.b+")";break;case"rgba":o=null!==t.r&&null!==t.g&&null!==t.b?"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")":null;break;case"HSVtoRGBAarray":{let e="hexagonal"===l.displayMode||"radial"===l.displayMode||"palette"===l.displayMode?l._RGBA.a:1;a&&(l._isRGBA(a)&&/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.test(a.replace(/\s/g,""))?e=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(a.replace(/\s/g,""))[4]:l._isHEX(a)&&/(^#[0-9A-F]{8}$)/gi.test(a.replace(/\s/g,""))&&(e=parseInt(/(^#[0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2}$)/gi.exec(a.replace(/\s/g,""))[4],16)/255),e=Math.min(1,Math.max(0,parseFloat(e))),isNaN(e)&&(e=l._RGBA.a)),o=l._HSVtoRGBA(l._HSV,e),r=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(o.replace(/\s/g,"")),o={r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:parseFloat(r[4])};break}case"hsv":a&&l._isValidColor(a)&&(o=l._colorToHSV(a));break;default:"radial"===l.displayMode||"hexagonal"===l.displayMode||"palette"===l.displayMode?(o="rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")",!l.editAlphaChannel&&(o=l._rgbaToRGB(o))):null===a?o=null:o=l._rgbArrayToHEX([t.r,t.g,t.b,t.a]);}return o||null}_instantUpdate(){const e=this,a=e.value;"instantly"!==e.applyValueMode||-1<e.$.container.className.indexOf("custom-color-selection")||(e.value=e._getValue(e.valueFormat),e.$.fireEvent("change",{oldValue:a,value:e.value}))}_equalValues(e,a){const l=this;if(e===a)return!0;return!!(e&&a)&&l._toRGBA(e,!0)===l._toRGBA(a,!0)}_toHEX(e){const a=this;return a._isHEX(e)?e:(a._isRGB(e)&&(e=e.toLowerCase().replace("rgb","rgba"),e=a.editAlphaChannel?e.replace(")",", "+(a._RGBA.a||1)+")"):e.replace(")",", 1)")),a._isRGBA(e))?a._rgbaToHEX(e):void 0}_toRGBA(e,l){function a(e){const t=/^#(.)(.)(.)$/gi.exec(e),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e),n=t?parseInt(t[1]+t[1],16):parseInt(o[1],16),r=t?parseInt(t[2]+t[2],16):parseInt(o[2],16),i=t?parseInt(t[3]+t[3],16):parseInt(o[3],16),s=t?parseInt(t[4]+t[4],16):parseInt(o[4],16);return l?"rgba("+n+", "+r+", "+i+", 1)":"rgba("+n+", "+r+", "+i+", "+(isNaN(s)?"1":s/255)+")"}const t=this;let r=t.value;if(t._isRGBA(e)){if(l){let a=e.match(/(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})/gi);return"rgba("+a+", 1)"}return e}if(t._isValidColorName(e))r=a(t._cssColorNamesHEX[e.trim().toLowerCase()]);else if(t._isHEX(e))r=a(e);else if(t._isRGB(e))r=e.toLowerCase(),r=r.replace("rgb","rgba"),r=t.editAlphaChannel?r.replace(")",", "+(t._RGBA.a||1)+")"):r.replace(")",", 1)");else return!1;return r}_rgbaToRGB(e){const a=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));return"rgb("+a[1].trim()+", "+a[2].trim()+", "+a[3].trim()+")"}_rgbaToHEX(e){const a=this,l=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e.replace(/\s/g,""));return a._rgbArrayToHEX([l[1],l[2],l[3],l[4]])}_rgbArrayToHEX(e){let a="#";if(Array.isArray(e)&&null===e[0])return null;for(let l,t=0;3>t;t++)l=parseInt(e[t]).toString(16).toUpperCase(),l=1===l.length?0+l:l,a+=l;let l=parseFloat(e[3]);return isNaN(l)||(l=parseInt(255*l).toString(16).toUpperCase(),"FF"!==l&&(a=a.slice(0,7)+(1===l.length?0+l:l))),a}_colorToHSV(e){var a=Math.min,l=Math.max;const t=this;if(!t._isValidColor(e))return;e=t._toRGBA(e).replace(/\s/g,"");const o=/rgba\((\d*.\d+|\d+),(\d*.\d+|\d+),(\d*.\d+|\d+)\,(\d*.\d+|\d+)\)/gi.exec(e),n=a(255,l(0,parseFloat(o[1])))/255,r=a(255,l(0,parseFloat(o[2])))/255,i=a(255,l(0,parseFloat(o[3])))/255;let s={h:0,s:0,v:0},d=0,u=0;if(n>=r&&n>=i?(u=n,d=r>i?i:r):r>=i&&r>=n?(u=r,d=n>i?i:n):(u=i,d=r>n?n:r),s.v=u,s.s=u?(u-d)/u:0,!s.s)s.h=t._HSV.h?t._HSV.h:0;else{const e=u-d;s.h=n==u?(r-i)/e:r==u?2+(i-n)/e:4+(n-r)/e,s.h*=60,0>s.h&&(s.h+=360)}return s.s=parseFloat(s.s),s.v=parseFloat(s.v),s}_HSVtoRGBA(e,l){var a=Math.round;e=e||{h:0,s:0,v:0};const t=this,o=e&&0<=e.h?e.h:t._HSV.h,n=e&&0<=e.s?e.s:t._HSV.s,i=e&&0<=e.v?e.v:t._HSV.v;let s,d,u,c=i*n,h=o/60,p=c*(1-Math.abs(h%2-1));0<=h&&1>=h?[s,d,u]=[c,p,0]:1<=h&&2>=h?[s,d,u]=[p,c,0]:2<=h&&3>=h?[s,d,u]=[0,c,p]:3<=h&&4>=h?[s,d,u]=[0,p,c]:4<=h&&5>=h?[s,d,u]=[p,0,c]:5<=h&&6>=h&&([s,d,u]=[c,0,p]);const _=i-c,m=a(255*(s+_)),r=a(255*(d+_)),g=a(255*(u+_));return"rgba("+m+", "+r+", "+g+", "+(l===void 0?t._RGBA.a||0:l)+")"}_HSVRGBArefresh(e){const a=this;a._HSV=a._getValue("hsv",e)||{h:1,s:0,v:1},a._RGBA=a._getValue("HSVtoRGBAarray",e)}_toFixed(e,a){return parseFloat(parseFloat(e).toFixed(a||2))}_validateInRange(e,a,l){return Math.min(Math.max(parseFloat(e),parseFloat(a)),parseFloat(l))}_isHEX(e){return /(^#[0-9A-F]{3}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{8}$)/i.test(e)}_isRGB(e){return /rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\)/i.test(e)}_isRGBA(e){return /rgba\((\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\s*,\s*(\d*.\d+|\d+)\)/i.test(e)}_isValidColorName(e){return!!(e&&"undefined"!=typeof this._cssColorNamesHEX[e.trim().toLowerCase()])}_isValidColor(e){return this._isHEX(e)||this._isRGB(e)||this._isRGBA(e)||this._isValidColorName(e)}_getRGBAFromInputs(){const e=this;let l=(e.shadowRoot||e).querySelector("input.r-channel"),t=(e.shadowRoot||e).querySelector("input.g-channel"),o=(e.shadowRoot||e).querySelector("input.b-channel"),n=(e.shadowRoot||e).querySelector("input.a-channel");return l=l?l.value:e._RGBA.r,t=t?t.value:e._RGBA.g,o=o?o.value:e._RGBA.b,n=n?n.value:e._RGBA.a,{r:parseInt(l),g:parseInt(t),b:parseInt(o),a:n}}_setRGBAToInputs(){const e=this;Object.entries(e._RGBA).forEach(a=>{const l=(e.shadowRoot||e).querySelector("input."+a[0]+"-channel");l&&(l.value=e._RGBA[a[0]])})}_calcHueAngle(e,a){return 180*Math.atan2(a,e)/Math.PI}_calcSatDistance(e,a){var l=Math.pow;return Math.sqrt(l(e,2)+l(a,2))}});