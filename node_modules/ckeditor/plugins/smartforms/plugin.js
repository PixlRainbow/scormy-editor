CKEDITOR.plugins.add('smartforms', {
    icon: 'smartforms',
    init: editor => {
        var formIndex = 0;
        editor.addCommand('insertSmartForm', {
            exec: editor2 => {
                editor2.insertHtml(`
                    <form>
                        <p>Question text</p>
                        <smart-radio-button name='q${formIndex}' value='1'>Option 1</smart-radio-button>
                        <smart-radio-button name='q${formIndex}' value='2'>Option 2</smart-radio-button>
                        <smart-radio-button name='q${formIndex}' value='3'>Option 3</smart-radio-button>
                        <smart-radio-button name='q${formIndex}' value='4'>Option 4</smart-radio-button>
                    </form>
                `);
                formIndex++;
            }
        });
        editor.ui.addButton('SmartForm', {
            label: 'Insert Smart Form',
            command: 'insertSmartForm',
            toolbar: 'insert,100'
        });
        editor.config.allowedContent += "smart-radio-button[name,value];form;";
    }
});